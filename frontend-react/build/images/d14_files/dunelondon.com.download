(function(a,b,c,d){var e={exports:{}};e.exports;(function(){a.p2sAmp=a.p2sAmp||{};a.p2sq=a.p2sq||[];a.p2sq.jsver="2.23";function p2sSC(name,value,days){if(days){var date=new Date();date.setTime(date.getTime()+(days*86400000));var expires="; expires="+date.toGMTString();}else var expires="";document.cookie=name+"="+value+expires+";domain="+(document.domain.substr(0,3)=='www'?document.domain.substr(4):document.domain)+";path=/";if(typeof window.localStorage!=='undefined'){localStorage.setItem(name,value);}}
function jsLoader(plt,pixels){if(!p2sValidateHost()){return;}
if(plt=='fb'){if(typeof(a.fbq)==='undefined'){!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(a,b,'script','https://con'+''+'nect.'+''+'fac'+''+'ebook.net/en_US/fb'+''+'eve'+''+'nts.js');}}else if(plt=='sc'){if(typeof(a.snaptr)==='undefined'){(function(e,t,n){if(e.snaptr)return;var atr=e.snaptr=function(){atr.handleRequest?atr.handleRequest.apply(a,arguments):atr.queue.push(arguments)};atr.queue=[];var s='script';r=t.createElement(s);r.async=!0;r.src=n;var u=t.getElementsByTagName(s)[0];u.parentNode.insertBefore(r,u);})(a,b,'https://sc-s'+''+'tatic.net/sceve'+''+'nt.min.js');}}else if(plt=='tt'){if(typeof(a.ttq)==='undefined'){!function(w,d,t){w.TiktokAnalyticsObject=t;var ttq=w[t]=w[t]||[];ttq.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],ttq.setAndDefer=function(t,e){t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}};for(var i=0;i<ttq.methods.length;i++)ttq.setAndDefer(ttq,ttq.methods[i]);ttq.instance=function(t){for(var e=ttq._i[t]||[],n=0;n<ttq.methods.length;n++)ttq.setAndDefer(e,ttq.methods[n]);return e},ttq.load=function(e,n){var i='https://ana'+''+'lytics.ti'+''+'ktok.com/i18n/pix'+''+'el/eve'+''+'nts.js';ttq._i=ttq._i||{},ttq._i[e]=[],ttq._i[e]._u=i,ttq._t=ttq._t||{},ttq._t[e]=+new Date,ttq._o=ttq._o||{},ttq._o[e]=n||{};var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=i+"?sdkid="+e+"&lib="+t;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(o,a)};}(a,b,'ttq');}}else if(plt=='pn'){if(typeof(a.pintrk)==='undefined'){!function(e){if(!a.pintrk){a.pintrk=function(){a.pintrk.queue.push(Array.prototype.slice.call(arguments))};var n=a.pintrk;n.queue=[],n.version="3.0";var t=b.createElement("script");t.async=!0,t.src=e;var r=b.getElementsByTagName("script")[0];r.parentNode.insertBefore(t,r)}}("https://s.pin"+''+"img.com/ct/co"+''+"re.js");}}else if(plt=='al'){if(typeof(a.axon)==='undefined'&&pixels.length>0){a.AXON_EVENT_KEY=pixels[0];!function(e,r){var t=["https://s.axon.ai/pixel.js","https://c.albss.com/p/l/loader.iife.js"];if(!e.axon){var ax=e.axon=function(){ax.performOperation?ax.performOperation.apply(ax,arguments):ax.operationQueue.push(arguments)};ax.operationQueue=[],ax.ts=Date.now(),ax.eventKey=a.AXON_EVENT_KEY;for(var n=r.getElementsByTagName("script")[0],o=0;o<t.length;o++){var i=r.createElement("script");i.async=!0,i.src=t[o],n.parentNode.insertBefore(i,n)}}}(a,b);}}else if(plt=='rd'){!function(w,d){if(!w.rdt){var p=w.rdt=function(){p.sendEvent?p.sendEvent.apply(p,arguments):p.callQueue.push(arguments)};p.callQueue=[];var t=d.createElement("script");t.src="https://www.red"+"ditst"+"atic.com/a"+"ds/pi"+"xel.js",t.async=!0;var s=d.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}}(a,b);}else if(plt=='tw'){if(typeof(a.twq)==='undefined'){!function(e,t,n,s,u,a){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments);},s.version='1.1',s.queue=[],u=t.createElement(n),u.async=!0,u.src='https://static.a'+''+'ds-twi'+''+'tter.com/uw'+''+'t.js',a=t.getElementsByTagName(n)[0],a.parentNode.insertBefore(u,a))}(a,b,'script');}}else if(plt=='ge'){if(typeof(a.gtag)==='undefined'){window.dataLayer=window.dataLayer||[];window.gtag=function(){window.dataLayer.push(arguments);};a.gtag('js',new Date());}}}
function p2sGC(c_name){var i,x,y,ARRcookies=document.cookie.split(";");for(i=0;i<ARRcookies.length;i++){x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);x=x.replace(/^\s+|\s+$/g,"");if(x==c_name){return unescape(y);}}
if(typeof window.localStorage!=='undefined'){return localStorage.getItem(c_name)||'';}
return'';};function p2sGQ(name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regex=new RegExp("[\\?&]"+name+"=([^&#]*)","i"),results=regex.exec(location.search);if(results===null){if(typeof window.localStorage!=='undefined'){return localStorage.getItem(name)||'';}
return'';}else{let value=decodeURIComponent(results[1].replace(/\+/g," "))
if(typeof window.localStorage!=='undefined'){localStorage.setItem(name,value);}
return value;}
return'';}
function p2sCCC(t_cc){var cc_val=true;var cc_sub_val=false;var cc_var='';if(t_cc){cc_var=t_cc;if(t_cc.indexOf('.')>0&&t_cc.split('.').length===2){let field_arr=t_cc.split('.');cc_var=field_arr[0];cc_val=p2sGC(cc_var);if(cc_val!==''){cc_sub_val=p2sExtract(cc_val,field_arr[1]);}}else if(t_cc.indexOf('>')>0&&t_cc.split('>').length===2){let field_arr=t_cc.split('>');cc_var=field_arr[0];cc_val=p2sGC(cc_var);if(cc_val!==''){cc_sub_val=cc_val.indexOf(field_arr[1])>-1;}}else{cc_sub_val=cc_val=p2sGC(t_cc);}
if(cc_sub_val&&!p2sIntent(cc_sub_val)){cc_val=false;}}
return cc_sub_val;}
function p2sGC(c_name){var i,x,y,ARRcookies=document.cookie.split(";");for(i=0;i<ARRcookies.length;i++){x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);x=x.replace(/^\s+|\s+$/g,"");if(x==c_name){return unescape(y);}}
if(typeof window.localStorage!=='undefined'){return localStorage.getItem(c_name)||'';}
return'';};function p2sHS(input){input=input+'';var hval=0x811c9dc5;for(var i=0;i<input.length;i++){hval=hval^(input.charCodeAt(i)&0xFF);hval+=(hval<<1)+(hval<<4)+(hval<<7)+(hval<<8)+(hval<<24);}
var val=hval>>>0;return("0000000"+(val>>>0).toString(16)).substr(-8);}
function p2sExtract(str,field){let obj_str=str.toString().trim();let val_obj;if(obj_str.indexOf('{')===0&&obj_str.indexOf('}')===obj_str.length-1){try{val_obj=JSON.parse(obj_str);for(let i in val_obj){if(i===field){return val_obj[i].replace(/['"]+/g,'');}}}catch(e){let obj_arr=decodeURIComponent(obj_str).substring(1,obj_str.length-1).split(',');for(let i in obj_arr){let a_sub_arr=obj_arr[i].split(':');if(a_sub_arr.length===2&&a_sub_arr[0]===field){return a_sub_arr[1].replace(/['"]+/g,'');}}}}
return str;}
function p2sIntent(val){if(typeof(val)=='undefined'||!val||val.toString().length<=0||val==='revoke'||val===''||val==='false'||val==='0'||val==='{}'||val==='[]'||val==='off'){return false;}else{return true;}}
function p2sValidateHost(){if(a.location.href.search('apps'+''+'pot.com')>-1){console.log('invalid local');return false;}
return true;}
function p2sSetItem(key,value,expiresIn){if(typeof(window.localStorage)!=='undefined'){const exp=new Date().getTime()+expiresIn*1000;const data={value:value,expiration:exp};localStorage.setItem(key,JSON.stringify(data));}}
function p2sGetItem(key){if(typeof(window.localStorage)!=='undefined'){const data=localStorage.getItem(key);if(data){const parsedData=JSON.parse(data);const currentTime=new Date().getTime();if(currentTime>parsedData.expiration){localStorage.removeItem(key);return null;}
return parsedData.value;}}
return null;}
var t_endpoint='push';var t_cc='OptanonConsent>C0004:1';var t_currency='GBP';var t_token='776f77d15ebb5a33b1d26e0662eb66267431af8acbda758d583bab5b75907c48';var t_domain='https://cpi.dunelondon.com';var platform_data={};a.__p2s_pixels=a.__p2s_pixels||[];platform_data.fb={"pixels":["693552607751806"]};platform_data.tt={"pixels":[]};platform_data.sc={"pixels":[]};platform_data.pn={"pixels":[]};platform_data.al={"pixels":[]};platform_data.rd={"pixels":[]};platform_data.tw={"pixels":[],"pixel_events":[]};platform_data.ge={"pixels":[],"pixel_events":[]};const __p2s_platforms=['fb','tt','sc','pn','al','rd','tw','ge'];__p2s_platforms.forEach(plt=>{a.__p2s_pixels[plt]=a.__p2s_pixels[plt]||[];if(a.__p2s_pixels[plt].length>0||platform_data[plt].pixels.length>0){jsLoader(plt,platform_data[plt].pixels);}});function p2sParams(plt,p,pmap){var rtn={};for(ptrgt in pmap){let psrc=pmap[ptrgt];if(ptrgt==='contents'&&p.hasOwnProperty('content_ids')&&!p.hasOwnProperty('contents')){if(Array.isArray(p.content_ids)){p.contents=p.content_ids.filter(id=>typeof id==='string'||(typeof id==='number'&&Number.isInteger(id))).map(id=>({id:id,quantity:1}));}}
if(ptrgt==='content_ids'&&p.hasOwnProperty('content_ids')&&p.hasOwnProperty('contents')){delete p.content_ids;}
if(plt=='tt'&&ptrgt==='contents'&&p.hasOwnProperty('contents')){rtn.contents=[];for(let c in p.contents){if(p.contents[c].hasOwnProperty('id')){let nc={};nc.content_id=p.contents[c].id;if(p.contents[c].hasOwnProperty('quantity')){nc.quantity=parseInt(p.contents[c].quantity||1,10);}else{nc.quantity=1;}
if(p.contents[c].hasOwnProperty('item_price')){nc.price=parseFloat(p.contents[c].item_price,10);if(isNaN(nc.price)){nc.price=1;}
rtn.price=rtn.price||nc.price;}else if(p.hasOwnProperty('value')){nc.price=parseFloat(p.value,10);if(isNaN(nc.price)){nc.price=1;}
rtn.price=rtn.price||nc.price;}
if(p.hasOwnProperty('content_type')){nc.content_type=p.content_type=='product_group'?'product_group':'product';}
if(p.contents[c].hasOwnProperty('product_type')){nc.product_type=p.contents[c].product_type;rtn.product_type=rtn.product_type||nc.product_type;}else if(p.hasOwnProperty('product_type')){nc.product_type=p.product_type;rtn.product_type=rtn.product_type||nc.product_type;}
if(p.contents[c].hasOwnProperty('content_category')){nc.content_category=p.contents[c].content_category;rtn.content_category=rtn.content_category||nc.content_category;}else if(p.hasOwnProperty('content_category')){nc.content_category=p.content_category;rtn.content_category=rtn.content_category||nc.content_category;}
if(p.contents[c].hasOwnProperty('content_name')){nc.content_name=p.contents[c].content_name;rtn.content_name=rtn.content_name||nc.content_name;}else if(p.hasOwnProperty('content_name')){nc.content_name=p.content_name;rtn.content_name=rtn.content_name||nc.content_name;}
rtn.contents.push(nc);}}
if(rtn.contents.length===0){delete rtn.contents;}}else if(plt=='sc'&&ptrgt==='contents'&&p.hasOwnProperty('contents')){rtn.item_ids=[];for(let c in p.contents){if(p.contents[c].hasOwnProperty('id')){rtn.item_ids.push(p.contents[c].id);}}
if(rtn.item_ids.length===0){delete rtn.item_ids;}}else if(plt=='pn'&&ptrgt==='contents'&&p.hasOwnProperty('contents')){rtn.line_items=[];for(let c in p.contents){if(p.contents[c].hasOwnProperty('id')){let nc={};nc.product_id=p.contents[c].id;if(p.contents[c].hasOwnProperty('quantity')){nc.product_quantity=p.contents[c].quantity;}
if(p.contents[c].hasOwnProperty('item_price')){nc.product_price=p.contents[c].item_price;}else if(p.hasOwnProperty('value')){nc.product_price=p.value;}
if(p.contents[c].hasOwnProperty('content_category')){nc.product_category=p.contents[c].content_category;}
if(p.contents[c].hasOwnProperty('content_name')){nc.product_name=p.contents[c].content_name;}
rtn.line_items.push(nc);}}
if(rtn.line_items.length===0){delete rtn.line_items;}}else if(plt=='al'&&ptrgt==='contents'&&p.hasOwnProperty('contents')){rtn.items=[];for(let c in p.contents){if(p.contents[c].hasOwnProperty('id')){let nc={};nc.item_id=p.contents[c].id;if(p.contents[c].hasOwnProperty('quantity')){nc.quantity=p.contents[c].quantity;}else{nc.quantity=1;}
if(p.contents[c].hasOwnProperty('item_price')){nc.price=p.contents[c].item_price;}else if(p.contents[c].hasOwnProperty('price')){nc.price=p.contents[c].price;}else if(p.hasOwnProperty('value')){nc.price=p.value;}else{nc.price=1;}
if(p.contents[c].hasOwnProperty('content_category')){nc.item_category=p.contents[c].content_category;nc.item_category_id=p.contents[c].content_category;}else if(p.contents[c].hasOwnProperty('item_category_id')){nc.item_category_id=p.contents[c].item_category_id;}else if(p.hasOwnProperty('content_category')){nc.item_category=p.content_category;nc.item_category_id=p.content_category;}else if(p.hasOwnProperty('item_category_id')){nc.item_category=p.item_category_id;nc.item_category_id=p.item_category_id;}
if(p.hasOwnProperty('item_variant_id')){nc.item_variant_id=p.item_variant_id;}
if(p.hasOwnProperty('image_url')){nc.image_url=p.image_url;}
if(p.contents[c].hasOwnProperty('content_name')){nc.item_name=p.contents[c].content_name;}else if(p.hasOwnProperty('content_name')){nc.item_name=p.content_name;}else{nc.item_name=p.contents[c].id;}
rtn.items.push(nc);}}
if(rtn.items.length===0){delete rtn.items;}}else if(plt=='rd'&&ptrgt==='contents'&&p.hasOwnProperty('contents')){rtn.products=[];rtn.itemCount=0;for(let c in p.contents){if(p.contents[c].hasOwnProperty('id')){let nc={};nc.id=p.contents[c].id;if(p.contents[c].hasOwnProperty('quantity')){rtn.itemCount+=p.contents[c].quantity*1;}
if(p.contents[c].hasOwnProperty('content_category')){nc.category=p.contents[c].content_category;}
if(p.contents[c].hasOwnProperty('content_name')){nc.name=p.contents[c].content_name;}
rtn.products.push(nc);}}
if(rtn.products.length===0){delete rtn.products;delete rtn.itemCount;}}else if(plt=='tw'&&ptrgt==='contents'&&p.hasOwnProperty('contents')){rtn.contents=[];for(let c in p.contents){if(p.contents[c].hasOwnProperty('id')){let nc={};nc.content_id=p.contents[c].id;if(p.contents[c].hasOwnProperty('quantity')){nc.num_items=p.contents[c].quantity;}
if(p.contents[c].hasOwnProperty('item_price')){nc.content_price=p.contents[c].item_price;}else if(p.hasOwnProperty('value')){nc.content_price=p.value;}
if(p.contents[c].hasOwnProperty('content_category')){nc.content_type=p.contents[c].content_category;}
if(p.contents[c].hasOwnProperty('content_name')){nc.content_name=p.contents[c].content_name;}
rtn.contents.push(nc);}}
if(rtn.contents.length===0){delete rtn.contents;}}else if(p.hasOwnProperty(psrc)){rtn[ptrgt]=p[psrc];}else if((typeof(psrc)==='object')){for(psrcsub in psrc){if(p.hasOwnProperty(psrc[psrcsub])){rtn[ptrgt]=rtn[ptrgt]||p[psrc[psrcsub]];}}}}
return rtn;}
var emaps={"tw":{},"ge":{},"tt":{"pageview":{"name":"Pageview","p":{"value":"value","currency":"currency","description":"description"}},"browse":{"name":"Browse","p":{"value":"value","currency":"currency","description":"description"}},"clickbutton":{"name":"ClickButton","p":{"value":"value","currency":"currency","contents":"contents","content_id":"content_id","description":"description"}},"search":{"name":"Search","p":{"query":"search_string","value":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type","description":"description"}},"viewcontent":{"name":"ViewContent","p":{"content_type":"content_type","contents":"contents","content_id":"content_id","value":"value","currency":"currency","content_name":"content_name","content_category":"content_category","price":"price","quantity":"quantity","description":"description"}},"addtocart":{"name":"AddToCart","p":{"content_type":"content_type","contents":"contents","content_id":"content_id","value":"value","currency":"currency","content_name":"content_name","content_category":"content_category","price":"price","quantity":"quantity","description":"description"}},"initiatecheckout":{"name":"InitiateCheckout","p":{"content_type":"content_type","contents":"contents","content_id":"content_id","value":"value","currency":"currency","content_name":"content_name","content_category":"content_category","price":"price","quantity":"quantity","description":"description"}},"purchase":{"name":"CompletePayment","p":{"content_type":"content_type","contents":"contents","content_id":"content_id","value":"value","currency":"currency","content_name":"content_name","content_category":"content_category","price":"price","quantity":"quantity","description":"description"}},"placeanorder":{"name":"PlaceAnOrder","p":{"content_type":"content_type","contents":"contents","content_id":"content_id","value":"value","currency":"currency","content_name":"content_name","content_category":"content_category","price":"price","quantity":"quantity","description":"description"}},"addpaymentinfo":{"name":"AddPaymentInfo","p":{"content_type":"content_type","contents":"contents","content_id":"content_id","value":"value","currency":"currency","content_name":"content_name","content_category":"content_category","price":"price","quantity":"quantity","description":"description"}},"addtowishlist":{"name":"AddToWishlist","p":{"content_type":"content_type","contents":"contents","content_id":"content_id","value":"value","currency":"currency","content_name":"content_name","content_category":"content_category","price":"price","quantity":"quantity","description":"description"}},"completeregistration":{"name":"CompleteRegistration","p":{"value":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type","description":"description"}},"lead":{"name":"SubmitForm","p":{"value":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type","description":"description"}},"download":{"name":"Download","p":{"value":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type","description":"description"}},"submitform":{"name":"SubmitForm","p":{"value":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type","description":"description"}},"contact":{"name":"Contact","p":{"value":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type","description":"description"}},"subscribe":{"name":"Subscribe","p":{"value":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type","description":"description"}},"init":{"name":"identity","p":{"phone_number":["pp","ph"],"email":"em"}}},"sc":{"pageview":{"name":"PAGE_VIEW","p":{"price":"value","currency":"currency"}},"browse":{"name":"PAGE_VIEW","p":{"price":"value","currency":"currency"}},"clickbutton":{"name":"CUSTOM_EVENT_1","p":{"price":"value","currency":"currency","contents":"contents","content_id":"content_id"}},"search":{"name":"SEARCH","p":{"query":"search_string","price":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type"}},"viewcontent":{"name":"VIEW_CONTENT","p":{"content_type":"content_type","contents":"contents","content_id":"content_id","price":"value","currency":"currency"}},"addtocart":{"name":"ADD_CART","p":{"content_type":"content_type","contents":"contents","content_id":"content_id","price":"value","currency":"currency"}},"initiatecheckout":{"name":"START_CHECKOUT","p":{"content_type":"content_type","contents":"contents","content_id":"content_id","price":"value","currency":"currency"}},"purchase":{"name":"PURCHASE","p":{"transaction_id":"order_id","content_type":"content_type","contents":"contents","content_id":"content_id","price":"value","currency":"currency"}},"addpaymentinfo":{"name":"ADD_BILLING","p":{"content_type":"content_type","contents":"contents","content_id":"content_id","price":"value","currency":"currency"}},"addtowishlist":{"name":"ADD_TO_WISHLIST","p":{"content_type":"content_type","contents":"contents","content_id":"content_id","price":"value","currency":"currency"}},"completeregistration":{"name":"SIGN_UP","p":{"price":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type"}},"lead":{"name":"CUSTOM_EVENT_1","p":{"price":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type"}},"contact":{"name":"CUSTOM_EVENT_2","p":{"price":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type"}},"subscribe":{"name":"SUBSCRIBE","p":{"price":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type"}},"init":{"name":"init","p":{"phone_number":"ph","email":"em"}},"custom_event_1":{"name":"CUSTOM_EVENT_1","p":{"price":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type"}},"custom_event_2":{"name":"CUSTOM_EVENT_2","p":{"price":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type"}},"custom_event_3":{"name":"CUSTOM_EVENT_3","p":{"price":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type"}},"custom_event_4":{"name":"CUSTOM_EVENT_4","p":{"price":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type"}},"custom_event_5":{"name":"CUSTOM_EVENT_5","p":{"price":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type"}}},"pn":{"pageview":{"name":"pagevisit","p":{"contents":"contents","content_ids":"content_ids","value":"value","currency":"currency"}},"clickbutton":{"name":"clickbutton","p":{"value":"value","currency":"currency"}},"search":{"name":"search","p":{"search_query":"search_string","value":"value","currency":"currency"}},"viewcontent":{"name":"pagevisit","p":{"contents":"contents","content_ids":"content_ids","value":"value","currency":"currency"}},"addtocart":{"name":"addtocart","p":{"contents":"contents","content_ids":"content_ids","value":"value","currency":"currency"}},"initiatecheckout":{"name":"initiatecheckout","p":{"contents":"contents","content_ids":"content_ids","value":"value","currency":"currency"}},"purchase":{"name":"checkout","p":{"order_id":"order_id","contents":"contents","content_ids":"content_ids","value":"value","currency":"currency"}},"addpaymentinfo":{"name":"addpaymentinfo","p":{"content_type":"content_type","contents":"contents","content_ids":"content_ids","content_id":"content_id","price":"value","currency":"currency"}},"addtowishlist":{"name":"addtowishlist","p":{"content_type":"content_type","contents":"contents","content_ids":"content_ids","content_id":"content_id","price":"value","currency":"currency"}},"completeregistration":{"name":"signup","p":{"value":"value","currency":"currency"}},"lead":{"name":"lead","p":{"lead_type":"lead_type","value":"value","currency":"currency"}},"contact":{"name":"contact","p":{"value":"value","currency":"currency"}},"subscribe":{"name":"subscribe","p":{"value":"value","currency":"currency"}},"init":{"name":"init","p":{"ph":"ph","em":"em","ge":"ge","db":"db","fn":"fn","ln":"ln","ct":"ct","st":"st","zp":"zp","country":"cn","external_id":"ext_id"}}},"al":{"pageview":{"name":"page_view","p":{"contents":"contents","value":"value","currency":"currency"}},"search":{"name":"search","p":{"search_term":"search_string","value":"value","currency":"currency"}},"viewcontent":{"name":"view_item","p":{"contents":"contents","value":"value","currency":"currency"}},"addtocart":{"name":"add_to_cart","p":{"contents":"contents","value":"value","currency":"currency"}},"removefromcart":{"name":"remove_from_cart","p":{"contents":"contents","value":"value","currency":"currency"}},"initiatecheckout":{"name":"begin_checkout","p":{"contents":"contents","value":"value","currency":"currency"}},"purchase":{"name":"purchase","p":{"transaction_id":"order_id","contents":"contents","value":"value","currency":"currency","shipping":"shipping","tax":"tax","user_id":"external_id"}},"addpaymentinfo":{"name":"add_payment_info","p":{"contents":"contents","value":"value","currency":"currency","payment_type":"payment_type"}},"completeregistration":{"name":"sign_up","p":{"user_id":"external_id","method":"method"}},"lead":{"name":"generate_lead","p":{"user_id":"external_id","value":"value","currency":"currency"}},"login":{"name":"login","p":{"user_id":"external_id"}},"subscribe":{"name":"subscribe","p":{"user_id":"external_id","value":"value","currency":"currency"}},"init":{"name":"init","p":{"ph":"ph","em":"email","ge":"ge","db":"db","fn":"fn","ln":"ln","ct":"ct","st":"st","zp":"zp","country":"cn","external_id":"externalId"}}},"rd":{"pageview":{"name":"PageVisit","p":{}},"search":{"name":"Search","p":{"search_term":"search_string","value":"value","currency":"currency"}},"viewcontent":{"name":"ViewContent","p":{}},"addtocart":{"name":"AddToCart","p":{"contents":"contents","value":"value","currency":"currency"}},"purchase":{"name":"Purchase","p":{"transaction_id":"order_id","contents":"contents","value":"value","currency":"currency","shipping":"shipping","tax":"tax","user_id":"external_id"}},"addtowishlist":{"name":"AddToWishlist","p":{"contents":"contents","value":"value","currency":"currency","payment_type":"payment_type"}},"completeregistration":{"name":"SignUp","p":{"user_id":"external_id","method":"method"}},"lead":{"name":"Lead","p":{"user_id":"external_id","value":"value","currency":"currency"}},"custom":{"name":"Custom","p":{"contents":"contents","value":"value","currency":"currency"}},"init":{"name":"init","p":{"em":"email","external_id":"ext_id"}}}}
if(!platform_data.tw.pixel_events||typeof platform_data.tw.pixel_events!=='object'){}else{emaps.tw=platform_data.tw.pixel_events;}
if(!platform_data.ge.pixel_events||typeof platform_data.ge.pixel_events!=='object'){}else{emaps.ge=platform_data.ge.pixel_events;}
var p2s_test_event_code=p2sGC('p2s_test_event_code');a.emaps=emaps;function p2sIsNumeric(value){return/^-?\d+$/.test(value);}
function p2sSelectPixels(pixelArray,dataObject){if(Array.isArray(pixelArray)&&pixelArray.length>0){for(var apx_key in pixelArray){if(apx_key>=0&&apx_key<100){if(p2sIsNumeric(pixelArray[apx_key])){var pixelValue=pixelArray[apx_key].toString().trim().toLowerCase();if(dataObject.pixels.indexOf(pixelValue)===-1){dataObject.pixels.push(pixelArray[apx_key]);}}}}}
return dataObject;}
function p2sMapCall(plt,et,p,eid){if(!p2sValidateHost()){return;}
__p2s_platforms.forEach(plt=>{platform_data[plt].pixels.length
platform_data[plt]=p2sSelectPixels(a.__p2s_pixels[plt],platform_data[plt]);});var p2s_test_event_code=p2sGC('p2s_test_event_code');if(p2s_test_event_code!=''){console.log(plt,et,p,eid);}
if(plt=='ge'&&emaps.hasOwnProperty(plt)){if(p2s_test_event_code!==''){console.log('emaps[plt]=>');console.log(emaps[plt]);}
var ge_tag_id=false;var ge_ec_data={};var ge_prm={};var pixel_events=[];if(Object.keys(p).length>0){if(p.hasOwnProperty('tag_id')){ge_tag_id=p['tag_id'];delete p['tag_id'];}
var geprms=Object.assign({},p,a.p2sAmp);if(p2s_test_event_code!==''){console.log('emaps.ge',emaps.ge,et.toLowerCase());}
for(pi in emaps.ge){if(typeof emaps.ge[pi][et.toLowerCase()]!='undefined'){ge_prm=p2sParams(plt,geprms,emaps.ge[pi][et.toLowerCase()]['p']);pixel_events.push(emaps.ge[pi][et.toLowerCase()]);}}
for(var aky in ge_prm){if(p2s_test_event_code!==''){console.log(aky+'=>'+ge_prm[aky]);}
if(p2sIsSHA256(ge_prm[aky])!==0){if(['email_address','phone_number'].includes(aky)){ge_ec_data['sha256_'+aky]=ge_prm[aky];delete ge_prm[aky];}else if(['first_name','last_name','country'].includes(aky)){ge_ec_data.address=ge_ec_data.address||{};ge_ec_data.address['sha256_'+aky]=ge_prm[aky];delete ge_prm[aky];}}else{if(['email','phone_number'].includes(aky)){ge_ec_data[aky]=ge_prm[aky];delete ge_prm[aky];}else if(['first_name','last_name','country','city'].includes(aky)){ge_ec_data.address=ge_ec_data.address||{};ge_ec_data.address[aky]=ge_prm[aky];delete ge_prm[aky];}}}}
if(p2s_test_event_code!==''){console.log('et.toLowerCase()=>'+et.toLowerCase());}
if(et.toLowerCase()==='init'||et.toLowerCase()==='identify'){if(ge_tag_id){a.gtag('config',ge_tag_id,{'allow_enhanced_conversions':true});}
if(Object.keys(ge_ec_data).length>0){a.gtag('set','user_data',ge_ec_data);}}else if(pixel_events.length>0){if(et.toLowerCase()=='purchase'){ge_prm.transaction_id=eid;}
for(let pi=0;pi<platform_data.ge.pixels.length&&pi<100;pi++){if(p2s_test_event_code!==''){console.log('platform_data.ge.pixels[pi]=>'+platform_data.ge.pixels[pi]);console.log('emaps.ge[platform_data.ge.pixels[pi]]=>'+emaps.ge[platform_data.ge.pixels[pi]]);}
if(emaps.ge[platform_data.ge.pixels[pi]].hasOwnProperty(et.toLowerCase())){ge_prm.send_to=emaps.ge[platform_data.ge.pixels[pi]][et.toLowerCase()].name;if(Object.keys(ge_ec_data).length>0){ge_prm.enhanced_conversions_data=ge_ec_data;}
if(p2s_test_event_code!==''){console.log('ge_prm=>'+ge_prm);}
gtag('event','conversion',ge_prm);}}}}
if(plt==='tt'&&emaps.hasOwnProperty(plt)){if(et.toLowerCase()=='init'||et.toLowerCase()=='identify'){if(et.toLowerCase()=='init'){if(platform_data.tt.pixels.length>0){a.ttq._partner="ZZG";for(pi=0;pi<platform_data.tt.pixels.length&&pi<100;pi++){if(p2s_test_event_code!=''){console.log(platform_data.tt.pixels[pi]+'.load()');}
a.ttq.load(platform_data.tt.pixels[pi]);}}}
if(Object.keys(p).length>0){ttq_amp=p2sParams(plt,p,emaps.tt[et.toLowerCase()]['p']);for(var aky in ttq_amp){if(aky.toString().trim().toLowerCase()==='pixels'){if(Array.isArray(ttq_amp[aky])){for(var apx_key in ttq_amp[aky]){if(apx_key>=0&&apx_key<100){if(platform_data.tt.pixels.indexOf(ttq_amp[aky][apx_key].toString().trim().toLowerCase())===-1){platform_data.tt.pixels.push(ttq_amp[aky][apx_key].toString().trim().toLowerCase());a.__p2s_pixels['tt'].push(ttq_amp[aky][apx_key].toString().trim().toLowerCase());a.ttq.load(ttq_amp[aky][apx_key].toString().trim().toLowerCase());}}}}}
if(p2sIsSHA256(ttq_amp[aky])&&aky.indexOf('sha256_')!==0){ttq_amp['sha256_'+aky]=ttq_amp[aky];delete ttq_amp[aky];}}
ttq_amp.external_id=eid;if(Object.keys(ttq_amp).length>0){if(platform_data.tt.pixels.length>0){for(var pi in platform_data.tt.pixels){if(pi>=0&&pi<100){if(p2s_test_event_code!=''){console.log(platform_data.tt.pixels[pi]+'.identify(');console.log(ttq_amp);console.log(');');}
a.ttq.instance(platform_data.tt.pixels[pi]).identify(ttq_amp);}}}}}}else{try{if(emaps.tt.hasOwnProperty(et.toLowerCase())&&emaps.tt[et.toLowerCase()].hasOwnProperty('p')){trg_evt=emaps.tt[et.toLowerCase()].name;prm=p2sParams(plt,p,emaps.tt[et.toLowerCase()]['p']);}else{trg_evt=et;prm=p2sParams(plt,p,emaps.tt['pageview']['p']);}
if(platform_data.tt.pixels.length>0){for(var pi in platform_data.tt.pixels){if(pi>=0&&pi<100){if(p2s_test_event_code!=''){console.log(platform_data.tt.pixels[pi]+'.track('+trg_evt+',');console.log(prm);console.log({event_id:eid});console.log(');');}
a.ttq.instance(platform_data.tt.pixels[pi]).track(trg_evt,prm,{event_id:eid});}}}}catch(e){console.log(e);}}}else if(plt=='sc'&&emaps.hasOwnProperty(plt)){if(et.toLowerCase()=='init'){var sc_amp=p2sParams(plt,p,emaps.sc[et.toLowerCase()]['p']);for(var aky in sc_amp){if(aky.toString().trim().toLowerCase()==='pixels'){if(Array.isArray(sc_amp[aky])){for(var apx_key in sc_amp[aky]){if(apx_key>=0&&apx_key<100){if(platform_data.sc.pixels.indexOf(sc_amp[aky][apx_key].toString().trim().toLowerCase())===-1){platform_data.sc.pixels.push(sc_amp[aky][apx_key].toString().trim().toLowerCase());a.__p2s_pixels['sc'].push(sc_amp[aky][apx_key].toString().trim().toLowerCase());}}}}}
if(p2sIsSHA256(sc_amp[aky])&&aky.indexOf('user_hashed_')!==0){sc_amp['user_hashed_'+aky]=sc_amp[aky];delete sc_amp[aky];}}
if(platform_data.sc.pixels.length>0){for(var pi in platform_data.sc.pixels){if(pi>=0&&pi<100){if(p2s_test_event_code!=''){console.log("snaptr('init','"+platform_data.sc.pixels[pi]+",");console.log(sc_amp);console.log(');');}
a.snaptr('init',platform_data.sc.pixels[pi],sc_amp);}}}}else{if(emaps.sc.hasOwnProperty(et.toLowerCase())){var prm={};if(emaps.sc[et.toLowerCase()].hasOwnProperty('p')){prm=p2sParams(plt,p,emaps.sc[et.toLowerCase()]['p']);}
prm.client_dedup_id=eid;if(et.toLowerCase()=='purchase'&&!prm.hasOwnProperty('transaction_id')){prm.transaction_id=eid;}
if(platform_data.sc.pixels.length>0){if(p2s_test_event_code!=''){console.log('snaptr("track","'+emaps.sc[et.toLowerCase()].name+'",');console.log(prm);console.log(');');}
a.snaptr('track',emaps.sc[et.toLowerCase()].name,prm);}}}}
else if(plt=='pn'&&emaps.hasOwnProperty(plt)){if(et.toLowerCase()=='pageview'){if(platform_data.pn.pixels.length>0){for(var pi in platform_data.pn.pixels){if(pi>=0&&pi<100){if(p2s_test_event_code!=''){console.log(platform_data.pn.pixels[pi]+'.page()');}
a.pintrk('page');}}}}else if(et.toLowerCase()=='init'||et.toLowerCase()=='identify'){pn_amp={};pn_amp.external_id=eid;if(Object.keys(p).length>0){pn_amp=p2sParams(plt,p,emaps.pn[et.toLowerCase()]['p']);}
if(platform_data.pn.pixels.length>0&&et.toLowerCase()=='init'){for(var pi in platform_data.pn.pixels){if(pi>=0&&pi<100){if(p2s_test_event_code!=''){console.log('window.pintrk.("load",');console.log(platform_data.pn.pixels[pi]);console.log(pn_amp);console.log(')');}
a.pintrk('load',platform_data.pn.pixels[pi],pn_amp);}}}
if(Object.keys(p).length>0){pn_amp=p2sParams(plt,p,emaps.pn[et.toLowerCase()]['p']);for(var aky in pn_amp){if(aky.toString().trim().toLowerCase()==='pixels'){if(Array.isArray(pn_amp[aky])){for(var apx_key in pn_amp[aky]){if(apx_key>=0&&apx_key<100){if(platform_data.pn.pixels.indexOf(pn_amp[aky][apx_key].toString().trim().toLowerCase())===-1){platform_data.pn.pixels.push(pn_amp[aky][apx_key].toString().trim().toLowerCase());a.__p2s_pixels['pn'].push(pn_amp[aky][apx_key].toString().trim().toLowerCase());a.pintrk('load',pn_amp[aky][apx_key].toString().trim().toLowerCase(),pn_amp);}}}}}}}}else{if(emaps.pn.hasOwnProperty(et.toLowerCase())){var prm={};if(emaps.pn[et.toLowerCase()].hasOwnProperty('p')){prm=p2sParams(plt,p,emaps.pn[et.toLowerCase()]['p']);}
prm.event_id=eid;if(platform_data.pn.pixels.length>0){a.pintrk('track',emaps.pn[et.toLowerCase()].name,prm);}}}}
else if(plt=='al'&&emaps.hasOwnProperty(plt)){if(et.toLowerCase()=='init'||et.toLowerCase()=='identify'){al_amp={};if(Object.keys(p).length>0){al_amp=p2sParams(plt,p,emaps.al[et.toLowerCase()]['p']);}
if(platform_data.al.pixels.length>0&&et.toLowerCase()=='init'){for(var pi in platform_data.al.pixels){if(pi>=0&&pi<100){if(p2s_test_event_code!=''){console.log('window.axon("init",');console.log(platform_data.al.pixels[pi]);console.log(al_amp);console.log(')');}
a.axon('init');}}}
if(Object.keys(p).length>0){al_amp=p2sParams(plt,p,emaps.al[et.toLowerCase()]['p']);for(var aky in al_amp){if(aky.toString().trim().toLowerCase()==='pixels'){if(Array.isArray(al_amp[aky])){for(var apx_key in al_amp[aky]){if(apx_key>=0&&apx_key<100){if(platform_data.al.pixels.indexOf(al_amp[aky][apx_key].toString().trim().toLowerCase())===-1){platform_data.al.pixels.push(al_amp[aky][apx_key].toString().trim().toLowerCase());a.__p2s_pixels['al'].push(al_amp[aky][apx_key].toString().trim().toLowerCase());jsLoader(plt,platform_data[plt].pixels);}}}}}}}}else{if(emaps.al.hasOwnProperty(et.toLowerCase())){var prm={};if(emaps.al[et.toLowerCase()].hasOwnProperty('p')){prm=p2sParams(plt,p,emaps.al[et.toLowerCase()]['p']);}
if(et.toLowerCase()=='purchase'&&!prm.hasOwnProperty('transaction_id')){prm.transaction_id=eid;}
if(platform_data.al.pixels.length>0){a.axon('track',emaps.al[et.toLowerCase()].name,prm);}}}}else if(plt=='rd'&&emaps.hasOwnProperty(plt)){if(et.toLowerCase()=='init'||et.toLowerCase()=='identify'){rd_amp={};if(Object.keys(p).length>0){rd_amp=p2sParams(plt,p,emaps.rd[et.toLowerCase()]['p']);}
if(platform_data.rd.pixels.length>0&&et.toLowerCase()=='init'){for(var pi in platform_data.rd.pixels){if(pi>=0&&pi<100){if(p2s_test_event_code!=''){console.log('window.rdt("init",');console.log(platform_data.rd.pixels[pi]);console.log(rd_amp);console.log(')');}
a.rdt('init',platform_data.rd.pixels[pi],rd_amp);}}}
if(Object.keys(p).length>0){rd_amp=p2sParams(plt,p,emaps.rd[et.toLowerCase()]['p']);for(var aky in rd_amp){if(aky.toString().trim().toLowerCase()==='pixels'){if(Array.isArray(rd_amp[aky])){for(var apx_key in rd_amp[aky]){if(apx_key>=0&&apx_key<100){if(platform_data.rd.pixels.indexOf(rd_amp[aky][apx_key].toString().trim().toLowerCase())===-1){platform_data.rd.pixels.push(rd_amp[aky][apx_key].toString().trim().toLowerCase());a.__p2s_pixels['rd'].push(rd_amp[aky][apx_key].toString().trim().toLowerCase());jsLoader(plt,platform_data[plt].pixels);}}}}}}}}else{if(emaps.rd.hasOwnProperty(et.toLowerCase())){var prm={};if(emaps.rd[et.toLowerCase()].hasOwnProperty('p')){prm=p2sParams(plt,p,emaps.rd[et.toLowerCase()]['p']);}
prm.conversion_id=eid;if(platform_data.rd.pixels.length>0){a.rdt('track',emaps.rd[et.toLowerCase()].name,prm);}}else{if(platform_data.rd.pixels.length>0){prm=p2sParams(plt,p,emaps.rd['Custom']);prm.conversion_id=eid;prm.customEventName=et;a.rdt('track','Custom',prm);}}}}
else if(plt=='tw'&&emaps.hasOwnProperty(plt)&&platform_data.tw.pixels.length>0){if(et.toLowerCase()=='init'){for(let pi=0;pi<platform_data.tw.pixels.length&&pi<100;pi++){if(p2s_test_event_code!=''){console.log("window.twq('config','"+platform_data.tw.pixels[pi]+"')");}
a.twq('config',platform_data.tw.pixels[pi]);}}else{for(let pi=0;pi<platform_data.tw.pixels.length&&pi<100;pi++){if(emaps.tw[platform_data.tw.pixels[pi]].hasOwnProperty(et.toLowerCase())){var prm={};if(emaps.tw[platform_data.tw.pixels[pi]][et.toLowerCase()].hasOwnProperty('p')){var twprms=Object.assign({},p,a.p2sAmp);prm=p2sParams(plt,twprms,emaps.tw[platform_data.tw.pixels[pi]][et.toLowerCase()]['p']);}
prm.conversion_id=eid;if(p2s_test_event_code!=''){console.log('twq("event","'+emaps.tw[platform_data.tw.pixels[pi]][et.toLowerCase()].name+'",');console.log(prm);console.log(');');}
twq('event',emaps.tw[platform_data.tw.pixels[pi]][et.toLowerCase()].name,prm);}}}}}
function isSafeParameter(param){const unsafePattern=/E\+\d+|[-.]{2,}|[%(){}\[\]]|win\.ini|etcpasswd|exec\s+cmd|nslookup|alert|script|img src|<|>|document\.|sleep|return\s+(true|false)|var\s+d=new Date|where\s+\d|WEB-INF|sys\.|fnsqlvarbasetostr|HashBytes|declare|set A \d+|select|from dual|expr \d+ \d+|TABLE|TD BACKGROUND|regex|requireos\.|endianness|vardumpmd5\d+|u002e|u2215|echo|xss|java|href|xiinclude|include/;return!unsafePattern.test(param);}
function p2sIsSHA256(str){const regexExp=/^[a-f0-9]{64}$/gi;return regexExp.test(str);}
function p2sc(et,p,eid){if(!isSafeParameter(et)){console.log('Incorrect Event Name')
return false;}
p=p||false;eid=eid||false;if(Array.isArray(a.__p2s_pixels['fb'])&&a.__p2s_pixels['fb'].length>0){for(var apx_key in a.__p2s_pixels['fb']){if(apx_key>=0&&apx_key<100){if(p2sIsNumeric(a.__p2s_pixels['fb'][apx_key])){if(platform_data.fb.pixels.indexOf(a.__p2s_pixels['fb'][apx_key].toString().trim().toLowerCase())===-1){platform_data.fb.pixels.push(a.__p2s_pixels['fb'][apx_key]);}}}}}
if(!et){console.log('et not found',et);return false;}
var std=true;var tcmd='trackSingle';if(et.toString().trim().substring(0,7).toLowerCase()=='custom:'){tcmd='trackSingleCustom';et=et.toString().trim().substring(7);std=false;}
if(t_endpoint){sst=true;}else{sst=false;}
if(et.toString().trim().substring(0,6).toLowerCase()=='pixel:'){et=et.toString().trim().substring(6);sst=false;}
var p2s_test_event_code=p2sGC('p2s_test_event_code');if(p2s_test_event_code!=''){console.log(et,p,eid);}
if(et=='cc'&&t_cc){p2sSC(t_cc,p,365);return;}
if(et.toLowerCase()=='consent'&&(p.toString().toLowerCase()==='revoke'||p.toString().toLowerCase()==='grant')){if(platform_data.fb.pixels.length>0&&typeof(fbq)!='undefined'){fbq('consent',p.toString().toLowerCase());}
p2sSC('_p2s_cc',p.toString().toLowerCase(),365);return;}
var amp_cc=true;var p2s_cc_val=p2sGC('_p2s_cc');if(t_cc){var cc_val;if(t_cc.indexOf('.')>0){let field_arr=t_cc.split('.');if(field_arr.length===2){cc_val=p2sGC(field_arr[0]);cc_val=p2sExtract(cc_val,field_arr[1]);}else{cc_val=p2sGC(t_cc);}}else if(t_cc.indexOf('>')>0){let field_arr=t_cc.split('>');if(field_arr.length===2){cc_val=p2sGC(field_arr[0]);cc_val=cc_val.indexOf(field_arr[1])>-1;}else{cc_val=p2sGC(t_cc);}}else{cc_val=p2sGC(t_cc);}
if(!p2sIntent(cc_val)){amp_cc=false;if(p2s_cc_val!=='autorevoke'){if(platform_data.fb.pixels.length>0&&typeof(fbq)!='undefined'){fbq('consent','revoke');}
p2sSC('_p2s_cc','autorevoke',365);}}else{if(p2s_cc_val==='autorevoke'){if(platform_data.fb.pixels.length>0&&typeof(fbq)!='undefined'){fbq('consent','grant');}
p2sSC('_p2s_cc','grant',365);}}}else{if(p2s_cc_val==='autorevoke'){p2s_cc_val='';}}
if(amp_cc){if(p2s_cc_val==='autorevoke'||p2s_cc_val==='revoke'){amp_cc=false;}}
if(et.toLowerCase()=='dataprocessingoptions'){a.__fbq_dpo=[typeof(p[0])!='undefined'?p[0]:[],typeof(p[1])!='undefined'?p[1]:[],typeof(p[2])!='undefined'?p[2]:[]];if(platform_data.fb.pixels.length>0&&typeof(fbq)!='undefined'){fbq('dataProcessingOptions',a.__fbq_dpo[0],a.__fbq_dpo[1],a.__fbq_dpo[2]);}
return;}
var uvi=p2sGC('_p2s_uvi');if(!uvi){euid=p2sGC('_fbp')||p2sGC('_ttp')||p2sGC('_scid')||p2sGC('uvi')||p2sGC('_ga')||p2sGC('_gid')||p2sGC('PHPSESSID')||p2sGC('ASP.NET_SessionId')||p2sHS(navigator.userAgent)+'.'+p2sHS(location.href);uvi=p2sHS(euid)+'.'+Math.floor(Math.random()*10000000000000001)+"."+Date.now();p2sSC('_p2s_uvi',uvi,30);}else{p2sSC('_p2s_uvi',uvi,30);}
if(et.toLowerCase()=='init'||et.toLowerCase()=='identify'){a.p2sAmp=a.p2sAmp||{};if(typeof([])!='undefined'&&Array.isArray([])&&[].length>0){a.p2sAmp.catcher=[];}
if(p){for(pidt in p){a.p2sAmp[pidt]=p[pidt];}}else{p={value:0,currency:p2sGC('currency')||t_currency};}
var amp_key_match={'ph':'ph','em':'em','fn':'fn','ln':'ln','fid':'fb_login_id','fb_login_id':'fb_login_id','cn':'country','country':'country','ct':'ct','st':'st','db':'db','ge':'ge','external_id':'external_id','pp':'pp'};var amp_for_pixel={};if(amp_cc){for(var amp_key in a.p2sAmp){if(amp_key.toString().trim().toLowerCase()==='pixels'){if(Array.isArray(a.p2sAmp[amp_key])){for(var apx_key in a.p2sAmp[amp_key]){if(p2sIsNumeric(a.p2sAmp[amp_key][apx_key])){if(platform_data.fb.pixels.indexOf(a.p2sAmp[amp_key][apx_key].toString().trim().toLowerCase())===-1){platform_data.fb.pixels.push(a.p2sAmp[amp_key][apx_key].toString().trim().toLowerCase());a.__p2s_pixels['fb'].push(a.p2sAmp[amp_key][apx_key].toString().trim().toLowerCase());}}}}}else if(amp_key.toString().trim().toLowerCase()==='catcher'){if(Array.isArray(a.p2sAmp[amp_key])){if(a.p2sAmp[amp_key].indexOf('gecl')>-1){let geQStr=p2sGQ('gclid');if(!p2sGC('_p2s_gcl')||geQStr!==''){gclid_params=[geQStr,p2sGC('_gcl_aw'),p2sGC('_gcl_dc')];gclid=false;for(gcii in gclid_params){gcldm=decodeURIComponent(gclid_params[gcii]).match(/(Cj[0-9A-Za-z_-]+)/);if(gcldm){gclid=gcldm[0];break;}}
if(gclid){p2sSC('_p2s_gcl',gclid,30);}}}
if(a.p2sAmp[amp_key].indexOf('utm')>-1&&typeof(window.localStorage)!=='undefined'){let geQS_us=p2sGQ('utm_source');let geQS_um=p2sGQ('utm_medium');let geQS_uc=p2sGQ('utm_content');if(geQS_us){p2sSetItem('_ge_us',geQS_us,86400*30);}
if(geQS_um){p2sSetItem('_ge_um',geQS_um,86400*30);}
if(geQS_uc){p2sSetItem('_ge_uc',geQS_uc,86400*30);}
let ge_us=geQS_us||p2sGetItem('_ge_us');let ge_um=geQS_um||p2sGetItem('_ge_um');let ge_uc=geQS_uc||p2sGetItem('_ge_uc');if(ge_us){p['ge_us']=ge_us;}
if(ge_um){p['ge_um']=ge_um;}
if(ge_uc){p['ge_uc']=ge_uc;}}
if(a.p2sAmp[amp_key].indexOf('fbcl')>-1){if(!p2sGC('_fbc')){var fbclid=p2sGQ('fbclid');if(fbclid){var fbcValue='fb.1'+'.'+Date.now()+'.'+fbclid;p2sSC('_fbc',fbcValue,30);}}}if(a.p2sAmp[amp_key].indexOf('ttcl')>-1){var ttclid=p2sGQ('ttclid');if(ttclid){ttclid=ttclid.replace(/^([^_]+)_([^_]+)_([^_]+)_/,'$1.$2.$3.');p2sSC('ttclid',ttclid,30);}}
if(a.p2sAmp[amp_key].indexOf('imcl')>-1){var im_ref=p2sGQ('im_ref');if(im_ref){p2sSC('_p2s_im_ref',im_ref,90);}}
if(a.p2sAmp[amp_key].indexOf('sccl')>-1){var sccid=p2sGQ('sccid');if(sccid){p2sSC('_p2s_sccid',sccid,90);}}}}else if(amp_key_match.hasOwnProperty(amp_key)){if(a.p2sAmp[amp_key]!=='eb045d78d273107348b0300c01d29b7552d622abbc6faf81b3ec55359aa9950c'){if((amp_key==='external_id')&&!a.p2sAmp[amp_key]){a.p2sAmp[amp_key]=uvi;}
amp_for_pixel[amp_key_match[amp_key]]=a.p2sAmp[amp_key];}}}}
if(typeof a.p2sAmp['external_id']=="undefined"){a.p2sAmp['external_id']=uvi;}
if(platform_data.fb.pixels.length>0&&typeof(fbq)!='undefined'){if(et.toLowerCase()=='init'){if(!amp_cc){fbq('consent','revoke');}
fbq.disablePushState=true;}
for(pi in platform_data.fb.pixels){if(pi>=0&&pi<100){fbq('init',platform_data.fb.pixels[pi],amp_for_pixel);}}}
if(platform_data.tt.pixels.length>0&&typeof(a.ttq)!='undefined'&&a.ttq){p2sMapCall('tt',et,amp_for_pixel,uvi);}
if(platform_data.sc.pixels.length>0){p2sMapCall('sc',et,amp_for_pixel,uvi);}
if(platform_data.pn.pixels.length>0){p2sMapCall('pn',et,amp_for_pixel,uvi);}
if(platform_data.al.pixels.length>0){p2sMapCall('al',et,amp_for_pixel,uvi);}
if(platform_data.rd.pixels.length>0){p2sMapCall('rd',et,amp_for_pixel,uvi);}
if(platform_data.tw.pixels.length>0){p2sMapCall('tw',et,amp_for_pixel,uvi);}
if(platform_data.ge.pixels.length>0){amp_for_ge=amp_for_pixel;gclid_params=[p2sGQ('gclid'),p2sGC('_gcl_aw'),p2sGC('_gcl_dc')];for(gcii in gclid_params){gcldm=decodeURIComponent(gclid_params[gcii]).match(/(Cj[0-9A-Za-z_-]+)/);if(gcldm){amp_for_ge.gclid=gcldm[0];break;}}
p2sMapCall('ge',et,amp_for_pixel,uvi);}
return;}
if(et=='test'){p2sSC('p2s_test_event_code',p.test_event_code);p2sSC('pixel_debug',true);return;}
if(!p){p={value:0,currency:p2sGC('currency')||t_currency};}
var amp=a.p2sAmp||{};if(et==='setTrigger'){if(window.dataLayer){var isConditionMet=false;function checkConditions(){if(p2s_test_event_code){console.log('checkConditions');}
if(p.variable){try{if(eval(p.variable)){isConditionMet=true;return true;}}catch(e){console.warn("Error accessing variable:",p.variable,e);}}
if(p.localStorageVar){try{if(localStorage.getItem(p.localStorageVar)){isConditionMet=true;return true;}}catch(e){console.warn("Error accessing LocalStorage variable:",p.localStorageVar,e);}}
if(p.cookieVar){try{if(p2sGC(p.cookieVar)){isConditionMet=true;return true;}}catch(e){console.warn("Error accessing cookie variable:",p.cookieVar,e);}}
if(p.type=='onAmpReady'&&p.fields){for(var fld in p.fields){if(amp.hasOwnProperty(p.fields[fld])){isConditionMet=true;return true;}}}
return false;}
function pushEventAndClearTimers(){dataLayer.push({'event':p.callback});clearInterval(checkInterval);clearTimeout(failSafeTimer);if(p2s_test_event_code){console.log('pushEventAndClearTimers:',p.callback);}}
if(checkConditions()){pushEventAndClearTimers();return;}
var checkInterval=setInterval(function(){if(checkConditions()){pushEventAndClearTimers();}},p.interval||500);var failSafeTimer=setTimeout(function(){if(!isConditionMet){pushEventAndClearTimers();}},p.timeout||1000);}
return;}
if(p2s_test_event_code!=''){p.test_event_code=p2s_test_event_code;}
if(typeof(a.__fbq_dpo)!='undefined'){p.dpo=a.__fbq_dpo;}
if(!eid){eid=Date.now()+"-"+uvi+"-"+Math.round((Math.random()*1000000),0);}
if(platform_data.fb.pixels.length>0&&typeof(fbq)!='undefined'){for(var pi in platform_data.fb.pixels){if(pi>=0&&pi<100){fbq(tcmd,platform_data.fb.pixels[pi],et,p,{eventID:eid});}}}
if(amp_cc){amp.fbp=p2sGC('_fbp');amp.fbc=p2sGC('_fbc');}else{sst=false;}
p.url=window.location.href;p.url=p.url.split("?")[0].split("#")[0];if(sst){if(amp_cc){var _ttp=p2sGC('_ttp');if(_ttp){p.ttp=_ttp;}
var _scid=p2sGC('_scid');if(_scid){p.uuid_c1=_scid;}
var _ttc=p2sGQ('ttclid');if(_ttc){_ttc=_ttc.replace(/^([^_]+)_([^_]+)_([^_]+)_/,'$1.$2.$3.');p2sSC('ttclid',_ttc,30);}else{_ttc=p2sGC('ttclid');}
if(_ttc){p.ttc=_ttc;}
var _rdt_cid=p2sGQ('rdt_cid');if(_rdt_cid){p2sSC('rdt_cid',_rdt_cid,30);}else{_rdt_cid=p2sGC('rdt_cid');}
if(_rdt_cid){p.rdt_cid=_rdt_cid;}
var _rdt_uuid=p2sGQ('_rdt_uuid');if(_rdt_uuid){p2sSC('_rdt_uuid',_rdt_uuid,30);}else{_rdt_uuid=p2sGC('_rdt_uuid');}
if(_rdt_uuid){p._rdt_uuid=_rdt_uuid;}
var _twc=p2sGC('twclid');if(_twc){p.twc=_twc;}
var _epik=p2sGC('_epik');if(_epik){p._epik=_epik;}
var _axwrt=p2sGC('_axwrt');if(_axwrt){p._axwrt=_axwrt;}
var _p2s_gcl=p2sGC('_p2s_gcl');if(_p2s_gcl){p.gclid=_p2s_gcl;}
var _p2s_sccid=p2sGQ('sccid');if(!_p2s_sccid){_p2s_sccid=p2sGC('_p2s_sccid');}
if(_p2s_sccid){p.sc_click_id=_p2s_sccid;}
var _p2s_im_ref=p2sGQ('im_ref');if(!_p2s_im_ref){_p2s_im_ref=p2sGC('_p2s_im_ref');}
if(_p2s_im_ref){p.im_ref=_p2s_im_ref;}}
if(typeof(amp.catcher)!='undefined'){delete amp.catcher;}
if(typeof(amp.pixels)!='undefined'){delete amp.pixels;}
var request=false;if(window.XMLHttpRequest){request=new XMLHttpRequest();}else if(window.ActiveXObject){request=new ActiveXObject('Microsoft.XMLHTTP');}
if(p2s_test_event_code!=''){console.log(p);console.log(amp);}
if(request){var noWocNeeded=['sd','gd','attr'];var woc=noWocNeeded.indexOf(et)!==-1?'':'woc=true&';var version='v=3.'+Math.floor(Math.random()*10000000);request.open('POST',t_domain+'/'+t_endpoint+'/?'+woc+version,true);request.onreadystatechange=function(){if(request.readyState==4&&request.status==200){try{var jsonResponse=JSON.parse(request.responseText);if(typeof window.p2sEventResult==='function'){window.p2sEventResult(jsonResponse);}
if(p2s_test_event_code!=''){console.log(jsonResponse);}}catch(e){console.log("Err:",request.responseText,e.toString());}}}
request.setRequestHeader("Content-type","application/x-www-form-urlencoded");request.send("eid="+encodeURIComponent(eid)+"&et="+encodeURIComponent(et)+"&p="+encodeURIComponent(JSON.stringify(p))+"&amp="+encodeURIComponent(JSON.stringify(amp))+"&std="+(std?'1':0)+"&cc="+(amp_cc?'1':'0')+"&token="+encodeURIComponent(t_token));}}
if(amp_cc){if(platform_data.tt.pixels.length>0&&typeof(a.ttq)!='undefined'&&a.ttq){p2sMapCall('tt',et,p,eid);}
if(platform_data.sc.pixels.length>0&&typeof(a.snaptr)!='undefined'&&a.snaptr){p2sMapCall('sc',et,p,eid);}
if(platform_data.pn.pixels.length>0&&typeof(a.pintrk)!='undefined'&&a.pintrk){p2sMapCall('pn',et,p,eid);}
if(platform_data.al.pixels.length>0&&typeof(a.axon)!='undefined'&&a.axon){p2sMapCall('al',et,p,eid);}
if(platform_data.rd.pixels.length>0&&typeof(a.rdt)!='undefined'&&a.rdt){p2sMapCall('rd',et,p,eid);}
if(platform_data.tw.pixels.length>0&&typeof(a.twq)!='undefined'&&a.twq){p2sMapCall('tw',et,p,eid);}
if(platform_data.ge.pixels.length>0&&typeof(a.gtag)!='undefined'&&a.gtag){p2sMapCall('ge',et,p,eid);}}
a._last_et=et;a._last_p=p;}
if((p2sq.status||'uninitialized')!='initialized'){if(p2sq.length>0){for(p2id in p2sq){if(p2sq[p2id].et||false){if(p2sq[p2id].et.toLowerCase()=='init'){var fso=p2sq.splice(p2id,1)[0];p2sc(fso.et,fso.p,fso.eid||false);}}}}
a.p2sq_history=a.p2sq_history||[];if(t_cc&&!p2sCCC(t_cc)){a.p2sq_history=p2sq.slice();var checkCount=0;var checkCCInterval=setInterval(function(){checkCount++;if(p2sCCC(t_cc)||checkCount>=20){clearInterval(checkCCInterval);while(a.p2sq_history.length){var fso=a.p2sq_history.pop();if(fso.et||false){p2sc(fso.et,fso.p,fso.eid||false);}}}},3000);}
while(p2sq.length){var fso=p2sq.pop();if(fso.et||false){p2sc(fso.et,fso.p,fso.eid||false);}}
a.p2sq={'push':function(o){if(t_cc&&!p2sCCC(t_cc)){a.p2sq_history.push(o);}
p2sc(o.et,o.p,o.eid||false);},'status':'initialized'}}})()})(window,document,location,history);