//15.134.1-es2019 2025-09-25T08:53:15.909Z (04107f7c0fd20)
var CS_CONF={"collectionEnabled":true,"projectId":703,"status":1,"hostnames":["dunelondon.com"],"crossDomainTracking":0,"crossDomainSingleIframeTracking":0,"consentRequired":0,"allowSubdomains":1,"visitorCookieTimeout":34164000000,"sampleRate":100,"replayRecordingRate":100,"validationRate":10,"lastTrackingDraw":1755073044,"trackerDomain":"c.contentsquare.net","recordingDomain":"r.contentsquare.net","useMalkaPipeline":1,"ed":"l.contentsquare.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":1,"autoInsightsEnabled":0,"jsErrorsEnabled":0,"customErrorsEnabled":0,"jsCustomErrorsEnabled":0,"apiErrorsEnabled":0,"customHashIdEnabled":0,"recordingEncryptionEnabled":0,"recordingEncryptionPublicKey":null,"recordingEncryptionPublicKeyId":0,"secureCookiesEnabled":0,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":null,"dynamicIdRegex":null,"whitelistedAttributes":[],"replayRecordingUnmaskedUrlRegex":"","replayRecordingUnmaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegex":"","anonymisationMethod":null,"tagDeploymentMode":"CONTENTSQUARE","experimental":null,"iframesTracking":0,"textVisibilityEnabled":0,"cookielessTrackingEnabled":0,"malkaUrlEnabled":0,"malkaEtrEnabled":0,"pathComputationRules":{"reliableSelectors":[],"uniqueAttributes":[],"uniqueCssSelectors":[]},"asyncSerializerEnabled":1,"pendingInactivityTimeout":5000,"accessibilityEnabled":0,"uxaDomain":"app.contentsquare.com","webviewsTrackingEnabled":0,"useStaticResourceManager":1,"performanceTimingOptions":{"withResource":false,"withNavigation":false},"replayConsentRequiredForSession":0,"eventsApiEnabled":0,"clickedElementTextEnabled":0,"collectHierarchy":1,"collectSubmit":1,"collectTargetText":0,"displayAdOptions":null,"taskSchedulerOptions":{"enabled":1},"malkaQuotaServiceDomain":"q-aeu1.contentsquare.net","malkaRecordingDomain":"k-aeu1.contentsquare.net","staticResourceManagerDomain":"srm.ba.contentsquare.net","voc":{"siteId":null,"enabled":0},"implementations":[{"template":{"name":"CustomError","args":{"message":"${element.textContent}","attributes":[{"key":"selector","value":"invalid feedback"}]}},"triggers":[{"name":"ElementVisibility","args":{"selector":".invalid-feedback"}}]},{"template":{"name":"CustomError","args":{"message":"${element.textContent}","attributes":[{"key":"selector","value":".error-msg"}]}},"triggers":[{"name":"ElementVisibility","args":{"selector":".error-msg"}}]},{"template":{"name":"CustomError","args":{"message":"${element.textContent}","attributes":[{"key":"selector","value":"payment error msg"}]}},"triggers":[{"name":"ElementVisibility","args":{"selector":".global-payment-error-msg, .global-generic-payment-error-msg"}}]},{"template":{"name":"PiiMasking","args":{"cssSelectors":["[class='pcaautocomplete pcatext']"],"attributes":[]}},"triggers":[{"name":"BeforePageView","args":{"pageviewTypes":["natural","artificial"]},"condition":{"operator":"AND","args":[{"operator":"contains","args":["${window.location.href}","checkout"]}]}}]}],"anonymizeDigits":null,"dynamicConfDomain":"t.contentsquare.net/settings","tagVerificationDomain":"tcvsapi.contentsquare.com","paProxyDomainUri":"api.us.hp.contentsquare.net","heapEnvironment":{"env_id":"4025401231","heap_tag_status":"cs_crosswrites_heap","heap_storage_location":null},"identityEncryptionKey":"MIIBojANBgkqhkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAlL8xaiIUlNZLxrm8XMtTLHMbemquLst2omH6itNokm81n/P/KUJdaAJGopwXDj6TL9zrhnJWrxnyVGI6jEbOSw0RMaLahwVVhwtIuTFtcx6VlsKYEZqn+QBTARMiGR46Z0j6/5+w2x439lFueWn+VADuUBWQ7b+wOozD/SBrUTx2lgv0npyv29OLJvLkeCabUWRNBNErx7R+CZ7LUMt74y2xTuYkDR/hEoApBA7O9WGRrCQ97+Jc74NC84Fmh/VkeyBozV8XHKsT7EUxyPFP61cTh6XUP7F+5hPkE+KlprTkwTGx6P3W4aiUQYwD/klFmSJZ0tPYDUNjSYPOuco0sY8rhihf0ZpfvaMog+JMbieuBMG+xG6+wFifZEh9cXwTVbtIuaKMI7unbgiqJrgL15XzHWEeRluWUEcgBPTACVfQbEq8JYyfRyKEzmGyYcsv/cdFx0FegSRI1hdg516pSKpEefWCUcGEvtCAN/V8aTJWam/Jyci9NFfsuNMfd+lNAgMBAAE="};
var CS_INTEGRATIONS_CONF = {"bloomreach":{},"google-analytics-4":{"settings":{"timeout":2000}}};
/* integration-bloomreach 3.3.1 */
(()=>{"use strict";function e(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold"),console.log(e))}}function n(e,n,t){if((t=t||window)&&n&&e){let o=!1,i=t[e];i?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return i},set:function(e){i=e,o||(o=!0,n())}})}}const t=JSON.parse('{"Q":"Bloomreach - AB Testing","M":"AB_BR_"}'),o=function(n){let t,o,i,c;if(e(function(){const e=n.name;t=n.version;const r=e.replace("@contentsquare/integration-","");o=r+"-"+t;let a="-contentsquare";c=new RegExp(a+"$").test(r),i=r.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),c||(a="-cap",c=new RegExp(a+"$").test(r),i=r.replace(/-cap([^-cap]*)$/,"$1"))},"Shared-Function-readPackageJSON"),c)return{snippetBuildName:o,parameterName:i,snippetVersion:t}}(JSON.parse('{"name":"@contentsquare/integration-bloomreach-contentsquare","version":"3.3.1","scripts":{"build:snippet":"npx webpack"}}')),i=o.parameterName,c=o.snippetBuildName,r=o.snippetVersion;e(function(){const o=t.Q,a=t.M;var u,s;function l(e,n){var t,o;(function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])})(e=a+e,n),function(e,n,t){(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(t?"warn"===t&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color:rgb(255, 86, 2); font-weight: bold"):console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold"))}(c,(t=e,o=n,document.getElementById("csKey")&&document.getElementById("csValue")&&(document.getElementById("csKey").textContent=t,document.getElementById("csValue").textContent=o),`Dynamic variable with ${t} and value ${o} sent`))}u=o,s=r,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(u+" - v"+s);const d=function(e){function n(e){return"object"==typeof e&&null!==e}if(n(window.CS_INTEGRATIONS_CONF)&&n(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e].customObjectName}(i),w=d?d.trim():"bre.segments.ab_segments",f=[];function g(){setTimeout(function(){e(function(){const e=function(e,n){const t=(n=(n=n.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split(".");for(let n=0,o=t.length;n<o;++n){const o=t[n];if(!(o in e))return;e=e[o]}return e}(window,w);if(e){const t=Object.keys(e);if(n=t,Array.isArray(n))for(let n=0;n<t.length;n++){const o=t[n],i=e[t[n]];o&&i&&-1===f.indexOf(o+"~~~"+i)&&(f.push(o+"~~~"+i),l(o,i))}}var n},c)},500)}var p;p=function(){!function(e,t,o){o=o||window;const i=e.split(".");if(1==i.length)n(e,t,o);else{let e=o,c=0;const r=function(){e=c>0?e[i[c-1]]:window,c++,c>=i.length?n(i[c-1],t,e):n(i[c-1],r,e)};r()}}(w,g)},window._uxa=window._uxa||[],window._uxa.push(["afterPageView",function(e){p()}])},c)})();
/* integration-google-analytics-4 0.14.1 */
!function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e){e.exports=JSON.parse('{"displayName":"Google Analytics 4","dvarPrefix":"AN_GA_"}')},function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-google-analytics-4-contentsquare","version":"0.14.1","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function o(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e.message]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold")}}function r(e,n){function t(e){return"object"==typeof e&&null!==e}if(t(window.CS_INTEGRATIONS_CONF)&&t(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][n]}t.r(n);let i,a=1e3,u=10;function c(e,n,t,o,l,s){var d;n&&t&&(i||(i=r(e,"timingSettings"),"object"==typeof(d=i)&&null!==d&&Object.keys(d).length&&(a=i.doOnlyWhenInterval,u=i.doOnlyWhenTimes)),void 0===(l=l)&&(l=a),void 0===(s=s)&&(s=u),--s<0?"function"==typeof o&&o():t()?n():setTimeout((function(){c(e,n,t,o,l,s)}),l))}function l(e,n){!!(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold")}var s=t(0);const d=function(e){let n,t,r,i;if(o((function(){const o=e.name;n=e.version;const a=o.replace("@contentsquare/integration-","");t=a+"-"+n;let u="-contentsquare";i=new RegExp(u+"$").test(a),r=a.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),i||(u="-cap",i=new RegExp(u+"$").test(a),r=a.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),i)return{snippetBuildName:t,parameterName:r,snippetVersion:n}}(t(1)),f=d.parameterName,p=d.snippetBuildName,g=d.snippetVersion;o((function(){const e=s.displayName,n=s.dvarPrefix;var t,o;t=e,o=g,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(t+" - v"+o);const i=r(f,"logSettings");var a;const u=(a=i,Array.isArray(a)?i:[]).includes("enableLogsVID");function d(e,t){(function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])})(e=n+e,t),l(p,`Dynamic variable with ${e} and value ${t} sent`)}function b(){var e,n;e="gaGlobal.vid doesn't exist",n=p,window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION LOG ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold")}c(f,(function(){const e=window.gaGlobal.vid;e?d("ClientID",e):b()}),(function(){return!(!window.gaGlobal||!gaGlobal.vid)}),(function(){u&&b()}))}),p)}]);
(()=>{var yu=Object.defineProperty;var Eu=(s,r,t)=>r in s?yu(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t;var ye=(s,r,t)=>Eu(s,typeof r!="symbol"?r+"":r,t);var he={};he.d=(s,r)=>{for(var t in r)he.o(r,t)&&!he.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:r[t]})};he.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();he.o=(s,r)=>Object.prototype.hasOwnProperty.call(s,r);he.r=s=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var Fn={};he.r(Fn);he.d(Fn,{getRequestParameters:()=>Am});function vs(s,r){let t;return window.Zone&&typeof window.Zone.__symbol__=="function"&&(t=s[window.Zone.__symbol__(r)]),t!=null?t:s[r]}function pt(s){return K(s)&&(typeof s=="number"||s instanceof Number)&&!isNaN(s)}function Bs(s){return s===parseInt(s,10)}function R(s){return K(s)&&(typeof s=="string"||s instanceof csString)}function ir(s){return typeof s=="boolean"}function ys(s){return typeof s=="object"}function K(s){return typeof s!="undefined"}function ut(s){return K(s)&&s!==null}function W(s){return typeof s=="object"&&s!==null}function Su(s,r,t){return Bs(s)&&s>=r&&s<=t}function pn(s){for(let r in s)return!1;return!0}function ue(s){return typeof s=="function"}function Ie(s){return s instanceof Element}function Pe(s){return s instanceof Error}function fn(s){let r=s.length;for(let t=0;t<r;t++)switch(csString.prototype.charCodeAt.call(s,t)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0}var _i=typeof window=="undefined";function vu(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof he.g!="undefined"?he.g:typeof process!="undefined"?process:Function("return this")()}var tt=vu();var ht=(()=>{let s;return function(r){r.debug="debug",r.warn="warn",r.implementation="implementation",r.error="error",r.critical="critical"}(s||(s={})),s})(),Vr={[ht.debug]:0,[ht.warn]:1,[ht.implementation]:1,[ht.error]:2,[ht.critical]:3},et={debug(...s){},warn(...s){},implementation(...s){},error(...s){},critical(...s){},isPerfLoggingActive(){return!1}};function _u(s){et=s}var N=s=>(r,t,e)=>{let i=(t==null?void 0:t.toString())||"",n=s||`${r.constructor&&r.constructor.name}.${i}`;if(e){let o=e.value;e.value=function(...c){return rs(n,o.bind(this))(...c)}}};function rs(s,r){return function(...t){try{let e=r.apply(this,t);return K(tt.Promise)&&e instanceof tt.Promise?e.then(i=>i,i=>et.error(Pe(i)?i:new Error(i),s)):e}catch(e){try{et.error(Pe(e)?e:new Error(e),s)}catch{}}}}function Z(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}function yr(s){let r=new ArrayBuffer(s.length),t=new Uint8Array(r);for(let e=0,i=s.length;e<i;e+=1)t[e]=csString.prototype.charCodeAt.call(s,e);return r}function Xo(s){let r=new Uint8Array(s),t="";for(let e=0;e<r.byteLength;e+=1)t+=csString.fromCodePoint(r[e]);return t}function wu(s){return new Promise((r,t)=>{let e=new csFileReader;e.onload=i=>{var n,o;if(typeof((n=i.target)===null||n===void 0?void 0:n.result)!="string")return t("Unexpected output: "+((o=i.target)===null||o===void 0?void 0:o.result));r(csString.prototype.split.call(i.target.result,",")[1])},e.readAsDataURL(new Blob([s]))})}function $n(s){let r=self.atob(s);return yr(r)}function rr(s){let r=csArray.from(new Uint8Array(s));return csArray.prototype.join.call(csArray.prototype.map.call(r,t=>csString.prototype.padStart.call(t.toString(16),2,"0")),"")}function Ko(s){let r=csString.prototype.indexOf.call(s,";base64,")!==-1,t=csString.prototype.indexOf.call(s,","),e=r?[csString.prototype.substring.call(s,0,t-7),csString.prototype.substring.call(s,t+1)]:[csString.prototype.substring.call(s,0,t),csString.prototype.substring.call(s,t+1)];if(!r&&/^%3Csvg/i.test(e[1]))try{e[1]=decodeURIComponent(e[1])}catch(o){et.warn(`${o}, calling decodeURIComponent on: ${e[1]}`)}let n=r?$n(e[1]):yr(e[1]);return new Blob([n],{type:csString.prototype.replace.call(e[0],"data:","")})}var Ec=typeof performance!="undefined"&&!!performance.now,Jo=Ec?()=>performance.now():()=>csDate.now(),Tu=(()=>{var s,r;return Ec?(r=(s=performance.timing)===null||s===void 0?void 0:s.navigationStart)!==null&&r!==void 0?r:Math.floor(performance.timeOrigin):0})(),zn=34164e6,M={now(){return Math.round(Jo()+Tu)},elapsed(){return Jo()}};function Qo(){return Math.floor(M.now()/1e3)}function Sc(){return typeof window.Promise=="function"}function Gn(){var s;return typeof crypto!="undefined"&&ue((s=crypto.subtle)===null||s===void 0?void 0:s.digest)}function Zo(){var s,r;return typeof((s=window.navigation)===null||s===void 0?void 0:s.addEventListener)=="function"&&typeof((r=window.navigation)===null||r===void 0?void 0:r.removeEventListener)=="function"}function Pt(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function Ws(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}async function ta(s,r){return rr(await window.crypto.subtle.digest(s,r))}var bu=Number.MAX_SAFE_INTEGER||9007199254740991,Es={percentage(){return Math.floor(Math.random()*1e4)/100},boolean(s){return this.percentage()<s},integer(s=bu){return Math.floor(Math.random()*s)}};function Fs(s,r){let t,e,i,n,o,c=null,l=E=>{let p=M.elapsed();if(!E&&c!==null){let m=r-(p-c);if(m>=1){i=tt.csSetTimeout(l,m);return}}let y=p-n;i=null,c=null,n=null,o=s.apply(t,[y,...e])},u=function(){if(t=this,e=arguments,n){c=M.elapsed();return}return n=M.elapsed(),i=tt.csSetTimeout(l,r),o};return u.flushPending=()=>{i&&(tt.csClearTimeout(i),l(!0))},u.cancel=()=>{c=null,n=null,i&&(tt.csClearTimeout(i),i=null)},u}function Au(s=0){return(r,t,e)=>{e.value=Fs(e.value,s)}}var fi=(()=>{class s{static setGlobalService(t){s.globalService=t}constructor(t){this.name=t,this.values={}}reset(){this.values={}}flush(){if(!s.globalService)return!1;let t=this.values,e=Object.keys(t);if(!e.length)return!1;let i=csArray.prototype.map.call(e,n=>({name:this.name,parameter:n,value:Math.round(t[n])}));return s.globalService.push(i),this.reset(),i.length>0}}return s.globalService=null,Z([N()],s.prototype,"flush",null),s})(),At=(()=>{class s extends fi{constructor(t,e=100){super(t),this.ay=e,this.values={},e&&(this.debouncedFlush=Fs(()=>this.flush(),this.ay))}count(t,e=1){fi.globalService&&(this.values[t]=(this.values[t]||0)+e,this.debouncedFlush())}}return s})(),ea=(()=>{class s extends fi{constructor(){super(...arguments),this.values={average:0,count:0,max:0,total:0}}get average(){return this.values.average}get count(){return this.values.count}get max(){return this.values.max}get total(){return this.values.total}push(t){this.values.count++,this.values.total+=t,this.values.max=Math.max(this.values.max,t),this.values.average=this.values.total/this.values.count}reset(){this.values={count:0,total:0,max:0,average:0}}}return s})(),Ru=(()=>{class s extends fi{add(t,e){var i,n,o,c,l,u,E;let p=y=>this.values[`${t}.${y}`];(i=(c=this.values)[l=`${t}.count`])!==null&&i!==void 0||(c[l]=0),(n=(u=this.values)[E=`${t}.total`])!==null&&n!==void 0||(u[E]=0),this.values[`${t}.count`]++,this.values[`${t}.total`]+=e,this.values[`${t}.max`]=Math.max((o=p("max"))!==null&&o!==void 0?o:0,e),this.values[`${t}.average`]=p("total")/p("count")}}return s})(),q={counters:{commandsFromIntegrations:new At("commands-from-integrations"),commandsFromCSTC:new At("commands-from-cstc"),commandsFromIframe:new At("commands-from-iframe"),commandApplied:new At("command-applied"),commandError:new At("command-error"),commandMisuse:new At("command-misuse"),CSTCSnippetUsed:new At("cstc-snippet-used"),redactedPII:new At("redacted-pii"),pageAnonymisation:new At("page-anonymisation"),patchedNativeFunctions:new At("patched-native-functions"),pureWindowState:new At("pure-window-state"),sensitiveElements:new At("sensitive-elements"),cspErrors:new At("csp-errors"),networkRequests:new At("network-requests"),webVitalsErrors:new At("web-vitals-errors"),trackedFeatures:new At("tracked-features"),longTasks:new ea("longTasks"),tasks:new ea("tasks"),errors:new At("errors"),methodPerformance:new Ru("perf")},setService(s){fi.setGlobalService(s)}},wi=(()=>{class s{constructor(){this.go=0}get length(){return this.go}get isEmpty(){return!this.ks}pushAll(t){for(let e=0;e<t.length;e++)this.push(t[e])}push(t){this.go++,this.Dr?this.Dr=this.Dr[1]=[t,void 0]:this.Dr=this.ks=[t,void 0]}pop(){if(!this.ks)return null;this.go--;let t=this.ks[0];return this.ks=this.ks[1],this.ks||(this.Dr=void 0),t}forEach(t){let e=this.ks;for(;e!=null&&e.length;)t(e[0]),e=e[1]}clear(){this.go=0,this.ks=this.Dr=void 0}}return s})(),gn=0,qn=s=>{gn++,csQueueMicrotask(()=>_s(()=>{try{s()}finally{gn--}},de.MicroTask))},nr=new wi,or=new wi;function jt(s,r="high"){nr.isEmpty&&or.isEmpty&&vc(Cu),r==="high"?or.push(sa(s)):nr.push(sa(s))}function vc(s,r=10){r===0?qn(s):csQueueMicrotask(()=>vc(s,r-1))}function Cu(){for(;!or.isEmpty;)or.pop()();for(;!nr.isEmpty;)nr.pop()()}async function _c(s=1){for(let r=0;r<s;r++)await new Promise(t=>jt(t))}function sa(s){return function(){try{s.apply(window,arguments)}catch(r){et.critical(r)}}}var Qi="null",Qe=null,wc=[],Iu=()=>{var s;return _i||!!(!((s=document.body)===null||s===void 0)&&s.getAttribute("data-cs-tag-extension"))};!_i&&Iu()&&(window._uxa?_uxa.push(["debugEvents",!0]):window._uxa=[["debugEvents",!0]],Qe=new BroadcastChannel("cs-tag"),document.addEventListener("cs.tracking.recordingEvent",s=>{mn({type:"UXA_EVENT",event:s.detail})}),Qe.addEventListener("message",s=>{if(s.data.type==="CONNECT"){if(s.data.sessionId===Qi)return;Qi=s.data.sessionId,csArray.prototype.forEach.call(wc,r=>r()),Qe==null||Qe.postMessage({type:"CONNECTED",sessionId:Qi})}}));function Pu(s){_i||(Qi!==null&&csSetTimeout(s),csSetTimeout(()=>csArray.prototype.push.call(wc,s)))}function mn(s){Qe==null||Qe.postMessage(s)}function gi(s){var r;let t=(r=s.length)!==null&&r!==void 0?r:0,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=s[i];return e}function Re(s,r){let t=s.length,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=r(s[i]);return e}function Ou(s,r,t){let e=[],i=0;for(let n=0;n<s.length;n+=1){let o=r(s[n]);for(let c=0;c<o.length;c++)t(o[c],i++)}return e}function Wn(s,r){let t=[];return Ou(s,r,e=>csArray.prototype.push.call(t,e)),t}function X(s,r){if(Nu(s)){let t=s.length;for(let e=0;e<t;e++)r(s[e],e)}else{let t=0,e=s.next();for(;!e.done;)r(e.value,t++),e=s.next()}}function Nu(s){return s.length>=0}function Ae(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return s[e]}function Tc(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return!0;return!1}function bc(s,r){let t=s.length;for(let e=0;e<t;e++)if(!r(s[e],e))return!1;return!0}function ar(s,r){let t=s.length,e=[];for(let i=0;i<t;i+=1){let n=s[i];r(n)&&csArray.prototype.push.call(e,n)}return e}function Mu(s,r,t){let e=s.length+r.length+((t==null?void 0:t.length)||0),i=new csArray(e),n=0;for(let o=0;o<s.length;o++)i[n++]=s[o];for(let o=0;o<r.length;o++)i[n++]=r[o];if(!t)return i;for(let o=0;o<t.length;o++)i[n++]=t[o];return i}function ia(s,r){for(let t=0;t<s.length;t++)csArray.prototype.push.call(r,s[t])}function ns(s){let r=s instanceof Map,t=[];return s.forEach((e,i)=>csArray.prototype.push.call(t,r?[i,e]:e)),t}var Ti=(()=>{class s{constructor(t,e=""){this.name=t,this.format=e}}return s})(),Ee=(()=>{class s extends Ti{constructor(t){super(t,"Value: {count}"),this.count=0}increase(t=1){this.count+=t}decrease(){this.count>0&&this.count--}clear(){this.count=0}getData(){return{count:this.count}}}return s})();var ra=(()=>{class s extends Ti{constructor(t){super(t,"Living intances: {instances}<br/>Added: {added}<br/>Removed: {removed}"),this.added=0,this.removed=0}get value(){return this.added-this.removed}increase(){this.added++}decrease(){this.removed++}getData(){return{added:this.added,removed:this.removed,instances:this.added-this.removed}}}return s})(),Se=(()=>{class s extends Ti{constructor(t){super(t,"Count: {count}<br/>Average: {average}ms<br/>Max: {max}ms<br/>Total: {total}ms"),this.total=0,this.count=0,this.max=0}get average(){return this.count?this.total/this.count:0}elapsed(t){return this.count++,this.max=Math.max(this.max,t),this.total+=t,t}measure(t){let e=M.elapsed();t(),this.count++;let i=M.elapsed()-e;return this.max=Math.max(this.max,i),this.total+=i,i}asyncMeasure(){let t=M.elapsed();return()=>{this.count++;let e=M.elapsed()-t;return this.max=Math.max(this.max,e),this.total+=e,e}}getData(){return{total:this.total,count:this.count,average:this.average,max:this.max}}}return s})(),ku=(()=>{class s extends Ti{constructor(){super("INP","Value: {value}")}getData(){return{value:mt.tasks.eventListener.max}}}return s})(),mt={general:{category:"General",nbEvents:new Ee("Nb of Events"),pendingTasks:new Ee("Pending Tasks"),pendingEvents:new Ee("Pending Tasks"),nbOfMutationObservers:new ra("Nb of Mutation Observers"),inp:new ku},mutations:{category:"Mutations",initialDOM:new Se("Initial DOM"),pendingMutations:new Ee("Nb of Mutations scheduled"),serializedMutations:new Se("Serialized Mutations"),count:new Ee("Mutation Count"),elementMutationObserved:new ra("Nb of Elements Observed by MutationObserver"),unobserveGarbageCollection:new Se("Unobserve GC")},visibilityObserver:{category:"Visibility Observer",hiddenElements:new Ee("Nb of Hidden Elements "),nbElements:new Ee("Nb of  Elements")},tasks:{category:"Tasks",tasks:new Ee("Tasks"),errors:new Ee("Errors"),timer:new Se("Timers"),microtask:new Se("Microtasks"),mutationObserver:new Se("MutationObserver"),monkeyPatch:new Se("MonkeyPatch"),eventListener:new Se("EventListener"),intersectionObserver:new Se("Intersection")}};function Du(){let s=null;Pu(()=>{let r=n=>Object.keys(n),t=csArray.prototype.map.call(r(mt),n=>mt[n]),e=csArray.prototype.map.call(t,n=>csArray.prototype.filter.call(csArray.prototype.map.call(r(n),o=>n[o]),o=>o instanceof Ti));mn({type:"UXA_PERFORMANCE_COUNTER_SCHEMA",event:csArray.prototype.map.call(t,(n,o)=>({category:n.category,performanceCounters:csArray.prototype.map.call(e[o],c=>({name:c.name,format:c.format}))}))}),!s&&(s=csSetInterval(()=>{_s(()=>{let n=Wn(Re(e,o=>Re(o,c=>c.getData())),o=>o);mn({type:"UXA_PERFORMANCE_COUNTER",event:n})},de.Timer)},1e3))})}var de=(()=>{let s;return function(r){r.Timer="timer",r.MonkeyPatch="monkeyPatch",r.MutationObserver="mutationObserver",r.EventListener="eventListener",r.IntersectionObserver="intersectionObserver",r.MicroTask="microtask"}(s||(s={})),s})(),Kt=null;async function _s(s,r,t=null){if(Kt&&r!==de.MicroTask)return s();t&&(Kt=t),Kt||(Kt={type:r,elapsed:0},mt.tasks.tasks.increase());try{Kt.elapsed+=xu(s)}catch(e){mt.tasks.errors.increase(),et.critical(new Error(`Task error:  ${r}/${s.name}.
${e.message}
${e.stack}`,e),"TASK_ERROR")}finally{gn<=0&&(mt.tasks[Kt.type].elapsed(Kt.elapsed),Kt.elapsed>50?q.counters.longTasks.push(Kt.elapsed):q.counters.tasks.push(Kt.elapsed),Kt=null)}}function xu(s){let r=M.elapsed();return s(),M.elapsed()-r}var Ur,Lu="cs-native-frame";var Fe={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen",RegExp:"csRegExp"}};function Ac(s,r){let t=vs(window,s);return function(e,i){return t(()=>_s(e,r),i)}}window.csSetTimeout=Ac("setTimeout",de.Timer);window.csSetInterval=Ac("setInterval",de.Timer);window.csQueueMicrotask=(Ur=vs(window,"queueMicrotask"))!==null&&Ur!==void 0?Ur:setTimeout;window.csClearTimeout=vs(window,"clearTimeout");window.csClearInterval=vs(window,"clearInterval");window.csFileReader=vs(window,"FileReader");(()=>{var s;let r=0;function t(i){return"cs$Symbol_"+i}function e(i){return t(i)+ ++r}e.for=t,window.csSymbol=(s=window.Symbol)!==null&&s!==void 0?s:e})();function Vu(){let s=document.createElement("iframe");s.id=Lu,s.setAttribute("hidden",""),s.setAttribute("title","Intentionally blank"),s.setAttribute("sandbox","allow-same-origin");let r=document.createElement("cs-native-frame-holder");if(r.setAttribute("hidden",""),document.body.appendChild(r),!!Element.prototype.attachShadow){let e=r.attachShadow({mode:"closed"});return e.innerHTML=s.outerHTML,e.firstElementChild.contentWindow}return r.innerHTML=s.outerHTML,r.firstElementChild.contentWindow}function Uu(s,r){let t,e=s;for(;e&&!(t=Object.getOwnPropertyDescriptor(e,r));)e=Object.getPrototypeOf(e);return t}function ju(s,r,t){let e=Uu(s,r);if(!e)return function(){return this[r]};switch(t){case"get":return e.get;case"set":return e.set;case"value":return e.value}}function Rc(s){var r,t;Object.keys(Fe.constructors).forEach(i=>{window[Fe.constructors[i]]=s[i]instanceof Function&&s[i].prototype==null?s[i].bind(window):s[i]}),Fu(s);let e=s.MutationObserver;("Prototype"in window||Bu())&&(e=(t=(r=vs(window,"MutationObserver"))!==null&&r!==void 0?r:window.WebKitMutationObserver)!==null&&t!==void 0?t:window.MutationObserver),window.csIntersectionObserver=na(window.IntersectionObserver,de.IntersectionObserver),window.csMutationObserver=na(e,de.MutationObserver),Ns("csNode",Fe.nodeProperties,s.Node.prototype,"get"),Ns("csElement",Fe.elementProperties,s.Element.prototype,"get"),Ns("csElement",Fe.elementPropertiesValues,s.Element.prototype,"value",!1),Ns("csHTMLImageElement",Fe.imageProperties,s.HTMLImageElement.prototype,"set"),Ns("csEvent",Fe.eventProperties,s.Event.prototype,"get"),Ns("csNavigator",Fe.navigatorProperties,s.navigator,"value")}function Ns(s,r,t,e,i=!0){r.forEach(n=>{let o=typeof n!="string"&&"binding"in n,c=o?n.propertyName:n;(i||c in t)&&(window[`${s+c}`]=ju(t,c,e),o&&(window[`${s+c}`]=window[`${s+c}`].bind(n.binding)))})}function Yn(s,r){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[s]=r}function Hu(){try{let s=Vu();return s?(window.CSPureWindow=s,Rc(window.CSPureWindow),!0):!1}catch(s){return Yn("Warning",`failed to copy references from pure iframe: ${s.message}`),!1}}if(!Hu())try{Rc(tt)}catch(s){Yn("Critical",`failed to copy references from window: ${s.message}`)}function Bu(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Fu(s){window.csquerySelector={1:s.Element.prototype.querySelector,9:s.Document.prototype.querySelector,11:s.DocumentFragment.prototype.querySelector},window.csquerySelectorAll={1:s.Element.prototype.querySelectorAll,9:s.Document.prototype.querySelectorAll,11:s.DocumentFragment.prototype.querySelectorAll}}function na(s,r){try{let t=function(e,i){return new s((o,c)=>{_s(()=>e(o,c),r)},i)};return t.base=s,t}catch{return Yn("Warning",`failed to extends ${s.name}`),s}}var zt=(()=>{let s;return function(r){r.ELLIPSIS="\u2026";function t(o){return csString.prototype.replace.call(o,/[.*+?^${}()|[\]\\]/g,"\\$&")}function e(o){return csString.prototype.replace.call(o,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}r.escapeInvalidCharacters=e;function i(o,c,l){if("replaceAll"in csString.prototype)return csString.prototype.replaceAll.call(o,c,l);let u=new csRegExp(t(c),"g");return csString.prototype.replace.call(o,u,l)}r.stringReplaceAll=i;function n(o,c,l=""){return o.length<=c?o:csString.prototype.slice.call(o,0,c-l.length)+l}r.truncate=n}(s||(s={})),s})();function yn(s){return zt.escapeInvalidCharacters(csString.prototype.toLowerCase.call(s.localName))}function $u(s){let r=s.getAttribute("id");return r&&zt.escapeInvalidCharacters(r)}function ct(s){return s.nodeType===1}function cr(s){return s.nodeType===3}function zu(s){return s.nodeType===8}function Cc(s){return ct(s)&&s.localName==="link"}function Gu(s){return ct(s)&&s.localName==="source"}function Ic(s){return ct(s)&&s.localName==="a"}function Xn(s){return Cc(s)&&csString.prototype.indexOf.call(s.rel,"stylesheet")!==-1}function qu(s){return ct(s)&&s.localName==="img"}function Er(s){return ct(s)&&s.localName==="style"}function Sr(s){return ct(s)&&s.localName==="input"}function Kn(s){return ct(s)&&s.localName==="textarea"}function vr(s){return ct(s)&&s.localName==="script"}function Wu(s){return ct(s)&&s.localName==="button"}function Ys(s){return ct(s)&&"ownerSVGElement"in s}function Jn(s){return ct(s)&&s.localName==="select"}function Yu(s){return ct(s)&&s.localName==="details"}function Xu(s){return ct(s)&&s.localName==="summary"}function Ku(s){return Ys(s)&&s.localName==="image"}function Ju(s){return Ys(s)&&s.localName==="use"}function Qu(s){return Ys(s)&&s.localName==="feImage"}function Zu(s){switch(s.nodeType){case 9:case 11:return!0;default:return!1}}function td(s){switch(s.nodeType){case 9:case 11:case 1:return!0;default:return!1}}function lr(s){return s.nodeType===9}function mi(s){return Zu(s)&&"host"in s&&"mode"in s}function Pc(s){return ct(s)&&!!csElementshadowRoot.apply(s)&&mi(csElementshadowRoot.apply(s))}var ed=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];function sd(s){return ct(s)&&ut(s.tagName)&&csString.prototype.indexOf.call(s.tagName,"-")>0&&csString.prototype.indexOf.call(s.tagName,":")===-1&&csString.prototype.indexOf.call(s.tagName,'"')===-1&&csString.prototype.indexOf.call(s.tagName,",")===-1&&csArray.prototype.indexOf.call(ed,csString.prototype.toLocaleLowerCase.call(s.tagName))<0}var bi="detached";function Oc(s){let r=s,t=[r];for(;csNodeparentNode.apply(r)!==null;)r=csNodeparentNode.apply(r),csArray.prototype.push.call(t,r);return hr(r)&&csArray.prototype.push.call(t,bi),{ancestors:t,selectionRoot:r}}function id(s){let r=s,t=[r],e=null;for(;csNodeparentNode.apply(r)!==null;)e===null&&Ic(r)&&(e=r),csArray.prototype.push.call(t,csNodeparentNode.apply(r)),r=csNodeparentNode.apply(r);return hr(r)&&csArray.prototype.push.call(t,bi),{firstAnchorParent:e,ancestors:t,selectionRoot:r}}function hr(s){return Ce.isValidElement(s)}var ps=(()=>{var s,r;return(r=(s=tt.Element)===null||s===void 0?void 0:s.prototype)!==null&&r!==void 0?r:{}})(),Gt=ps.matches||ps.matchesSelector||ps.mozMatchesSelector||ps.msMatchesSelector||ps.oMatchesSelector||ps.webkitMatchesSelector,oa=ps.closest,Nc=9;function rd(s,r){return r?csArray.prototype.some.call(r,t=>Gt.call(s,t)):!1}function nd(s,r,t){if(s===bi||s.nodeType===Nc)return 0;let e=t.dynamicElementNameRegex,i=!!(e!=null&&e.test(r.localName)),n=yn(r),o=0,c=r.previousElementSibling;for(;c;)(yn(c)===n||i&&(e!=null&&e.test(c.localName)))&&!rd(c,t.reliableSelectors)&&(o+=1),c=c.previousElementSibling;return o}function od(s,r,t){if(s===bi||s.nodeType===Nc)return 0;let e=0,i=r.previousElementSibling;for(;i;)Gt.call(i,t)&&(e+=1),i=i.previousElementSibling;return e}var ad=[/\d{4}/,/^ember\d+$/],cd="@",Qn="data-cs-override-id",ld="data-cs-dynamic-id";function Mc(s,r,t,e){let i=e.dynamicIdRegex||null,n=e.dynamicElementNameRegex,o=yn(s);if(n&&n.test(s.localName)&&(o=csString.prototype.replace.call(o,n,`$1${cd}`)),dd(s,t)){let y=Zn(s);return{hasUniqueIdentifier:!0,elementSelector:`${o}[${Qn}="${y}"]`}}let c=Sd(s,t,e);if(c.success)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UA[${c.attributeName}="${c.attributeValue}"]`};let l=hd(s,t,e);if(l)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UCS[${l}]`};let u=$u(s);if(fd(s,u,t,i))return{hasUniqueIdentifier:!0,elementSelector:`${o}#${u}`};let E=ud(s,e);if(E){let y=od(r,s,E);return{hasUniqueIdentifier:!1,elementSelector:`${o}[${E}](${y})`}}let p=nd(r,s,e);return{hasUniqueIdentifier:!1,elementSelector:`${o}:eq(${p})`}}function hd(s,r,t){if(t.uniqueCssSelectors){for(let e of t.uniqueCssSelectors)if(Gt.call(s,e)&&Ed(e,r))return e}}function ud(s,r){if(r.reliableSelectors){for(let t of r.reliableSelectors)if(Gt.call(s,t))return t}}function dd(s,r){let t=Zn(s);return t&&csString.prototype.match.call(t,/^[\w-]+$/)&&to(Qn,t,r)}function pd(s){return Zn(s)!==null}function Zn(s){return s.getAttribute(Qn)}function fd(s,r,t,e){return r&&!pd(s)&&!gd(s,r,e)&&yd(r,t)}function gd(s,r,t){return s.hasAttribute(ld)||md(r,t)}function md(s,r){let t=!1;return s&&r&&(t=r.test(s)),s&&(csArray.prototype.some.call(ad,e=>e.test(s))||t)}function yd(s,r){return s&&to("id",s,r)}function to(s,r,t){try{return window.csquerySelectorAll[t.nodeType].call(t,`[${s}="${r}"]`).length===1}catch(e){if(e.name!=="SyntaxError")throw e}return!1}function Ed(s,r){try{return window.csquerySelectorAll[r.nodeType].call(r,s).length===1}catch(t){if(t.name!=="SyntaxError")throw t}return!1}function Sd(s,r,t){if(!t.uniqueAttributes)return{success:!1};for(let e of t.uniqueAttributes){let i=s.getAttribute(e);if(i!==null&&to(e,i,r))return{attributeName:e,attributeValue:i,success:!0}}return{success:!1}}var En=11;function ur(s,r,t){let e=csArray.prototype.shift.call(s);if(s.length===0)return aa(e,t);let i=e,n=s[0],{elementSelector:o,hasUniqueIdentifier:c}=Mc(i,n,r,t);if(!t.fullPath&&c){let u=s[s.length-1];return`${aa(u,t)}${o}`}let l=ur(s,r,t);return`${l?`${l}>`:""}${o}`}function aa(s,r){if(s===bi)return"|detached|";if(s.host){let{ancestors:t,selectionRoot:e}=Oc(s.host);return`${ur(t,e,r)}|shadow-root|`}return s.nodeType===En?"|fragment|":""}var kc=(()=>{class s{constructor(t){this.options=t,this.done=!1,this.path=null}getPath(){if(this.path===null)throw new Error("getPath was called before serializeElement");return this.path}isDone(){return this.done}}return s})(),vd=(()=>{class s extends kc{constructor(){super(...arguments),this.mo=!1,this.yo=!1,this.cc=!1}cy(t,e){return this.mo&&!(e===null&&hr(t))&&t.nodeType!==En&&!t.host}ly(t){return!t.localName}serializeElement(t,e,i){var n;if((n=this.path)!==null&&n!==void 0||(this.path=""),this.cy(t,e))return;let o=!1;e===null&&hr(t)&&(o=!0,this.done=!0);let c=this.yo&&!this.options.fullPath?"":">",l=!!t.host;if(l&&this.path&&(this.path="|shadow-root|"+c+this.path,this.cc=!0,this.mo=!1,this.yo=!1),!l&&e===null&&t.nodeType===En){this.path="|fragment|"+c+this.path,this.done=!0;return}if(this.ly(t))return;let u=e!=null?e:"detached",{elementSelector:E,hasUniqueIdentifier:p}=Mc(t,u,i,this.options);p&&(this.yo=!0,this.mo=!this.options.fullPath);let y=`${o?`|detached|${c}`:""}${this.mo&&!p?"":E}`,S=!p&&this.yo&&!this.options.fullPath?"":this.path&&!this.cc?">":"";this.cc=!1,this.path=`${y}${S}${this.path}`}}return s})();function Zt(s,r=xt.SHOW_ALL){let t=r|xt.SHOW_ELEMENT,e=[document.createTreeWalker(s,t,null,!1)],i=ca(s);i&&csArray.prototype.push.call(e,document.createTreeWalker(i,t,null,!1));let n=null;return{root:s,nextNode(){if(i){let o=i;return i=null,o}for(;e.length>0;){if(n){let u=n;return n=null,u}let c=e[e.length-1].nextNode();if(!c){csArray.prototype.pop.call(e);continue}let l=ca(c);if(r&xt.SHOW_DOCUMENT_FRAGMENT&&l&&(n=l),l&&csArray.prototype.push.call(e,document.createTreeWalker(l,t,null,!1)),(Hr[c.nodeType]&r)!==0)return c}return null},visitAll(o){Hr[s.nodeType]&r&&o(s);let c=this.nextNode();for(;c;){if((Hr[c.nodeType]&r)===0){c=this.nextNode();continue}o(c),c=this.nextNode()}},collectAll(o){let c=[];return this.visitAll(l=>csArray.prototype.push.call(c,o?o(l):l)),c}}}function ca(s){return s&&Pc(s)?s.shadowRoot:null}var jr=(()=>{var s;return(s=tt.Node)!==null&&s!==void 0?s:{}})(),xt=(()=>{var s;return(s=tt.NodeFilter)!==null&&s!==void 0?s:{}})(),Hr={2:xt.SHOW_ATTRIBUTE,4:xt.SHOW_CDATA_SECTION,8:xt.SHOW_COMMENT,11:xt.SHOW_DOCUMENT_FRAGMENT,9:xt.SHOW_DOCUMENT,10:xt.SHOW_DOCUMENT_TYPE,1:xt.SHOW_ELEMENT,[jr.ENTITY_NODE]:xt.SHOW_ENTITY,[jr.ENTITY_REFERENCE_NODE]:xt.SHOW_ENTITY_REFERENCE,[jr.NOTATION_NODE]:xt.SHOW_NOTATION,7:xt.SHOW_PROCESSING_INSTRUCTION,3:xt.SHOW_TEXT},Dc=!1,Sn=5;function _d(s=5){Dc=et.isPerfLoggingActive(),Sn=s}function ws(s,r){return function(){if(!Dc)return s.apply(this,arguments);let t=M.elapsed(),e=s.apply(this,arguments);if(e!=null&&e.then)e.then(()=>{let i=M.elapsed()-t;i>=Sn&&q.counters.methodPerformance.add(r,i)});else{let i=M.elapsed()-t;i>=Sn&&q.counters.methodPerformance.add(r,i)}return e}}var Tt=function(s){return function(r,t,e){let i=e.value;e.value=ws(i,s)}},ms=(()=>{let s;return function(r){function t(){return!!Element.prototype.attachShadow}r.isSupported=t;function e(n){return n&&Pc(n)?n.shadowRoot:null}r.getShadowRoot=e;function i(n){return Zt(n,NodeFilter.SHOW_DOCUMENT_FRAGMENT).collectAll(o=>o.host)}r.getAllShadowHosts=ws(i,"getAllShadowHosts")}(s||(s={})),s})(),yt=(()=>{let s;return function(r){function t(){let p=[i()];return document.documentElement&&csArray.prototype.push.call(p,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(p,document.body.scrollHeight,document.body.offsetHeight),Math.max(...p)}r.documentHeight=t;function e(){return document.documentElement.scrollWidth}r.documentWidth=e;function i(){return window.innerHeight}r.windowHeight=i;function n(){return window.innerWidth}r.windowWidth=n;function o(){let p=window.csScreen.width;return Bs(p)&&p>0?p:window.screen.width}r.screenWidth=o;function c(){let p=window.csScreen.height;return Bs(p)&&p>0?p:window.screen.height}r.screenHeight=c;function l(){return window.pageXOffset}r.windowOffsetX=l;function u(){return window.pageYOffset}r.windowOffsetY=u;function E(){return{dw:`${e()}`,dh:`${t()}`,ww:`${n()}`,wh:`${i()}`,sw:`${o()}`,sh:`${c()}`}}r.getRequestParameters=E}(s||(s={})),s})(),Br=(()=>{var s;return(s=tt.Node)!==null&&s!==void 0?s:Object})(),nt=(()=>{let s;return function(r){let t="isConnected"in Br.prototype?w=>w.isConnected:w=>!w.ownerDocument||!(w.ownerDocument.compareDocumentPosition(w)&w.DOCUMENT_POSITION_DISCONNECTED);function e(w,k){for(let U=w;U;U=csNodenextSibling.apply(U))k(w)}r.forEachChild=e;function i(w){return t(w)}r.isConnected=i;function n(w,k){let U=[];for(let F of l(w,k))csArray.prototype.push.call(U,F);return U}r.getAncestors=n;let o=(w,k)=>{var U;return(U=csNodeparentNode.apply(w))!==null&&U!==void 0?U:k&&mi(w)?w.host:null};function c(w,k,U=!1){let F=w;for(;F;){if(k(F))return F;let lt=o(F,U);if(lt&&lt!==F)F=lt;else break}return null}r.findAncestor=c;function*l(w,k=!1){let U=w;for(;U;){yield U;let F=o(U,k);if(F&&F!==U)U=F;else break}}r.walkUp=l;function u(w,k){if(w===k||k.contains(w))return!0;let U=r.getParentElement(w);return U&&U!==w?u(U,k):!1}r.isDescendantOf=u;function E(w){var k;return w.parentElement?w.parentElement:r.getRootNode(w)?(k=r.getRootNode(w))===null||k===void 0?void 0:k.host:null}r.getParentElement=E;function p(w,k=document){let U=gi(window.csquerySelectorAll[k.nodeType].call(k,w)),F=ms.getAllShadowHosts(k);for(let lt of F){let Dt=ms.getShadowRoot(lt);if(!Dt)continue;let Ht=gi(window.csquerySelectorAll[Dt.nodeType].call(Dt,w));csArray.prototype.push.call(U,...Ht)}return U}r.findAllElements=p,r.getRootNode=(()=>{if("getRootNode"in Br.prototype)return(U,F)=>U.getRootNode(F);function w(U){let F=k(U);return mi(F)?w(F.host):F}function k(U){return csNodeparentNode.apply(U)!=null?k(csNodeparentNode.apply(U)):U}return(U,F)=>typeof F=="object"&&!!F.composed?w(U):k(U)})();function y(w){return w==="transparent"||/^(rgba|hsla)\(\d+, \d+%?, \d+%?, 0\)$/.test(w)}function m(w){let k=w.getBoundingClientRect();return k.right+yt.windowOffsetX()<0||k.bottom+yt.windowOffsetY()<0}function S(w){var k,U;if(((k=w.checkVisibility)===null||k===void 0?void 0:k.call(w,{checkOpacity:!0,checkVisibilityCSS:!0}))===!1)return!0;if(!w.offsetParent){if(!w.getBoundingClientRect)return et.warn(`SUP-11432: Element doesn't have getBoundingClientRect. Node: ${w instanceof Br} Ctor: ${(U=w==null?void 0:w.constructor)===null||U===void 0?void 0:U.name}`),!1;let Dt=w.getBoundingClientRect();if(Dt.width==0&&Dt.height==0)return!0}let F=window.getComputedStyle(w);return F?F.display==="none"||F.visibility==="hidden"||F.visibility==="collapse"||F.opacity==="0"||F.filter==="opacity(0)"||F.width==="0px"&&F.height==="0px"||y(F.color):!0}r.isHiddenByCSS=S;function I(w){if(S(w))return!0;let U=E(w);return U!=null&&I(U)}r.areAncestorsHiddenByCSS=I;function P(w){let k=null,U=w;do if(S(U))k=U;else break;while(U=E(U));return k}r.getTopAncestorHiddenByCSS=P;function v(w){let k=_(w);return k!==null&&!w.contains(k)&&!k.contains(w)}function _(w){let k=w.getBoundingClientRect(),U=k.left+.5*k.width,F=k.top+.5*k.height;return O(document,U,F)}r.getTopElement=_;function D(w){if(!w.getBoundingClientRect)return null;let k=w.getBoundingClientRect(),U=k.x+k.width/2,F=k.y+k.height/2;return r.getTopElementFromPoint(document,U,F)}r.getElementOnTop=D;function O(w,k,U){let F=w.elementFromPoint(k,U);if(!F)return null;let lt=ms.getShadowRoot(F);return lt&&lt!=r.getRootNode(document.body)&&lt!==w?O(lt,k,U):F}r.getTopElementFromPoint=O;function A(w){return!m(w)&&!S(w)&&!v(w)}r.isVisibleInDocument=A;function j(w){return S(w)?!1:it(w)}r.isVisibleInViewportInForeground=j;function it(w){let k=_(w);return k===null?!1:w===k?!0:kt(w)?w.textContent!==""&&k.contains(w):w.contains(k)}r.isInViewPort=it;function dt(w,k,U){let F=w.getAttributeNS(k,U);return F===""?w.hasAttributeNS(k,U)?F:null:F}r.getAttributeNS=dt;function Wt(w){return!!(w.hasAttribute("tabIndex")||w.getAttribute("contentEditable")==="true"||Ic(w)&&w.hasAttribute("href")||(Jn(w)||Kn(w)||Sr(w)||Wu(w))&&!w.hasAttribute("disabled")||Yu(w)||Xu(w))}r.isElementFocusable=Wt;function kt(w){return w.localName==="span"||w.localName==="a"||w.localName==="b"||w.localName==="i"||w.localName==="button"||w.localName==="input"||w.localName==="label"||w.localName==="cite"||w.localName==="small"||w.localName==="strong"||w.localName==="code"||w.localName==="abbr"||w.localName==="em"||w.localName==="dfn"||w.localName==="time"||w.localName==="output"||w.localName==="object"||w.localName==="sub"}r.isInlineElement=kt}(s||(s={})),s})(),wd=(()=>{class s{constructor(t){this.hy=t}run(t){let e=[...this.hy],i=nt.getAncestors(t,!1),n=i[i.length-1];for(;e.length>0&&i.length>0;){let o=csArray.prototype.shift.call(i),c=i[0]||null;if(this.uy(e,o,c,n),this.dy(e),e.length===0)break;i.length===0&&o.host&&(i=nt.getAncestors(o.host,!1),n=i[i.length-1])}}uy(t,e,i,n){for(let o of t)o.serializeElement(e,i,n)}dy(t){for(let e=0;e<t.length;e++)t[e].isDone()&&(csArray.prototype.splice.call(t,e,1),e--)}}return s})(),Td=(()=>{class s extends kc{serializeElement(t){var e;if((e=this.path)!==null&&e!==void 0||(this.path=""),(t==="detached"||t.localName==="body")&&(this.done=!0,this.path.length>0))return;let i=this.py(t);if(i+=i.length>0?"|":"",this.path.length+i.length>this.options.hierarchyMaxLength){this.done=!0;return}this.path=i+this.path}py(t){if(!t.localName)return"";let e=`@${t.localName};`;return e+=this.fy(t.id),t.classList&&(e+=this.gy(csArray.from(t.classList))),t.attributes&&(e+=this.my(t)),e}fy(t){return t?`#${t};`:""}gy(t){return t.length>0?`.${csArray.prototype.join.call(csArray.prototype.sort.call(t),";.")};`:""}yy(t,e){var i,n;return((n=(i=this.options).isAttributeSensitive)===null||n===void 0?void 0:n.call(i,t,e))||csArray.prototype.indexOf.call(this.options.attributeIgnoreTokens,e)!==-1||Ys(t)&&csString.prototype.indexOf.call(e,"data-")===-1&&e!=="aria-label"||Sr(t)&&e==="value"}Ey(t,e){return this.options.useAnonymization&&!this.options.allWhitelistedAttributes.has(t)||e.length>this.options.attrMaxLength}Sy(t){let e={};for(let i of csArray.from(t.attributes))this.yy(t,i.name)||(e[i.name]=i.value);return e}my(t){var e,i;if(!((i=(e=this.options).isNodeSensitive)===null||i===void 0)&&i.call(e,t))return"";let n=Object.entries(this.Sy(t));return csArray.prototype.join.call(csArray.prototype.sort.call(csArray.prototype.map.call(csArray.prototype.filter.call(n,([o])=>o.length<this.options.attrMaxLength),([o,c])=>this.Ey(o,c)?`[${o}]`:`[${o}=${c}]`)),";")+(n.length>0?";":"")}}return s})(),Ce=(()=>{let s;return function(r){r.INVALID_ELEMENT="INVALID_ELEMENT";function t(c){return!!c&&"localName"in c&&"getAttribute"in c&&"hasAttribute"in c&&"parentNode"in c}r.isValidElement=t;function e(c,l,u={fullPath:!1,dynamicIdRegex:null}){let E=o(c);if(E===document)return{path:"",hierarchy:""};if(!t(E))return{path:r.INVALID_ELEMENT,hierarchy:r.INVALID_ELEMENT};let p=new vd(u),y=new Td(l);return new wd([p,y]).run(E),{path:p.getPath(),hierarchy:y.getPath()}}r.getElementPathAndHierarchy=e;function i(c,l={fullPath:!1,dynamicIdRegex:null}){let u=o(c);if(u===document)return"";if(!t(u))return r.INVALID_ELEMENT;let{ancestors:E,selectionRoot:p}=Oc(u);return ur(E,p,l)}r.getElementPath=i;function n(c,l={fullPath:!1,dynamicIdRegex:null}){let u=o(c);if(u===document)return{path:"",firstAnchorParent:null};if(!t(u))return{path:r.INVALID_ELEMENT,firstAnchorParent:null};let{firstAnchorParent:E,ancestors:p,selectionRoot:y}=id(u);return{path:ur(p,y,l),firstAnchorParent:E}}r.getElementPathAndFirstAnchorParent=n;function o(c){return c&&"jquery"in c&&c.length===1?c[0]:c}}(s||(s={})),s})();window.CSPathComputation=window.CSPathComputation||Ce;var xc=["t.contentsquare.net","clicktale"],bd=s=>{var r;if(typeof s.filename=="string"&&csArray.prototype.some.call(xc,t=>csString.prototype.indexOf.call(s.filename,t)>-1)&&!(csString.prototype.indexOf.call(s.filename,"blob")>-1&&(s.message==null?void 0:csString.prototype.indexOf.call(s.message,"importScripts"))>-1)){let t=new Error(s.message);t.stack=(r=s.error)===null||r===void 0?void 0:r.stack,B.critical(t)}};window.addEventListener("error",bd);var B=(()=>{class s{constructor(){}static whiteListFilename(t){csArray.prototype.push.call(xc,t)}static setStrategy(t){s.Gi=t}static computeIsActive(t){s.Be=Es.boolean(t),s.Be?s.lc=Es.boolean(10):s.lc=!1}static isLoggingActive(){return s.Be}static getStrategy(){return s.Gi}static debug(t,e=""){s.Be&&this.Gi.send(t,e,ht.debug)}static warn(t,e=!0,i=""){var n;q.counters.errors.count("warning"),s.Be&&e&&this.Gi.send(t,i,ht.warn),(n=window.UXAnalytics.Console)===null||n===void 0||n.warn(t)}static implementation(t,e=""){q.counters.errors.count("implementation"),s.Be&&this.Gi.send(t,e,ht.implementation)}static error(t,e=""){var i;q.counters.errors.count("error"),s.Be&&this.Gi.send(t,e,ht.error),(i=window.UXAnalytics.Console)===null||i===void 0||i.error(t)}static critical(t,e=""){q.counters.errors.count("critical"),this.Gi.send(t,e,ht.critical)}static tryToExecute(t,e){return function(...i){try{let n=e.apply(this,i);return K(tt.Promise)&&n instanceof tt.Promise?n.then(o=>o,o=>s.error(Pe(o)?o:new Error(o),t)):n}catch(n){try{s.error(Pe(n)?n:new Error(n),t)}catch{}}}}static isPerfLoggingActive(){return s.lc}}return s.Be=!1,s.lc=!1,s})();var Ad=/^\d+\.\d+(?:\.\d+)?$/,Rd=s=>{if(!Ad.test(s))return;let[r,t,e]=csArray.prototype.map.call(csString.prototype.split.call(s,"."),Number);return{major:r,minor:t,patch:!e||Number.isNaN(e)?0:e}},Cd=(s,r)=>s.major!==r.major?s.major-r.major:s.minor!==r.minor?s.minor-r.minor:s.patch-r.patch,Id=(s,r)=>Cd(s,r)>=0;function le(s){return Pt(s,"data:")}function Pd(s){return Pt(s,"#")}function Od(s){return!!s&&(Ws(s,".css")||Pt(s,"https://fonts.googleapis.com/css"))}var Nd=["id","class","style","srcset","sizes","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start","slot","data-cs-override-id"],Lc=s=>{let r=new Set(Nd);return csArray.prototype.forEach.call(s,t=>{r.add(t)}),r},Md=["svg","slot"],kd=(s,r,t)=>t==="radio"&&s==="input"&&r==="name"||csArray.prototype.indexOf.call(Md,s)>-1,Vc={href:new Set(["a"]),src:new Set(["iframe"])},Dd=s=>Vc.hasOwnProperty(s),xd=(s,r,t)=>{var e;return((e=Vc[r])===null||e===void 0?void 0:e.has(s))&&!le(t)},Ld=(s,r,t)=>(t==="submit"||t==="button")&&s==="input"&&r==="value";function Fr(s){return s?Vd(s):null}function Vd(s){try{let r=/^\/(.*)\/([gim]*)$/.exec(s);if(r){let[,t,e]=r;return new csRegExp(`^${t}$`,e)}return new csRegExp(`^${s}$`)}catch{return null}}var Ud=1,jd="f553e78fb58e051e51fe8074c4c6e73e",vn=(()=>{let s;return function(r){r[r.Disabled=0]="Disabled",r[r.ButtonAndLinkOnly=1]="ButtonAndLinkOnly",r[r.Enabled=2]="Enabled"}(s||(s={})),s})(),Hd=(()=>{class s{constructor(t){var e,i,n,o,c,l,u,E,p,y,m,S,I,P;this.isChild=!1,this.isSMB=(e=t.isSMB)!==null&&e!==void 0?e:!1,this.trackerDomain=t.trackerDomain,this.dynamicConfDomain=t.dynamicConfDomain,this.settingsFileUri=t.settingsFileUri,this.tagDomain=t.tagDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.smbConfig=t.smbConfig,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||zn,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.mouseMoveHeatmapEnabled=t.mouseMoveHeatmapEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.collectionEnabled=!!(!((o=(i=t.collectionEnabled)!==null&&i!==void 0?i:(n=t.smbConfig)===null||n===void 0?void 0:n.record)!==null&&o!==void 0)||o),this.useSentry=!!((c=t.useSentry)!==null&&c!==void 0?c:!((l=t.smbConfig)===null||l===void 0)&&l.useSentry),this.apiErrors={enabled:(u=t.apiErrorsEnabled)!==null&&u!==void 0?u:0,...t.apiErrors},this.customErrors={enabled:(E=t.customErrorsEnabled)!==null&&E!==void 0?E:0,...t.customErrors},this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=Fr(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new csRegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=Fr(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=Fr(t.replayRecordingMaskedUrlRegex),this.replayRecordingMaskedUrlRegexRules=t.replayRecordingMaskedUrlRegexRules||null,this.replayRecordingUnmaskedUrlRegexRules=t.replayRecordingUnmaskedUrlRegexRules||null,this.anonymisationMethod=t.anonymisationMethod||null,this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.staticResourceManagerDomain=t.staticResourceManagerDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.recordingUrlRules=(p=t.recordingUrlRules)!==null&&p!==void 0?p:[],this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex===""&&(this.pathComputationRules.dynamicElementNameRegex=null),t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new csRegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled,this.useStaticResourceManager=!!t.useStaticResourceManager,t.taskSchedulerOptions&&(this.taskSchedulerOptions={...t.taskSchedulerOptions,enabled:!!t.taskSchedulerOptions.enabled}),this.uxaDomain=t.uxaDomain,this.environment=((y=t.uxaDomain)===null||y===void 0?void 0:y.indexOf("staging"))>-1?"staging":"production",this.performanceTimingOptions=t.performanceTimingOptions,this.replayConsentRequiredForSession=!!t.replayConsentRequiredForSession,this.isWebView=!1,t.displayAdOptions&&t.displayAdOptions.length&&(this.displayAdOptions=t.displayAdOptions),t.voc&&(this.voc={...t.voc,enabled:!!t.voc.enabled}),this.vocData=t.vocData,t.heapEnvironment&&(this.heapEnvironment=t.heapEnvironment),t.implementations&&t.implementations.length&&(this.implementations=t.implementations),this.eventsApiEnabled=!!t.eventsApiEnabled,this.anonymizeDigits=(m=t.anonymizeDigits)!==null&&m!==void 0?m:null,this.isHeapPresent=window.heap!==void 0,this.recordTargetingRules=(S=t.recordTargetingRules)!==null&&S!==void 0?S:[],this.paProxyDomainUri=t.paProxyDomainUri||null,this.emitRecordInfoEvents=t.emitRecordInfoEvents!=!1,this.collectHierarchy=!!t.collectHierarchy,this.collectSubmit=!!t.collectSubmit,this.collectTargetText=(I=t.collectTargetText)!==null&&I!==void 0?I:vn.Disabled,this.identityEncryptionKey=t.identityEncryptionKey||null,this.tagVerificationDomain=t.tagVerificationDomain,this.tagVerificationEnabled=!!t.tagVerificationEnabled,this.trackingCodeVerified=!!t.trackingCodeVerified,this.quotas=(P=t.quotas)!==null&&P!==void 0?P:null}getTrackerUri(){return`${this.hs()}://${this.trackerDomain}`}getSentryFileUri(){return`${this.hs()}://${this.tagDomain}/uxa/smb/errors.js`}getSentryDSNUri(){return`https://${jd}@${this.loggerDomain}/4508608369131520`}getRecordingUri(){return`${this.hs()}://${this.malkaRecordingDomain}`}getLoggerUri(){return`${this.hs()}://${this.loggerDomain}`}getMetricsUri(){return`${this.hs()}://${this.loggerDomain}/metrics`}getStaticResourceManagerUri(){return`${this.hs()}://${this.staticResourceManagerDomain}`}getVerificationEndpoint(){return`${this.hs()}://${this.tagVerificationDomain}`}getSettingsFileUri(){return this.settingsFileUri?this.settingsFileUri:`${this.hs()}://${this.dynamicConfDomain}/${this.projectId}.json`}isQuotaEnabled(){return this.isSMB||this.quotas!==null}getPaProxyDomainUri(){return`${this.hs()}://${this.paProxyDomainUri}`}hs(){return this.useHttps?"https":"http"}isProjectActive(){return this.status===Ud}processOptionOverrides(t){t&&t.forEach&&t.forEach(([e,...i])=>{if(e==="setOption"){let[n,o]=i;this.vy(n,o)}})}vy(t,e){t==="trackerDomain"&&(this.trackerDomain=e),t==="loggerDomain"&&(this.loggerDomain=e),t==="malkaRecordingDomain"&&(this.malkaRecordingDomain=e),t==="staticResourceManagerDomain"&&(this.staticResourceManagerDomain=e),t==="minLogLevel"&&(this.minLogLevel=e),t==="useHttps"&&(this.useHttps=!!e),t==="isWebView"&&(this.isWebView=e),t==="dynamicConfDomain"&&(this.dynamicConfDomain=e),t==="paProxyDomainUri"&&(this.paProxyDomainUri=e)}getRequestParameters(){return{pid:`${this.projectId}`}}updateDynamicFields(t,e){t==="emitDebugEvents"&&(this.emitDebugEvents=e),t==="minLogLevel"&&(this.minLogLevel=e)}isCsSideloadingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_sideloads_heap"&&!this.isHeapPresent}isHeapSideloadsCs(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"}isHeapSideloadsCsV5(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"&&this.td()}isHeapSideloadsStartDataCollection(){if(this.isHeapSideloadsCs()){if(this.td())return!0;let t=Rd(this.getHeapVersion()||"");if(t&&t.major===4&&Id(t,{major:4,minor:23,patch:5}))return!0}return!1}td(){var t;return typeof((t=window.heap)===null||t===void 0?void 0:t.getUserId)=="function"}getHeapVersion(){var t,e,i,n,o,c;return typeof((t=window.heap)===null||t===void 0?void 0:t.getConfig)=="function"&&((n=(i=(e=window.heap)===null||e===void 0?void 0:e.getConfig())===null||i===void 0?void 0:i.sdk)===null||n===void 0?void 0:n.version)||((c=(o=window.heap)===null||o===void 0?void 0:o.version)===null||c===void 0?void 0:c.heapJsVersion)||void 0}isCsCrosswritingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_crosswrites_heap"}getHeapStorageLocation(){var t,e;return(e=(t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_storage_location)!==null&&e!==void 0?e:null}getHeapWebAppUri(){return this.getHeapStorageLocation()==="eu-west-1"?"https://eu.heapanalytics.com":"https://heapanalytics.com"}isCollectTargetTextEnabled(){return this.isSMB||this.collectTargetText!==vn.Disabled}isNetworkDetailsEnabled(){return this.performanceTimingOptions?this.performanceTimingOptions.withResource||this.performanceTimingOptions.withNavigation:!1}hasRecordingUrlRules(){var t;return!!(!((t=this.recordingUrlRules)===null||t===void 0)&&t.length)}hasTargetingRules(){var t;return!!(!((t=this.recordTargetingRules)===null||t===void 0)&&t.length)}getHeapEnvId(){return this.heapEnvironment?this.heapEnvironment.env_id:""}}return s})(),Bd=(()=>{class s{constructor(t,e){this.Eo=t,this.sd=e}init(){this.rd=this.Eo!==this.Eo.top,this.nd=this.sd.isWebView&&this.Eo===this.Eo.top,this.sd.iframesTracking&&this.rd||this.nd?this.od=!1:this.od=!0}isInIframeContext(){return this.rd}isTopWindowTracker(){return this.od}isInWebViewContext(){return this.nd}}return s})();function la(){}function _n(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function Fd(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var $r=csSymbol("cachedJson");function $d(s){if(s[$r])return s[$r];if(csArray.isArray(s)){if(s.length===0)return"[]";let r="["+$s(s[0]);for(let t=1;t<s.length;t++)r+=","+$s(s[t]);return r+="]"}return s[$r]=csJSON.stringify(s)}var $s=typeof window.Symbol!="undefined"?$d:csJSON.stringify;var yi=(()=>{let s;return function(r){function t(e){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(e),i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`),"&")}r.toQuery=t}(s||(s={})),s})(),Uc=(()=>{class s{constructor(t,e){this.domainUri=t,this.path=e,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}setRequestParametersProviders(...t){this.requestParametersProviders=t}before(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)}after(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)}retrieveParameters(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,t=>t.getRequestParameters()),(t,e)=>({...t,...e})):{}}}return s})(),zs=(()=>{class s extends Uc{constructor(t,e){super(t,e)}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,i=>i());let t=this.retrieveParameters();this.hc(t);let e=yi.toQuery(t);this._y(e),csArray.prototype.forEach.call(this.afterRequestCallbacks,i=>i())}_y(t){let e=new window.Image(1,1);e.onload=la,e.onerror=la,csHTMLImageElementsrc.call(e,`${this.domainUri}${this.path?`/${this.path}`:""}?${t}`)}hc(t){t.r=csString.prototype.slice.call(`${Math.random()}`,2,8)}}return s})();var zd=(()=>{class s{constructor(t,e){this.us=t,this.wy=e}init(){this.ds=new zs(this.us.getLoggerUri()),this.ds.setRequestParametersProviders(this,this.wy)}send(t){this.So=t,this.ds.send()}getRequestParameters(){return{a:this.So.app,l:this.So.level,m:this.So.message,s:this.So.stacktrace}}}return s})(),Gd=/[a-zA-Z0-9._%+-]+(?:@|%40|%2540)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,qd=/[a-zA-Z0-9+_-](?:@|%40|%2540)/,Wd="CS_ANONYMIZED_EMAIL",zr="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",Yd=new csRegExp(`(ey${zr}\\.ey${zr}\\.${zr})`,"g"),Xd="CS_ANONYMIZED_JWT",Kd=/[0-9]{4}/,Jd=/(^|[^a-zA-Z0-9*.,-])([45*][0-9*]{3}([ -]?)[0-9*]{4}\3[0-9*]{4}\3[0-9*]{4})($|[^a-zA-Z0-9*.,-])/g,Qd="CS_ANONYMIZED_PII",Zd="\u2022",tp=/\d/g,ep=/([+(]{0,2}\d[-_ ()/]{0,4}){9,}/,sp=/(?:\d{1,3}\.){3}\d{1,3}/,ip=/(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}/,$e=(()=>{let s;return function(r){function t(E){return csString.prototype.replace.call(E,Gd,Wd)}r.replaceEmail=t;function e(E){return csString.prototype.replace.call(E,Yd,Xd)}r.replaceJWT=e;function i(E,p){return csString.prototype.replace.call(E,Jd,p)}r.replaceCreditCardNumber=i;function n(E){return csString.prototype.replace.call(E,tp,Zd)}r.replaceDigits=n;function o(E){return sp.test(E)||ip.test(E)}r.mayHaveIPAddress=o;function c(E){return ep.test(E)}r.mayHaveNumberSequence=c;function l(E){return Kd.test(E)}r.mayHaveCreditCardNumber=l;function u(E){return qd.test(E)}r.mayHaveEmail=u}(s||(s={})),s})(),Ai=(()=>{class s{hasPII(t,e){let i=this.checkAndAnonymizePII(t,e);return t!==i}checkAndAnonymizePII(t,e=null){let i=this.Ty(this.pc(t));return e===!0?i=this.by(i):e===!1&&(i=this.Ay(i)),i}anonymizePII(t){return this.pc(t)}anonymizeJwt(t){return $e.replaceJWT(t)}anonymizeFields(t,e){return csArray.prototype.forEach.call(e,i=>{t[i]=this.pc(t[i])}),t}pc(t){if($e.mayHaveEmail(t)){let e=$e.replaceEmail(t);return e!==t&&q.counters.redactedPII.count("email"),e}return t}by(t){return $e.replaceDigits(t)}Ay(t){return $e.mayHaveNumberSequence(t)?$e.replaceDigits(t):t}Ty(t){return $e.mayHaveCreditCardNumber(t)?$e.replaceCreditCardNumber(t,(e,i,n,o,c)=>{if(csString.prototype.indexOf.call(n,"*")===-1){let u=o.length?csArray.prototype.join.call(csString.prototype.split.call(n,o),""):n;if(!this.Ry(u))return e;q.counters.redactedPII.count("cc")}else q.counters.redactedPII.count("cc-partial");return`${i}${Qd}${c}`}):t}Ry(t){let e=parseInt(t[t.length-1]),i=0;for(let n=t.length-2;n>=0;n--){let o=parseInt(t[n]);n%2===0&&(o*=2),i+=Math.floor(o/10)+o%10}return 10-i%10===e}}return s})(),jc="15.134.1";function eo(){return{v:jc}}var rp=(()=>{class s{constructor(t,e){this.f=t,this.M=e}getRequestParameters(){return{d:`${M.now()}`,p:this.M.anonymizePII(window.location.href),...this.f.getRequestParameters(),...eo()}}}return s})(),np="uxa",ha=5,op="No stacktrace",Hc="snippet-",Bc="implementation-snippet-",ua=(()=>{let s;return function(r){r.IMPLEMENTATION="implementation",r.DYNAMIC="dynamic"}(s||(s={})),s})(),ap=(()=>{class s{constructor(t,e,i){this.ps=e,this.M=new Ai,this.ad=Vr[ht.warn],this.ad=Vr[t.minLogLevel||ht.warn],this.ds=i||new zd(t,new rp(t,this.M)),this.cd={[ht.debug]:[],[ht.warn]:[],[ht.implementation]:[],[ht.error]:[],[ht.critical]:[]},this.vo={implementation:{},dynamic:{}},this.ds.init()}send(t,e="",i=ht.warn){if(!this.Cy(i,e))return;csArray.prototype.push.call(this.cd[i],e||"");let n={message:this.Iy(t,e),stacktrace:this.Py(t),app:np,level:i};this.ds.send(n)}Iy(t,e){let i=Pe(t)?this.M.anonymizePII(t.message||t.toString()):t;return e&&(i+=` ErrorCode: ${e}`),i}Py(t){return Pe(t)?`${t.stack||op} ${this.xr()}`:this.xr()}xr(){let t=this.ps.getVisitorService(),e=t==null?void 0:t.getVisitor();if(!e)return"No context";let i=this.ps.getSessionService(),n=i&&i.getSession(),o={userId:e.id,sessionNumber:e.visitsCount,pageNumber:n&&n.pageNumber};return csJSON.stringify(o)}Cy(t,e){if(Vr[t]<this.ad)return!1;if((e==null?void 0:csString.prototype.indexOf.call(e,Bc,0))===0)return this.ld(e,ua.IMPLEMENTATION);if((e==null?void 0:csString.prototype.indexOf.call(e,Hc,0))===0)return this.ld(e,ua.DYNAMIC);let i=this.cd[t];return i.length>=ha?!1:!(e&&csArray.prototype.some.call(i,n=>n===e))}ld(t,e){return t in this.vo[e]?this.vo[e][t]>=ha?!1:(this.vo[e][t]+=1,!0):(this.vo[e][t]=1,!0)}}return s})(),Ct=!_i&&document.createElement("a"),cp=/(:443|:80)$/;function es(s){return Ct?(Ct.href=s,Ct.href):""}function lp(s,r){return new csURL(s,r).href}function hp(s,r){return csArray.prototype.some.call(r,t=>Ws(s,`.${t}`)||s===t||t==="")}function up(s){return s[0]==="/"?s:`/${s}`}function da(s){return csString.prototype.replace.call(s,cp,"")}function Fc(s){return!Ct||!Pt(s,"http://")&&!Pt(s,"https://")?null:(Ct.href=s,{hash:Ct.hash,host:da(Ct.host),hostname:Ct.hostname,href:Ct.href,origin:Ct.origin?Ct.origin:da(`${Ct.protocol}//${Ct.host}`),pathname:up(Ct.pathname),port:Ct.port,protocol:Ct.protocol,search:Ct.search})}var Rt=(()=>{let s;return function(r){r.Discovery="discovery",r.Stop="stop",r.RecordingContext="recordingContext",r.SensitiveStatus="sensitiveStatus",r.RecordingEvent="recordingEvent",r.EndOfBufferedMessages="endOfBufferedMessages",r.ChildLogMessage="childLogMessage",r.AnalysisEvent="analysisEvent",r.JavascriptError="javascriptError",r.ApiError="apiError",r.Assets="assets",r.DetailedApiError="detailedApiError",r.EmerchandisingMessage="emerchandisingMessage",r.Commands="commands",r.IntegrationCallback="integrationCallback",r.StaticResource="staticResource",r.TrackingContextResultMessage="trackingContextResultMessage",r.TrackingContextRequestMessage="trackingContextRequestMessage",r.CustomError="customError"}(s||(s={})),s})();var dp=(()=>{class s{setContext(t,e){this.I=t,this.R=e}getVisitorService(){return this.I}getSessionService(){return this.R}}return s})(),wn=!1;function pp(){wn=!0}function at(){return(s,r,t)=>{if(t){let e=t.value;t.value=function(i,n){(i==null?void 0:i.isTrusted)===!1&&wn||e.call(this,i,n)}}else{let e=s[r];if(typeof e!="function")return;s[r]=function(i,...n){(i==null?void 0:i.isTrusted)===!1&&wn||e.call(this,i,n)}}}}function fp(s){if(document!=null&&document.prerendering){document.addEventListener("prerenderingchange",s,{once:!0});return}s()}function H(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}function gp(){let s=new MutationObserver(r=>{r.forEach(t=>{X(t.removedNodes,e=>{e instanceof HTMLElement&&e.tagName==="CS-NATIVE-FRAME-HOLDER"&&(q.counters.pureWindowState.count("iframe-deletion"),et.warn("<cs-native-frame-holder> deleted"),s.disconnect())})})});s.observe(document.body,{childList:!0})}function pa(s){return typeof s!="function"?!1:s.toString().indexOf("[native code]")!==-1}function mp(){(!pa(MutationObserver)||!pa(MutationObserver.prototype.observe))&&q.counters.patchedNativeFunctions.count("MutationObserver")}function yp(){try{window.CSPureWindow&&gp(),mp()}catch{}}var Et=(()=>{let s;return function(r){r.CURRENT_DOMAIN="CURRENT_DOMAIN";function t(l){let E=new csRegExp(`(^|;)[ ]*${l}=([^;]*)`).exec(document.cookie);return E?decodeURIComponent(E[2]):null}r.get=t;function e(l,u,E,p,y,m){let S=encodeURIComponent(`${u}`),I=E===r.CURRENT_DOMAIN?void 0:E,P=i(p),v=P?`;expires=${P.toUTCString()}`:"",_=";path=/",D=ut(I)?`;domain=${I}`:"",O=`${l}=${S}${v}${_}${D}`;return K(y)&&y!==Ze.NotSet&&(O=`${O};SameSite=${y}`),K(m)&&m===ce.Yes&&(O=`${O};Secure`),document.cookie=O,!0}r.set=e;function i(l){return pt(l)?new csDate(M.now()+l):l}r.toExpireDate=i;function n(l,u){t(l)&&e(l,"",u,new csDate(0)),t(l)&&e(l,"",u,new csDate(0),Ze.None,ce.Yes)}r.remove=n;function o(){return document.cookie.length>0}r.isCookiePresent=o;function c(l,u){let E="_cs_root-domain",p=t(E);if(p!==null&&p!=="1")return p;let y=csString.prototype.split.call(window.location.hostname,"."),m=csArray.prototype.pop.call(y);for(;y.length&&(p===null||p==="1");)m=csArray.prototype.join.call([csArray.prototype.pop.call(y),m],"."),e(E,m,m,void 0,l,u),p=t(E);return n(E,m),m}r.getRootDomain=c}(s||(s={})),s})(),Ep=(()=>{let s;return function(r){function t(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}r.browserIsSafariV12=t}(s||(s={})),s})(),Ze=(()=>{let s;return function(r){r.None="None",r.Lax="Lax",r.NotSet="X"}(s||(s={})),s})(),ce=(()=>{let s;return function(r){r[r.Yes=1]="Yes",r[r.No=0]="No"}(s||(s={})),s})(),_r=(()=>{class s{constructor(t,e,i){this.f=t,this.A=e,this.pi=i,this.fc=!1,this.ud=Ze.NotSet,this.gc=ce.No}getSameSiteFlag(){return this.ud}getSecureFlag(){return this.gc}getDomain(){return this.mc}getRootDomain(){return this.dd}init(){if(this.f.cookielessTrackingEnabled)return;let t=this.Oy(),e=this.Ny();this.fc=this.My(t,e),this.fc?(this.ud=t,this.gc=e):this.f.secureCookiesEnabled&&this.A.getUrlProtocol()==="https:"&&(this.gc=ce.Yes),this.dd=this.ky(),this.mc=this.Dy(this.dd)}My(t,e){return Ep.browserIsSafariV12()?!1:(Et.set(s.COOKIE_TEST_FOR_SAME_SITE,"Test same site",s.CURRENT_DOMAIN,void 0,t,e),Et.get(s.COOKIE_TEST_FOR_SAME_SITE)?(Et.remove(s.COOKIE_TEST_FOR_SAME_SITE,s.CURRENT_DOMAIN),!0):!1)}Oy(){return this.A.getUrlProtocol()==="http:"?Ze.Lax:this.pi.isSameSiteNoneSecureNeeded()||this.f.crossDomainTracking?Ze.None:Ze.Lax}Ny(){return this.A.getUrlProtocol()==="http:"?ce.No:this.f.secureCookiesEnabled||this.f.crossDomainTracking||this.pi.isSameSiteNoneSecureNeeded()?ce.Yes:ce.No}isSameSiteSupported(){return this.fc}set(t,e,i,n){let o=Et.toExpireDate(i),c=n?ce.Yes:this.getSecureFlag();Et.set(t,e,this.mc,o,this.getSameSiteFlag(),c)}get(t){let i=new csRegExp(`(^|;)[ ]*${t}=([^;]*)`).exec(document.cookie);return i?decodeURIComponent(i[2]):null}delete(t,e){let i=e||this.mc;Et.remove(t,i)}ky(){let t=this.pi.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),e=t?Ze.None:void 0,i=t?ce.Yes:void 0;return Et.getRootDomain(e,i)}Dy(t){return this.f.allowSubdomains?t:Et.CURRENT_DOMAIN}}return s.CURRENT_DOMAIN="CURRENT_DOMAIN",s.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",s})(),Ms="_cs_t",fa="1",Sp=(()=>{class s{constructor(t,e){this.wt=t,this.f=e,this._o=!1,this.wo=!1}init(){if(!this.f.cookielessTrackingEnabled&&this.wt.isTopWindowTracker()&&"cookie"in document){if(!this.wt.isInIframeContext()&&Et.isCookiePresent()){this._o=!0,this.wo=!1;return}if(Et.set(Ms,fa,Et.CURRENT_DOMAIN),Et.get(Ms)!==null){this._o=!0,this.wo=!1,Et.remove(Ms,Et.CURRENT_DOMAIN);return}Et.set(Ms,fa,Et.CURRENT_DOMAIN,void 0,Ze.None,ce.Yes),Et.get(Ms)!==null&&(this._o=!0,this.wo=!0,Et.remove(Ms,Et.CURRENT_DOMAIN))}}areCookiesEnabled(){return this._o}isSameSiteNoneSecureNeeded(){return this.wo}}return s})();function vp(){let s="CSSessionStorageTest";try{return sessionStorage.setItem(s,s),sessionStorage.getItem(s)!==s?!1:(sessionStorage.removeItem(s),!0)}catch{return!1}}var _p=(()=>{class s{constructor(t,e){this.f=t,this.pi=e}canTrack(){return this.f.isProjectActive()&&this.xy()&&this.pd()&&this.Ly()}canTrackInChild(){return this.f.isProjectActive()&&this.Vy()&&(this.pd()||this.Uy())}Ly(){return this.f.cookielessTrackingEnabled?vp():this.pi.areCookiesEnabled()}pd(){return hp(window.location.hostname,this.f.hostnames)}xy(){return!this.gd()&&this.jy()}Vy(){return!this.gd()&&this.Hy()}Uy(){return window.location.protocol==="about:"&&window.location.hostname===""}gd(){return"visibilityState"in document&&document.visibilityState==="prerender"}jy(){return this.md()&&this.By()}Hy(){return this.md()}By(){try{return!!window.localStorage}catch{return!1}}md(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window}}return s})(),wp=(()=>{class s{constructor(t,e){this.yc=!1,this.yd=new Map,this.Ed=new Map,this.Sd=new Map,this.vd="CS_WORKER_SIGNATURE";let i=`
    const algorithm = ${t.algorithm};
    const compressor = (${t.getCompressorSourceCode()})();
    (()=>{"use strict";function e(e,t,r,s){return new(r||(r=Promise))((function(o,a){function i(e){try{c(s.next(e))}catch(e){a(e)}}function n(e){try{c(s.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,n)}c((s=s.apply(e,t||[])).next())}))}var t,r;Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError,function(e){e.UNCOMPRESSED="0",e.GZIP="2"}(t||(t={})),function(e){e.debug="debug",e.warn="warn",e.implementation="implementation",e.error="error",e.critical="critical"}(r||(r={})),r.debug,r.warn,r.implementation,r.error,r.critical;let s={debug(...e){},warn(...e){},implementation(...e){},error(...e){},critical(...e){},isPerfLoggingActive:()=>!1};class o{constructor(e){var t;this.queryParams={},this.headers={},this.handleRecoveredRequests=e=>{for(const t of e){const{metadata:e,events:r}=t;this.send(r,e)}},this.endpoint=e.endpoint,this.compressionOpts=e.compressionOpts,this.recoveryStorage=e.recoveryStorage,this.mandatoryParameters=null!==(t=e.mandatoryParameters)&&void 0!==t?t:[],this.contentType=e.contentType,this.worker=!!e.worker,this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests)}setQueryParams(e){Object.keys(e).forEach((t=>{this.queryParams[t]=e[t]}))}removeQueryParams(e){e?e.forEach((e=>{delete this.queryParams[e]})):this.queryParams={}}send(e,r){const o=r||Object.assign({},this.queryParams),a=!("ct"in o),i="application/json"===this.contentType||"string"!=typeof e&&!this.isArrayBuffer(e);"ct"in o||(this.compressionOpts&&a?o.ct=this.compressionOpts.compressionType:o.ct=t.UNCOMPRESSED);const n=i?JSON.stringify(e):e,c=Object.keys(o).map((e=>\`\${encodeURIComponent(e)}=\${encodeURIComponent(o[e])}\`)).join("&"),h=\`\${this.endpoint}?\${c}\`;!function(e,t){const r=e.length;for(let s=0;s<r;s++)if(t(e[s],s))return!0;return!1}(this.mandatoryParameters,(e=>null==o[e]))?this.compressionOpts&&a&&"string"==typeof n?this.compressionOpts.compressor(n,this.compressionOpts.compressionOutputType,(e=>this.doSend(h,o,e))):this.doSend(h,o,n):s.warn(\`[\${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on \${h}\`)}onLoad(e){this.onLoadCallback=e}onError(e){this.onErrorCallback=e}onTimeout(e,t){this.onTimeoutCallback=e,this.timeout=t}abort(){this.abortCurrentXhrCall&&this.abortCurrentXhrCall()}setRequestHeader(e,t){this.headers[e]=t}getQueryParams(){return this.queryParams}isArrayBuffer(e){return e&&void 0!==e.byteLength}doSend(e,t,r){const s=new XMLHttpRequest,o=Object.keys(t).map((e=>\`\${encodeURIComponent(e)}=\${encodeURIComponent(t[e])}\`)).join("&");s.open("POST",e),this.contentType&&s.setRequestHeader("Content-Type",this.contentType),s.onload=()=>{if(this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests),this.onLoadCallback){const e={params:t,responseText:s.responseText,status:s.status};this.onLoadCallback(e)}},s.onerror=()=>{this.recoveryStorage&&this.recoveryStorage.save({key:o,metadata:t,events:r}),this.onErrorCallback&&this.onErrorCallback({params:t})},this.timeout&&this.onTimeoutCallback&&(s.timeout=this.timeout,s.ontimeout=()=>{this.onTimeoutCallback()}),this.abortCurrentXhrCall=()=>s.abort(),Object.keys(this.headers).forEach((e=>{s.setRequestHeader(e,this.headers[e])})),s.send(r)}}class a{constructor(e){this.maxStoredBytes=e,this.storageBytesUsed=0}addString(e){this.storageBytesUsed+=2*e.length}addArrayBuffer(e){this.storageBytesUsed+=e.byteLength}isThresholdReached(){return this.storageBytesUsed>this.maxStoredBytes}reset(){this.storageBytesUsed=0}}class i{constructor(e){this.ramStorage={},this.byteSizeCounter=new a(e)}save({key:e,metadata:t,events:r}){this.byteSizeCounter.isThresholdReached()||(this.byteSizeCounter.addString(e),"string"==typeof r?this.byteSizeCounter.addString(r):this.byteSizeCounter.addArrayBuffer(r),this.byteSizeCounter.isThresholdReached()||(this.ramStorage[e]={metadata:t,events:r}))}recover(e){const t=[];this.getStorageKeys().forEach((e=>{const r=this.ramStorage[e];void 0!==r&&(delete r.metadata.datatype,t.push(r),this.removeItem(e))})),0!==t.length&&(e(t),this.byteSizeCounter.reset())}getStorageKeys(){return Object.keys(this.ramStorage)}removeItem(e){delete this.ramStorage[e]}}var n;!function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",e[e.OPEN_FAILED=2]="OPEN_FAILED",e[e.READY=3]="READY"}(n||(n={}));class c{constructor(e,t,r){this.storageName=e,this.onOpenError=r,this.cacheState=n.NOT_STARTED,this.toBeSavedBuffer=[],this.recoveryInProgress=0,this.origin=self.origin,this.context="object"==typeof window?"":"worker-",this.byteSizeCounter=new a(t),this.init()}init(){return e(this,void 0,void 0,(function*(){yield this.openCache(),this.cacheState===n.READY?this.flushToBeSavedBuffer():this.onOpenError(this.toBeSavedBuffer)}))}flushToBeSavedBuffer(){this.toBeSavedBuffer.forEach((e=>{this.save(e)})),this.toBeSavedBuffer=[]}save(t){return e(this,void 0,void 0,(function*(){try{if(this.cacheState===n.OPEN_IN_PROGRESS)return void this.toBeSavedBuffer.push(t);if(this.cacheState!==n.READY)return;if(this.byteSizeCounter.isThresholdReached())return;const{key:e,metadata:r,events:s}=t;if(this.byteSizeCounter.addString(e),"string"==typeof s?this.byteSizeCounter.addString(s):this.byteSizeCounter.addArrayBuffer(s),this.byteSizeCounter.isThresholdReached())return;yield this.cache.put(\`\${this.origin}/\${e}\`,new Response(s,{headers:r}))}catch(e){}}))}recover(t){return e(this,void 0,void 0,(function*(){(this.cache||(yield this.openCache(),this.cacheState===n.READY))&&this.doRecover(t)}))}openCache(){return e(this,void 0,void 0,(function*(){try{this.cacheState=n.OPEN_IN_PROGRESS,this.cache=yield self.caches.open(\`\${this.context}\${this.storageName}\`),this.cacheState=n.READY}catch(e){this.cacheState=n.OPEN_FAILED}}))}doRecover(t){return e(this,void 0,void 0,(function*(){try{if(this.recoveryInProgress++,this.recoveryInProgress>1)return;const e=yield this.cache.keys();if(0===e.length)return;const r=(yield this.cache.matchAll()).map((e=>{const t={};e.headers.forEach(((e,r)=>{t[r]=e})),delete t["content-type"];const r=t.datatype;return delete t.datatype,"json"===r||"base64"===r?e.text().then((e=>({metadata:t,events:e}))):e.arrayBuffer().then((e=>({metadata:t,events:e})))})),s=yield Promise.all(r);yield Promise.all(e.map((e=>this.cache.delete(e)))),t(s),this.byteSizeCounter.reset()}catch(e){}finally{this.recoveryInProgress--}}))}}class h{constructor(e){try{this.initializeStorageStrategy(e)}catch(e){this.setRamStorageStrategy()}}initializeStorageStrategy(e){self.caches?this.setCachesStrategy(e):this.setRamStorageStrategy()}save(e){this.storageStrategy.save(e)}recover(e){this.storageStrategy.recover(e)}setCachesStrategy(e){this.storageStrategy=new c(e,h.MAX_SIZE,(e=>{this.setRamStorageStrategy(e)}))}setRamStorageStrategy(e){this.storageStrategy=new i(h.MAX_SIZE),e&&e.forEach((e=>{this.storageStrategy.save(e)}))}}h.MAX_SIZE=16777216,function(){const t="CS_WORKER_SIGNATURE",r=new Map,s=new h("csPersisted");function a(e){var a;if((a=e)&&a.WORKER_SIGNATURE===t)switch(e.type){case"CreatePostRequest":{const{endpoint:a,compressionOutputType:i,useRetry:n,mandatoryParameters:c}=e,h={endpoint:a,mandatoryParameters:c,worker:!0};i&&(h.compressionOpts={compressor,compressionOutputType:i,compressionType:algorithm}),n&&(h.recoveryStorage=s);const d=new o(h);r.set(a,d),d.onLoad((e=>{const r={type:"onLoad",endpoint:a,response:e,WORKER_SIGNATURE:t};self.postMessage(r)})),d.onError((e=>{const r={type:"onError",endpoint:a,response:e,WORKER_SIGNATURE:t};self.postMessage(r)}))}break;case"SetQueryParams":{const{endpoint:t,queryParams:s}=e,o=r.get(t);o&&o.setQueryParams(s)}break;case"RemoveQueryParams":{const{endpoint:t,queryParams:s}=e,o=r.get(t);o&&o.removeQueryParams(s)}break;case"Send":{const{endpoint:t,payload:s,queryParams:o}=e,a=r.get(t);a&&a.send(s,o)}break;case"Abort":{const{endpoint:t}=e,s=r.get(t);s&&s.abort()}break;case"SetHeader":{const{endpoint:t,headerName:s,headerValue:o}=e,a=r.get(t);a&&a.setRequestHeader(s,o)}break;case"SetTimeout":{const{endpoint:s,timeout:o}=e,a=r.get(s);a&&a.onTimeout((()=>{const e={type:"onTimeout",endpoint:s,WORKER_SIGNATURE:t};self.postMessage(e)}),o)}break;default:throw new Error(JSON.stringify(e))}}self.addEventListener("message",(function(t){t.data.getReader?function(t,r){e(this,void 0,void 0,(function*(){const e=t.getReader();for(;;){const{done:t,value:s}=yield e.read();if(t)break;r(s)}}))}(t.data,a):a(t.data)}))}()})();`;try{this.fs=this.Fy(e||i),this.yc=!0,s.isTransferableStreamSupported()&&(this._d=new ReadableStream({start:n=>{this.Ec=n},cancel:()=>{this.Ec=null}}),this.fs.postMessage(this._d,[this._d]))}catch(n){n.name==="SecurityError"&&q.counters.cspErrors.count("network-worker"),this.yc=!1}}postMessage(t){t.WORKER_SIGNATURE=this.vd,this.Ec?this.Ec.enqueue(t):this.fs.postMessage(t)}Fy(t){let e=window.csURL||window.webkitURL,i=window.Blob,n=window.Worker,o=new i([t],{type:"application/javascript"}),c=e.createObjectURL(o);B.whiteListFilename(c);let l=new n(c);return l.onmessage=u=>{let{type:E,endpoint:p,WORKER_SIGNATURE:y}=u.data;if(y===this.vd){if(E==="onLoad"){let{response:m}=u.data,S=this.yd.get(p);S&&S(m)}else if(E==="onError"){let{response:m}=u.data,S=this.Ed.get(p);S&&S(m)}else if(E==="onTimeout"){let m=this.Sd.get(p);m&&m()}}},l}registerOnLoadCallback(t,e){this.yd.set(t,e)}registerOnErrorCallback(t,e){this.Ed.set(t,e)}registerOnTimeoutCallback(t,e){this.Sd.set(t,e)}isSupported(){return this.yc}static isTransferableStreamSupported(){try{let t=new ReadableStream;return structuredClone(t,{transfer:[t]}),!0}catch{return!1}}}return s})(),Tp=(()=>{class s{constructor(t){var e;this.Xt={},this.Kt=t.endpoint,this._e=t.networkWorker,this.$y=t.compressionOutputType,this.zy=t.useRetry,this._e.postMessage({type:"CreatePostRequest",endpoint:this.Kt,compressionOutputType:this.$y,useRetry:this.zy,mandatoryParameters:(e=t.mandatoryParameters)!==null&&e!==void 0?e:[]})}setQueryParams(t){this._e.postMessage({type:"SetQueryParams",endpoint:this.Kt,queryParams:t}),csArray.prototype.forEach.call(Object.keys(t),e=>{this.Xt[e]=t[e]})}getQueryParams(){return this.Xt}removeQueryParams(t){this._e.postMessage({type:"RemoveQueryParams",endpoint:this.Kt,queryParams:t}),t&&csArray.prototype.forEach.call(t,e=>{delete this.Xt[e]})}send(t,e){this._e.postMessage({type:"Send",endpoint:this.Kt,payload:t,queryParams:e})}abort(){this._e.postMessage({type:"Abort",endpoint:this.Kt})}onLoad(t){this._e.registerOnLoadCallback(this.Kt,t)}onError(t){this._e.registerOnErrorCallback(this.Kt,t)}setRequestHeader(t,e){this._e.postMessage({type:"SetHeader",endpoint:this.Kt,headerName:t,headerValue:e})}onTimeout(t,e){this._e.registerOnTimeoutCallback(this.Kt,t),this._e.postMessage({type:"SetTimeout",endpoint:this.Kt,timeout:e})}}return s})(),wr=(()=>{let s;return function(r){r.UNCOMPRESSED="0",r.GZIP="2"}(s||(s={})),s})(),$c=(()=>{class s{constructor(t){this.onError=t}}return s})(),bp=(()=>{class s{constructor(t){var e;this.Xt={},this.Sc={},this.wd=i=>{for(let n of i){let{metadata:o,events:c}=n;this.send(c,o)}},this.Kt=t.endpoint,this.Lr=t.compressionOpts,this.Jt=t.recoveryStorage,this.mandatoryParameters=(e=t.mandatoryParameters)!==null&&e!==void 0?e:[],this.vc=t.contentType,this.worker=!!t.worker,this.Jt&&this.Jt.recover(this.wd)}setQueryParams(t){Object.keys(t).forEach(e=>{this.Xt[e]=t[e]})}removeQueryParams(t){t?t.forEach(e=>{delete this.Xt[e]}):this.Xt={}}send(t,e){let i=e||{...this.Xt},n=!("ct"in i),o=this.vc==="application/json"||typeof t!="string"&&!this.Gy(t);"ct"in i||(!this.Lr||!n?i.ct=wr.UNCOMPRESSED:i.ct=this.Lr.compressionType);let c=o?JSON.stringify(t):t,l=Object.keys(i).map(E=>`${encodeURIComponent(E)}=${encodeURIComponent(i[E])}`).join("&"),u=`${this.Kt}?${l}`;if(Tc(this.mandatoryParameters,E=>i[E]==null)){et.warn(`[${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on ${u}`);return}this.Lr&&n&&typeof c=="string"?this.Lr.compressor(c,this.Lr.compressionOutputType,E=>this.Td(u,i,E)):this.Td(u,i,c)}onLoad(t){this.qi=t}onError(t){this.Vr=t}onTimeout(t,e){this.fi=t,this.Ur=e}abort(){this.bd&&this.bd()}setRequestHeader(t,e){this.Sc[t]=e}getQueryParams(){return this.Xt}Gy(t){return t&&t.byteLength!==void 0}Td(t,e,i){let n=new XMLHttpRequest,o=Object.keys(e).map(c=>`${encodeURIComponent(c)}=${encodeURIComponent(e[c])}`).join("&");n.open("POST",t),this.vc&&n.setRequestHeader("Content-Type",this.vc),n.onload=()=>{if(this.Jt&&this.Jt.recover(this.wd),this.qi){let c={params:e,responseText:n.responseText,status:n.status};this.qi(c)}},n.onerror=()=>{this.Jt&&this.Jt.save({key:o,metadata:e,events:i}),this.Vr&&this.Vr({params:e})},this.Ur&&this.fi&&(n.timeout=this.Ur,n.ontimeout=()=>{this.fi()}),this.bd=()=>n.abort(),Object.keys(this.Sc).forEach(c=>{n.setRequestHeader(c,this.Sc[c])}),n.send(i)}}return s})(),zc=(()=>{class s{constructor(t){this._c=t,this._e=new wp(this._c)}create(t,e,i,n,o=[]){if(this._e.isSupported()&&e)return new Tp({networkWorker:this._e,endpoint:t,compressionOutputType:i,useRetry:!!n,mandatoryParameters:o});{let c=i?{compressor:this._c.compress,compressionOutputType:i,compressionType:this._c.algorithm}:void 0;return new bp({endpoint:t,compressionOpts:c,recoveryStorage:n})}}}return s})(),Ap=(()=>{class s{constructor(t,e,i,n,o){this.I=t,this.R=e,this.Ke=i,this.Et=n,this.f=o}get(){return{exclusion:this.Ke.getAppliedTrackingDraw(),visitor:this.I.getVisitor(),session:this.R.getSession(),cvars:this.Et.getCustomVariablesSession()}}apply(t){t&&(t.exclusion?this.exclude():this.include(t))}exclude(){this.Ke.exclude(this.f),this.I.removeVisitor(),this.R.removeSession(),this.Et.removeCustomVariablesSession()}include(t){this.Ke.removeExclusion(),this.I.setVisitor(t.visitor),t.session?this.R.setSession(t.session):this.R.removeSession(),t.cvars?this.Et.setCustomVariableSession(t.cvars):this.Et.removeCustomVariablesSession()}}return s})(),dr=".",so="__DOT__",Rp=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.[0-1])?(\.\b(x|[0-9a-fA-F]{12})\b)?$/,Gc="x";function Cp(s){let[r,t,e,i,n,o,c,l,u]=Mp(s);return{id:r,creationTimestamp:Number(t),visitsCount:Number(e),hitTimestamp:Number(i),lastVisitTimestamp:Number(n),appliedTrackingDraw:Number(o),expires:Number(c),allowSubdomains:l===void 0?void 0:!!Number(l),identityPrint:u===void 0||u===Gc?null:u}}function Ip(s){var r;return csArray.prototype.join.call(csArray.prototype.map.call(csArray.prototype.map.call([s.id,s.creationTimestamp,s.visitsCount,s.hitTimestamp,s.lastVisitTimestamp,s.appliedTrackingDraw,s.expires,s.allowSubdomains?1:0,(r=s.identityPrint)!==null&&r!==void 0?r:Gc],csString),Op),dr)}function Pp(s){return Rp.test(s)}function Op(s){return csString.prototype.replace.call(s,/\./g,so)}function Np(s){return csString.prototype.replace.call(s,new csRegExp(so,"g"),dr)}function Mp(s){return csString.prototype.indexOf.call(s,so)!==-1?csArray.prototype.map.call(csString.prototype.split.call(s,dr),Np):csString.prototype.split.call(s,dr)}var V=(()=>{let s;return function(r){r.QUOTA_REACHED="X",r.RECORDING_RULES_TARGETING="8",r.ANALYTICS_ONLY_RULES_TARGETING="9",r.ANALYTICS_ONLY="0",r.RECORDING_GLOBAL_SAMPLING="5",r.RECORDING_TEMPORARILY="T",r.RECORDING_URL_SAMPLING="6",r.RECORDING_ETR_SAMPLING="7",r.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED="B",r.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN="W"}(s||(s={})),s})(),$t=(()=>{let s;return function(r){r.ETR_OFF="0",r.ETR_ON="1"}(s||(s={})),s})(),ss=(()=>{let s;return function(r){r.ETR_LEGACY="0",r.ETR_SESSION="1",r.ETR_PAGE="2"}(s||(s={})),s})(),Jt=(()=>{let s;return function(r){r.ETR_DISABLED="0",r.ETR_PENDING="1",r.ETR_SAVED_PAGE="2",r.ETR_SAVED_SESSION="3",r.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),Tn=(()=>{let s;return function(r){r.UNNECESSARY="U",r.NOT_EXPRESSED="N",r.WITHDRAWN="W",r.GRANTED="G"}(s||(s={})),s})();var kp=(()=>{let s;return function(r){r.ETR_DISABLED="0",r.ETR_PENDING="1",r.ETR_SAVED_PAGE="2",r.ETR_SAVED_SESSION="3",r.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),qc=/^(\d+\.[01356789TBWX](\.[01UNWG])?(\.[39])?)(\.\d+)?$/,Wc=".";function Dp(s){return csArray.prototype.join.call([s.pageNumber,s.collectState,s.replayConsent,s.etrStatus],Wc)}function xp(s){if(!io(s))return null;let r=bn(s);return r!==null?Yc(r):null}function Yc(s){var r,t;let[e,i,n,o]=csString.prototype.split.call(s,Wc);return{collectState:i,replayConsent:(r=n)!==null&&r!==void 0?r:Tn.UNNECESSARY,etrStatus:(t=o)!==null&&t!==void 0?t:kp.ETR_NOT_SAVED_SESSION,pageNumber:parseInt(e,10)}}function io(s){return qc.test(s)}function bn(s){if(!s)return null;let r=(()=>{var t;return(t=csString.prototype.match.call(s,qc))===null||t===void 0?void 0:t[1]})();return r!=null?r:null}var _e="_cs_ex",ga=2592e6,Lp=/^[0-9]+$/,Vp=(()=>{class s{constructor(t,e,i){this.f=t,this.N=e,this.X=i}onCookieToSet(t){this.gi=t}onCookieToRemove(t){this.mi=t}get(){return this.f.cookielessTrackingEnabled?Number(this.X.getItem(_e)):Number(this.N.get(_e))}set(t){var e;this.f.cookielessTrackingEnabled?this.X.setItem(_e,t):(this.N.set(_e,t,ga),(e=this.gi)===null||e===void 0||e.call(this,_e,t,ga))}remove(){var t;this.f.cookielessTrackingEnabled?this.X.removeItem(_e):(this.N.delete(_e),(t=this.mi)===null||t===void 0||t.call(this,_e))}static isValidExclusionString(t){return Lp.test(t)}}return s})(),ze="_cs_cvars",Up=(()=>{class s{constructor(t,e,i){this.f=t,this.N=e,this.X=i}onCookieToSet(t){this.gi=t}onCookieToRemove(t){this.mi=t}get(){return this.f.cookielessTrackingEnabled?this.X.getItem(ze):this.N.get(ze)}set(t){var e;this.f.cookielessTrackingEnabled?this.X.setItem(ze,t):(this.N.set(ze,t),(e=this.gi)===null||e===void 0||e.call(this,ze,t))}remove(){var t;this.f.cookielessTrackingEnabled?this.X.removeItem(ze):(this.N.delete(ze),(t=this.mi)===null||t===void 0||t.call(this,ze))}static isValidCustomVarString(t){return typeof t=="string"}}return s})();function Oe(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}var Tr=(()=>{class s{constructor(){this.set=new Set}add(t){this.set.add(t),this.set.size===1&&csSetTimeout(()=>{this.set.clear()})}has(t){return this.set.has(t)}del(t){this.set.delete(t)}clear(){this.set.clear()}values(){return ns(this.set)}get count(){return this.set.size}}return s})(),jp=(()=>{class s extends Tr{constructor(t="high"){super(),this.Ky=t}add(t){this.set.add(t),this.set.size===1&&jt(()=>{this.set.clear()},this.Ky)}}return s})();function br(s,r=!1){let t=new Tr;return{push(e){t.count===0&&(r?jt:csSetTimeout)(()=>{s(t.values()),t.clear()}),t.add(e)}}}function Hp(){let s=new Error,r=s.stack?csArray.prototype.filter.call(csString.prototype.split.call(s.stack,`
`),e=>e!=="Error"&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(e),"promise ")===-1&&csString.prototype.indexOf.call(e,"[native code]")===-1&&csString.prototype.indexOf.call(e,"(<anonymous>)")===-1):[];if(r.length===0)return"";let t=Fp(r);return t===""||(r=$p(r,t),r.length===0)?"":Xc(r[0])}function Bp(s){return csString.prototype.indexOf.call(s,"@")!==-1}function Fp(s){return s.length>0?Xc(s[0]):""}function $p(s,r){return csArray.prototype.filter.call(s,t=>csString.prototype.indexOf.call(t,r)===-1)}function Xc(s){let r="",t;Bp(s)?t=new csRegExp("@(.+):(\\d+):(\\d+)$"):t=new csRegExp("\\((.+):(\\d+):(\\d+)\\)");let e=t.exec(s);return e&&(r=e[1]),r}var zp=s=>s;function Gp(s,r,t,e){let i=csSymbol.for("propertyProxy");Object.defineProperty(s,r,{get(){var n;if(this[i])return this[i];let o=(n=t.get)===null||n===void 0?void 0:n.apply(this);return typeof o!="object"?o:(typeof Proxy=="function"?this[i]=new Proxy(o,{get(c,l){let u=Reflect.get(c,l);return typeof u=="function"?u.bind(c):u},set:(c,l,u)=>{let E=c[l],p=Reflect.set(c,l,u);return e.forEach(y=>y(this,u,E,"subproperty")),p}}):this[i]=o,this[i])},set(){var n;let o=arguments,c=this[r],l=(n=t.set)===null||n===void 0?void 0:n.apply(this,o);delete this[i];try{e.forEach(u=>u(this,o[0],c,"property"))}catch(u){et.error(u)}return l}})}function qp(s,r,t){let e=Wp(s,r);if(!e)return null;let i=(n,o,c,l)=>t(n,o,c,l);return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function Wp(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,r);return i?i.configurable?(s[t]=e,Gp(s,r,i,e),e):(et.warn(`Cannot intercept non configurable property '${csString(r)}' of object '${s}'`),null):(et.warn(`Cannot intercept property '${csString(r)}' because it does not exist directly on the target object '${s}'`),null)}function Yp(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=Object.getOwnPropertyDescriptor(s,r);if(!(e!=null&&e.writable)&&!(e!=null&&e.set))return et.warn(`Cannot intercept read only function '${csString(r)}' of object '${s}'`),null;let i=new Set;s[t]=i;let n=s[r];if(typeof n=="function"){let o=function(){let c=arguments,l=[];try{l=csArray.prototype.map.call(ns(i),E=>E(c))}catch(E){et.critical(E)}let u=n.apply(this,c);return _s(()=>{let E={result:u,context:this,args:c};csArray.prototype.forEach.call(l,p=>p(E))},de.MonkeyPatch),u};Kp(o,n),s[r]=o}return i}function we({target:s,methodName:r,hook:t,hookPrepareArgs:e=zp,options:i}){let n=Yp(s,r);if(!n)return null;let o=c=>{let l=e(c),u=i!=null&&i.withCallerName?{callerName:Hp()}:{};return E=>t({...E,...u,args:l})};return{activate:()=>{n.add(o)},deactivate:()=>{n.delete(o)}}}function Xp(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,r);return i?i.configurable?(s[t]=e,Object.defineProperty(s,r,{set(){var n;let o=this[r],c=arguments;return _s(()=>{e.forEach(l=>l(this,c[0],o,"property"))},de.MonkeyPatch),(n=i.set)===null||n===void 0?void 0:n.apply(this,c)}}),e):(et.warn(`Cannot intercept read only property '${csString(r)}' of object '${s}'`),null):e}function pr(s,r,t){let e=Xp(s,r);if(!e)return null;let i=(n,o,c)=>t(n,o,c,"property");return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function Kp(s,r){s.prototype=r.prototype,Object.defineProperty(s,"toString",{value:()=>r.toString()})}var Xs=(()=>{var s;class r{static Jy(e){this.Ds.forEach(i=>{e(i,"initial")})}static jr(e){if(this.D||(this.D=new csMutationObserver(i=>{for(let n of i)n.target.isConnected&&X(n.addedNodes,this.Qy),X(n.removedNodes,this.Zy)})),csArray.prototype.push.call(this.Te,e),!this.z){this.z=!0,this.D.observe(document,this.Hr);for(let i of ms.getAllShadowHosts(document)){let n=csElementshadowRoot.apply(i);this.Ds.add(n),this.D.observe(n,this.Hr)}this.Rc||(this.Rc=we({target:Element.prototype,methodName:"attachShadow",hook:i=>i.result.isConnected&&this.Cd(i.result)})),this.Rc.activate()}this.Jy(e)}static Br(e){var i,n;this.Te=csArray.prototype.filter.call(this.Te,o=>o!==e),this.Te.length===0&&(this.Te=[],this.z=!1,(i=this.D)===null||i===void 0||i.disconnect(),(n=this.Rc)===null||n===void 0||n.deactivate(),this.Ds.clear())}constructor(e){this.w=e,this.w=rs("DocumentShadowRootObserver:callback",(i,n)=>e(i,n))}get shadowRoots(){return ns(s.Ds)}takeRecords(){var e,i;return(i=(e=s.D)===null||e===void 0?void 0:e.takeRecords())!==null&&i!==void 0?i:[]}observe(){ms.isSupported()&&s.jr(this.w)}disconnect(){ms.isSupported()&&s.Br(this.w)}}return s=r,r.Te=[],r.Ds=new Set,r.z=!1,r.Hr={childList:!0,subtree:!0},r.Cd=t=>{s.Ds.has(t)||(s.D.observe(t,s.Hr),s.Ds.add(t),X(s.Te,e=>e(t,"added")))},r.Qy=t=>{Zt(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(s.Cd)},r.Zy=t=>{t.isConnected||Zt(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(e=>{s.Ds.has(e)&&(s.Ds.delete(e),X(s.Te,i=>i(e,"removed")))})},Z([N()],r.prototype,"observe",null),Z([N()],r.prototype,"disconnect",null),r})(),ma={childList:!0,subtree:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,attributeOldValue:!0},ge=(()=>{var s;class r{static setShadowRootFilter(e){csArray.prototype.push.call(s.shadowRootFilters,e)}static Cc(e){if(s.shadowRootFilters.length>0&&mi(e))for(let i=0;i<s.shadowRootFilters.length;i++){let n=s.shadowRootFilters[i];if(n(e))return}this.observedTargets.add(e),this.mutationObserver.observe(e,ma)}static disconnectShadowRoot(e){this.observedTargets.has(e)&&(this.observedTargets.delete(e),this.isRefreshing||(this.isRefreshing=!0,jt(()=>{this.isRefreshing=!1;let i=this.mutationObserver.takeRecords();i.length&&s.mutationCallback(i),this.mutationObserver.disconnect(),this.observedTargets.forEach(n=>{this.mutationObserver.observe(n,ma)})})))}static observe(e,i){csArray.prototype.push.call(this.callbacks,e),i&&csArray.prototype.push.call(this.shadowRootCallbacks,i),this.started?i&&csArray.prototype.forEach.call(ms.getAllShadowHosts(document),n=>i(csElementshadowRoot.apply(n),"initial")):(this.mutationObserver=new csMutationObserver(this.mutationCallback),this.Cc(document),this.shadowRootObserver=new Xs(this.onShadowRoot),this.shadowRootObserver.observe(),this.started=!0,X(this.shadowRootObserver.shadowRoots,n=>{this.Cc(n)}))}static disconnect(e,i){var n,o;this.callbacks=csArray.prototype.filter.call(this.callbacks,c=>c!==e),i&&(this.shadowRootCallbacks=csArray.prototype.filter.call(this.shadowRootCallbacks,c=>c!==i)),this.callbacks.length===0&&(this.callbacks=[],this.shadowRootCallbacks=[],s.shadowRootFilters=[],(n=this.shadowRootObserver)===null||n===void 0||n.disconnect(),(o=this.mutationObserver)===null||o===void 0||o.disconnect(),this.observedTargets.clear(),this.started=!1)}constructor(e,i){this.w=e,this.Id=i;let n=br(o=>e(o,this),!0);this.w=rs("DocumentMutationObserver:callback",o=>{X(o,c=>n.push(c))})}get shadowRoots(){var e,i;return(i=(e=s.shadowRootObserver)===null||e===void 0?void 0:e.shadowRoots)!==null&&i!==void 0?i:[]}takeRecords(){var e;let i=(e=s.mutationObserver)===null||e===void 0?void 0:e.takeRecords(),n=s.shadowRootObserver.takeRecords();return i!=null&&i.length&&n.length?Mu(i,n):i!=null?i:n}observe(){s.observe(this.w,this.Id)}disconnect(){s.disconnect(this.w,this.Id)}}return s=r,r.callbacks=[],r.shadowRootCallbacks=[],r.started=!1,r.observedTargets=new Set,r.shadowRootFilters=[],r.mutationCallback=t=>{mt.mutations.count.increase(t.length),csArray.prototype.forEach.call(s.callbacks,e=>e(t,s.mutationObserver))},r.onShadowRoot=(t,e)=>{X(s.shadowRootCallbacks,i=>i(t,e)),e!=="removed"?s.Cc(t):s.disconnectShadowRoot(t)},r.isRefreshing=!1,Z([N()],r.prototype,"observe",null),Z([N()],r.prototype,"disconnect",null),r})(),Gr;function It(s){if(Gr||(Gr=document.createElement("div")),!(!!s&&R(s)))return et.warn(`isValidSelector: invalid selector provided '${s}'`),!1;try{return Gt.call(Gr,s),!0}catch{return et.warn(`isValidSelector: invalid selector provided '${s}'`),!1}}function Gs(s,r){if(oa)return oa.call(s,r);let t=s;do{if(Gt.call(t,r))return t;t=t==null?void 0:t.parentElement}while(t!==null&&t.nodeType===1);return null}var re=(()=>{class s{get selectors(){return this.Fe===""?null:this.Fe}constructor(t,e={closest:!1}){this.w=t,this.bt=e,this.Fe="",this.Fr=new Tr,this.To=ws(i=>{if(this.Fe==="")return;let n=[];for(let o of Wn(i,c=>c.addedNodes)){if(!(td(o)||this.bt.closest&&cr(o)))continue;let c=this.bt.closest?this.tE(o,this.Fe):this.findMatchingElements(o,this.Fe);ia(c,n)}n.length&&this.w(n,"added")},"SelectorObserver.processMutations"),this.eE=(i,n)=>{if(this.Fe===""||n!=="added")return;let o=this.findMatchingElements(i,this.Fe);o.length&&this.w(o,"added")},this.G=new ge(this.To,this.eE)}observe(t){this.Fe===""?this.G.observe():this.Fe+=",",this.Fe+=t;let e=this.findMatchingElements(document,t);for(let i of this.G.shadowRoots){let n=this.findMatchingElements(i,t);ia(n,e)}e.length&&(X(e,i=>{this.Fr.add(i)}),this.w(e,"initial"))}processPendingMutations(){this.To(this.G.takeRecords())}disconnect(){this.G.disconnect(),this.Fr.clear(),this.Fe=""}tE(t,e){let i=[];if(cr(t)){if(t.parentElement){let n=Gs(t.parentElement,e);n&&csArray.prototype.push.call(i,n)}return csArray.prototype.filter.call(i,n=>this.Fr.has(n)===!1)}else{if(Ie(t)){let n=Gs(t,e);if(n)return csArray.prototype.push.call(i,n),csArray.prototype.filter.call(i,o=>this.Fr.has(o)===!1)}return this.findMatchingElements(t,e)}}findMatchingElements(t,e){let i=gi(window.csquerySelectorAll[t.nodeType].call(t,e));return ct(t)&&Gt.call(t,e)&&csArray.prototype.push.call(i,t),csArray.prototype.filter.call(i,n=>this.Fr.has(n)===!1)}}return Z([N()],s.prototype,"observe",null),Z([N()],s.prototype,"disconnect",null),Z([Tt("SelectorObserver.findMatchingElements")],s.prototype,"findMatchingElements",null),s})();function Jp(){let s=csSymbol.for("propStore");return{getStore(r){return r[s]},get(r,t){let e=r[s];return e==null?void 0:e[t]},set(r,t,e){let i=r[s];i||(i={},r[s]=i),i[t]=e}}}var Zi=Jp(),Y=(()=>{let s;return function(r){function t(l,u,E){var p;if(typeof Node!="undefined"&&l instanceof Node)Zi.set(l,u,E);else{let y=l;(p=y.props)!==null&&p!==void 0||(y.props={}),y.props[u]=E}}r.setProperty=t;function e(l,u){var E;return typeof Node!="undefined"&&l instanceof Node?Zi.get(l,u):(E=l.props)===null||E===void 0?void 0:E[u]}r.getProperty=e;function i(l){return typeof Node!="undefined"&&l instanceof Node?Zi.getStore(l):l.props}r.getProperties=i;function n(l,u){let E=null;return o(l,(p,y,m)=>u(p)&&(E=p)&&!!m()),E}r.findDescendant=n;function o(l,u){c(l,void 0,u)}r.traverse=o;function c(l,u,E){let p=!1;if(E(l,u,()=>p=!0),p)return;let m=l.shadowRoot;m&&c(m,l,E);let S=l.children;if(S!=null&&S.length){for(let I of S)if(I&&(c(I,l,E),p))break}}}(s||(s={})),s})(),x=(()=>{let s;return function(r){let t;(function(v){v[v.NotMasked=0]="NotMasked",v[v.Parent=1]="Parent",v[v.Child=2]="Child"})(t=r.MaskedElementState||(r.MaskedElementState={})),r.maskedProp="masked",r.maskedAttributeProp="maskedAttribute";function e(v){return ys(v)&&"Attributes"in v&&"PIISelectors"in v?v.Attributes instanceof Array&&v.PIISelectors instanceof Array:!1}r.isSelectorUserInput=e;function i(v){if(!ys(v)||v===null)throw new Error("Command misuse: setPIISelectors");return"Attributes"in v||(v.Attributes=[]),"PIISelectors"in v||(v.PIISelectors=[]),v}r.sanitizeSelectorUserInput=i;function n(v){var _;return(_=Y.getProperty(v,r.maskedProp))!==null&&_!==void 0?_:{state:t.NotMasked}}r.getMaskedElementDetails=n;function o(v){var _;return(_=Y.getProperty(v,r.maskedAttributeProp))!==null&&_!==void 0?_:{attributes:[]}}r.getMaskedAttributeDetails=o;function c(v){let _=Y.getProperty(v,r.maskedProp);return(_==null?void 0:_.state)===t.Parent}r.isMaskedElement=c;function l(v){let _=Y.getProperty(v,r.maskedProp);return(_==null?void 0:_.state)===t.Child}r.isMaskedElementChild=l;function u(v,_){let D=Y.getProperty(v,r.maskedAttributeProp);return((D==null?void 0:D.attributes)==null?void 0:csArray.prototype.indexOf.call(D==null?void 0:D.attributes,_))>-1}r.isMaskedAttribute=u;function E(v,_){Y.setProperty(v,r.maskedProp,_)}r.setMaskedElementProperty=E;function p(v){Y.setProperty(v,r.maskedProp,void 0)}r.unsetMaskedElementProperty=p;function y(v,_){Y.setProperty(v,r.maskedAttributeProp,_)}r.setMaskedAttributeProperty=y;function m(v,_){let D=csArray.prototype.filter.call(v.PIISelectors,j=>It(j));_.elementSelector.length>0&&csArray.prototype.push.call(D,...csString.prototype.split.call(_.elementSelector,","));let O=P([...D]),A={elementSelector:csArray.prototype.join.call(O,","),attrSelector:_.attrSelector,attrSelectors:_.attrSelectors};return csArray.prototype.forEach.call(v.Attributes,j=>{j!=null&&j.attrName&&(j!=null&&j.selector)&&It(j.selector)&&!S(A.attrSelectors,j)&&csArray.prototype.push.call(A.attrSelectors,j)}),A.attrSelector=I(A.attrSelectors),A}r.getComputedSelectorSettings=m;function S(v,_){return csArray.prototype.some.call(v,D=>D.selector===_.selector&&D.attrName===_.attrName)}function I(v){let _="";return csArray.prototype.forEach.call(v,D=>{let O=csString.prototype.split.call(D.selector,",");csArray.prototype.forEach.call(O,A=>{It(A)&&(_&&(_+=","),_+=A)})}),_}function P(v){if(v.length<=1)return v;let _=[];for(let D of v){let O=csString.prototype.split.call(D,",");for(let A of O)csArray.prototype.indexOf.call(_,A)===-1&&csArray.prototype.push.call(_,A)}return _}}(s||(s={})),s})(),Ne=(()=>{class s{constructor(){this.oe=[],this.isStarted=!1}produceEvent(t){var e;this.isStarted&&(t.timestamp=(e=t.timestamp)!==null&&e!==void 0?e:M.now(),t.timestamp==null&&(t.timestamp=M.now()),csArray.prototype.forEach.call(this.oe,i=>i(t)))}onStop(){}start(){this.isStarted||(this.isStarted=!0,this.onStart())}stop(){this.isStarted&&(this.isStarted=!1,this.onStop(),this.oe=[])}stopForInactivity(){this.isStarted&&(this.isStarted=!1,this.onStop())}subscribe(t){return csArray.prototype.push.call(this.oe,t),()=>{let e=csArray.prototype.indexOf.call(this.oe,t);csArray.prototype.splice.call(this.oe,e,1)}}}return s})(),Kc=1,ci=csSymbol("nodeIdentifier");function Qp(s=!1){s&&(Kc=1),ci=csSymbol("nodeIdentifier")}function Zp(s){return Y.getProperty(s,ci)}function rt(s){let r=Y.getProperty(s,ci);return r!=null?r:(Y.setProperty(s,ci,Kc++),Y.getProperty(s,ci))}var tf=(()=>{class s extends Ne{constructor(t){super(),this.j=null,this.bo=null,this.D=null,this.xs=null,this.Pd=["value","checked","src","data","alt"],this.Ao={state:x.MaskedElementState.Child},this.sE=e=>{for(let i of e){if(x.isMaskedElement(i.target)||x.isMaskedElementChild(i.target))for(let n=0;n<i.addedNodes.length;n+=1){let o=i.addedNodes[n];x.isMaskedElement(o)||x.isMaskedElementChild(o)||ct(o)&&this.Od(o)}for(let n=0;n<i.removedNodes.length;n+=1){let o=i.removedNodes[n];nt.isConnected(o)||this.Nd(o)}}},this.iE=t}setMaskedElementSettings(t){this.gs=t}startIdentifier(){this.isStarted||(this.isStarted=!0,this.onStart())}stopIdentifier(){return this.isStarted=!1,this.onStop()}start(){}stop(){}onStart(){var t,e,i,n;this.gs||(et.error("maskedElementSettings not initialized","MaskedElementIdentifier.start"),this.gs={elementSelector:"",attrSelector:"",attrSelectors:[]});let{elementSelector:o,attrSelector:c,attrSelectors:l}=this.gs;(t=this.xs)!==null&&t!==void 0||(this.xs=this.rE()),o.length!==0&&((e=this.j)!==null&&e!==void 0||(this.j=this.nE()),this.j.observe(o)),c.length!==0&&((i=this.bo)!==null&&i!==void 0||(this.bo=this.oE(l)),this.bo.observe(c)),(n=this.D)!==null&&n!==void 0||(this.D=new ge(this.sE,(u,E)=>E==="added"&&this.aE(u))),this.D.observe(),csSetTimeout(this.iE)}onStop(){var t,e,i;this.j&&(this.Nd(document),this.j.disconnect()),(t=this.bo)===null||t===void 0||t.disconnect(),(e=this.D)===null||e===void 0||e.disconnect(),(i=this.xs)===null||i===void 0||i.disconnect()}rE(){return window.ResizeObserver?new ResizeObserver(t=>{csArray.prototype.forEach.call(t,e=>{this.resizeObserverCallback(e)})}):null}nE(){return new re(t=>{csArray.prototype.forEach.call(t,e=>{this.cE(e)?this.Od(e):(this.lE(e),this.hE(e))})})}oE(t){return new re(e=>{csArray.prototype.forEach.call(e,i=>this.uE(i,t))})}resizeObserverCallback(t){let e=t.target.getBoundingClientRect(),i=x.getMaskedElementDetails(t.target);if(i.state!==x.MaskedElementState.Parent||e.width===i.width&&e.height===i.height)return;let n={state:x.MaskedElementState.Parent,width:e.width,height:e.height};x.setMaskedElementProperty(t.target,n),this.produceEvent({type:"ResizeMaskedElement",target:rt(t.target),width:e.width,height:e.height})}hE(t){!this.xs||!ct(t)||vr(t)||this.xs.observe(t)}cE(t){let e=csNodeparentNode.apply(t);return e?x.isMaskedElement(e)||x.isMaskedElementChild(e):mi(t)?x.isMaskedElement(t.host)||x.isMaskedElementChild(t.host):!1}aE(t){(x.isMaskedElement(t.host)||x.isMaskedElementChild(t.host))&&x.setMaskedElementProperty(t,this.Ao)}Nd(t){Zt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{x.unsetMaskedElementProperty(i)})}lE(t){let e=t.getBoundingClientRect(),i={state:x.MaskedElementState.Parent,width:e.width,height:e.height};x.setMaskedElementProperty(t,i),this.dE(t),Zt(t).visitAll(n=>n!=t&&x.setMaskedElementProperty(n,this.Ao))}Od(t){x.setMaskedElementProperty(t,this.Ao),Zt(t).visitAll(e=>e!=t&&x.setMaskedElementProperty(e,this.Ao))}dE(t){var e;let i=(e=Y.getProperty(t,x.maskedAttributeProp))!==null&&e!==void 0?e:{attributes:[]};for(let n=0;n<this.Pd.length;n+=1){let o=this.Pd[n];csArray.prototype.indexOf.call(i.attributes,o)===-1&&csArray.prototype.push.call(i.attributes,o)}i.attributes.length!==0&&x.setMaskedAttributeProperty(t,i)}uE(t,e){var i;let n=(i=Y.getProperty(t,x.maskedAttributeProp))!==null&&i!==void 0?i:{attributes:[]};for(let o=0;o<t.attributes.length;o+=1){let c=t.attributes[o].name;csArray.prototype.indexOf.call(n.attributes,c)===-1&&csArray.prototype.some.call(e,l=>csString.prototype.indexOf.call(l.attrName,c)>-1&&Gt.call(t,l.selector))&&csArray.prototype.push.call(n.attributes,c)}n.attributes.length!==0&&x.setMaskedAttributeProperty(t,n)}}return Oe([N()],s.prototype,"resizeObserverCallback",null),s})(),Te=(()=>{let s;return function(r){r.ANONYMIZED_TEXT_STATUS_PROP="anonymizationStatus",r.WHITELISTED_STATUS="whitelisted";function t(n){return Y.getProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP)===r.WHITELISTED_STATUS}r.isWhitelistedElement=t;function e(n){Y.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,r.WHITELISTED_STATUS)}r.whitelistElement=e;function i(n){Y.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,void 0)}r.removeWhitelistElement=i}(s||(s={})),s})(),ef=(()=>{class s{constructor(){this.Ic=0,this.V=!1,this.Md="data-cs-capture",this.Ls=t=>{for(let e of t){if(Te.isWhitelistedElement(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];Te.isWhitelistedElement(n)||ct(n)&&this.kd(n)}for(let i=0;i<e.removedNodes.length;i+=1){let n=e.removedNodes[i];nt.isConnected(n)||this.Dd(n)}}}}start(){this.Ic++,!this.V&&(this.V=!0,this.pE())}pE(){this.j||(this.j=new re(e=>X(e,i=>this.kd(i))));let t=this.Pc?`[${this.Md}], ${this.Pc}`:`[${this.Md}]`;this.j.observe(t),this.D||(this.D=new ge(this.Ls,(e,i)=>i==="added"&&this.fE(e))),this.D.observe()}stop(){this.V&&(this.Ic--,this.Ic===0&&(this.V=!1,this.gE()))}gE(){this.j&&(this.Dd(document),this.j.disconnect()),this.D&&this.D.disconnect()}setWhitelistedElementsSelector(t,e=!0){if(It(t))this.Pc=t;else if(e)throw new Error("Command misuse: setCapturedElementsSelector")}getWhitelistedElementsSelector(){return this.Pc}kd(t){Zt(t).visitAll(e=>{Te.whitelistElement(e)})}fE(t){Te.isWhitelistedElement(t.host)&&Te.whitelistElement(t)}Dd(t){Zt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{Te.removeWhitelistElement(i)})}}return s})(),Je=(()=>{let s;return function(r){r.EDITABLE_NODE_PROP="editableNode";function t(n){return Y.getProperty(n,r.EDITABLE_NODE_PROP)===!0}r.isEditableNode=t;function e(n){Y.setProperty(n,r.EDITABLE_NODE_PROP,!0)}r.markEditableNode=e;function i(n){Y.setProperty(n,r.EDITABLE_NODE_PROP,void 0)}r.unmarkEditableNode=i}(s||(s={})),s})(),sf=(()=>{class s{constructor(){this.j=null,this.D=null,this.V=!1,this.Ls=t=>{for(let e of t)if(Je.isEditableNode(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];if(!Je.isEditableNode(n)){if(cr(n)||zu(n)){Je.markEditableNode(n);continue}ct(n)&&this.xd(n)}}}}start(){this.V||(this.V=!0,this.j=new re(t=>X(t,e=>{this.xd(e)})),this.j.observe("[contenteditable]"),this.D=new ge(this.Ls,(t,e)=>e==="added"&&this.mE(t)),this.D.observe())}stop(){var t,e;this.V&&(this.V=!1,(t=this.j)===null||t===void 0||t.disconnect(),this.j=null,(e=this.D)===null||e===void 0||e.disconnect(),this.D=null)}xd(t){Zt(t).visitAll(e=>{Je.markEditableNode(e)})}mE(t){Je.isEditableNode(t.host)&&Je.markEditableNode(t)}}return s})(),rf=(()=>{let s;return function(r){r.ENCRYPTED_NODE_PROP="toEncrypt";function t(n){return Y.getProperty(n,r.ENCRYPTED_NODE_PROP)===!0}r.shouldEncrypt=t;function e(n){Y.setProperty(n,r.ENCRYPTED_NODE_PROP,!0)}r.markEncryptedNode=e;function i(n){Y.setProperty(n,r.ENCRYPTED_NODE_PROP,void 0)}r.unmarkEncryptedNode=i}(s||(s={})),s})();var nf="spki",ya="RSA-OAEP",of="SHA-256",Ea="AES-CTR",af="SHA-1",Sa=190,is=(()=>{let s;return function(r){var t;let e=!1,i=null,n,o=typeof TextEncoder!="undefined"?new TextEncoder:null,c;r.crypto=(t=tt.crypto)===null||t===void 0?void 0:t.subtle,r.MAX_DIGEST_INPUT_SIZE=100;function l(){return!e}r.isKeyImported=l;function u(){return i}r.getCryptoKey=u;function E(){var O,A;return((A=(O=tt.self.crypto)===null||O===void 0?void 0:O.subtle)===null||A===void 0?void 0:A.encrypt)!=null&&tt.self.CryptoKey!=null}r.isSupported=E;async function p(O){n=r.crypto.importKey(nf,$n(O),{name:ya,hash:of},!1,["encrypt"]).catch(()=>(e=!0,null)),i=await n,n=void 0,i||et.warn(`Fail to import public key '${O}'`)}r.importKey=p;async function y(O){if(!E()||e)return null;await n;let A=yr(O);A.byteLength>Sa&&(A=A.slice(0,Sa));try{let j=await r.crypto.encrypt({name:ya},i,A);return Xo(j)}catch{return null}}r.asymmetricEncrypt=y;async function m(O,A){if(!E()||e)return null;let j={counter:A.initializationVector,name:Ea,length:64},it=o.encode(O);try{let dt=await r.crypto.encrypt(j,A.cryptoKey,it);return Xo(dt)}catch{return null}}r.symmetricEncrypt=m;async function S(O){let A=await I(O);if(!A)throw new Error("Export secret failed");let j=await y(A);if(!j)throw new Error("Encrypt secret failed");return j}r.encryptSecret=S;async function I(O){var A;if(!E())return null;try{return(A=(await r.crypto.exportKey("jwk",O)).k)!==null&&A!==void 0?A:null}catch{return null}}async function P(){if(!E()||e)return null;try{return{cryptoKey:await r.crypto.generateKey({name:Ea,length:128},!0,["encrypt","decrypt"]),initializationVector:tt.crypto.getRandomValues(new Uint8Array(16))}}catch{return null}}r.generateSymmetricKey=P;function v(O){c=O}r.setDigestSalt=v;async function _(O){O=csString.prototype.toLocaleLowerCase.call(csString.prototype.trim.call(O)),c&&(O=`${O}:${c}`);let A=o.encode(O);try{let j=await r.crypto.digest(af,A);return rr(j)}catch{return null}}r.digest=_;function D(){return tt.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"])}r.generateKeyPair=D}(s||(s={})),s})(),ve=(()=>{let s;return function(r){r.REGEX="regex",r.START="start",r.NOT_START="not-start",r.END="end",r.NOT_END="not-end",r.CONTAIN="contain",r.NOT_CONTAIN="not-contain",r.EXACT="exact",r.NOT_EXACT="not-exact"}(s||(s={})),s})(),Ge=(()=>{let s;return function(r){r.START="start",r.NOT_START="not-start",r.END="end",r.NOT_END="not-end",r.CONTAIN="contain",r.NOT_CONTAIN="not-contain",r.EXACT="exact",r.NOT_EXACT="not-exact"}(s||(s={})),s})(),us=(()=>{let s;return function(r){r.replayRecordingUnmaskedUrlRegex="replayRecordingUnmaskedUrlRegex",r.replayRecordingMaskedUrlRegex="replayRecordingMaskedUrlRegex",r.replayRecordingUnmaskedUrlRegexRules="replayRecordingUnmaskedUrlRegexRules",r.replayRecordingMaskedUrlRegexRules="replayRecordingMaskedUrlRegexRules"}(s||(s={})),s})(),Jc=(()=>{class s{constructor(){this.Nc=[]}setRegexRules(t){this.Nc=csArray.prototype.filter.call(csArray.prototype.map.call(t,e=>this.EE(e)),e=>e!==null)}evaluateUrl(t){return csArray.prototype.some.call(this.Nc,e=>this.Vd(t,e))}getMatchingRules(t){return csArray.prototype.filter.call(this.Nc,e=>this.Vd(t,e))}Vd(t,e){var i,n;let o=this.SE(t,e);return!this.vE(e)||!this._E(e)?!1:!!(e!=null&&e.notOperator?!(!((i=e.regex)===null||i===void 0)&&i.test(o)):!((n=e.regex)===null||n===void 0)&&n.test(o))}vE(t){let e=new csDate,i=t.startDate&&t.startDate>e,n=t.endDate&&t.endDate<e;return!i&&!n}_E(t){let e=t.samplingRate!==100,i=e&&Es.boolean(t.samplingRate);return!e||i}Ro(t){return!Pt(t,"http://")&&!Pt(t,"https://")?`https://${t}`:t}SE(t,e){let i=Fc(this.Ro(t));return i?e.ignoreQueryParams&&e.ignoreURIFragments?`${i.origin}${i.pathname}`:e.ignoreQueryParams?`${i.origin}${i.pathname}${i.hash}`:e.ignoreURIFragments?`${i.origin}${i.pathname}${i.search}`:t:t}Co(t){return t!=null&&t.ignoreCaseSensitivity?"i":""}EE(t){let e=null,i=!1;switch(t.operator){case Ge.NOT_START:case ve.NOT_START:i=!0;case Ge.START:case ve.START:e=new csRegExp(`^${t.value}`,this.Co(t));break;case Ge.NOT_END:case ve.NOT_END:i=!0;case Ge.END:case ve.END:e=new csRegExp(`${t.value}$`,this.Co(t));break;case Ge.NOT_CONTAIN:case ve.NOT_CONTAIN:i=!0;case Ge.CONTAIN:case ve.CONTAIN:case ve.REGEX:e=new csRegExp(`${t.value}`,this.Co(t));break;case Ge.NOT_EXACT:case ve.NOT_EXACT:i=!0;case Ge.EXACT:case ve.EXACT:e=new csRegExp(`^${t.value}$`,this.Co(t));break;default:et.warn(`compileRegexRule, unknown operator: ${t.operator}`)}if(e===null)return null;let n=t.startDate?this.Ud(t.startDate):void 0,o=t.endDate?this.Ud(t.endDate):void 0;return{regex:e,ignoreQueryParams:t.ignoreQueryParams,ignoreURIFragments:t.ignoreURIFragments,notOperator:i,maskMedia:t.maskMedia,samplingRate:t.samplingRate!==void 0?t.samplingRate:100,startDate:n,endDate:o}}Ud(t){let e=new csDate(t);return isNaN(e.getTime())?void 0:e}}return s})(),cf=(()=>{class s{constructor(t,e,i,n){this.ae=t,this.$r=e,this.zr=i,this.Tt=n}init(){this.wE()}shouldMaskNonTextElements(){if(this.ae.anonymisationMethod!==us.replayRecordingMaskedUrlRegexRules)return!1;if(this.ae.isSMB)return this.shouldUseAnonymization();let t=this.zr.getMatchingRules(this.$r.getAnonymizedUrl());return csArray.prototype.some.call(t,e=>e.maskMedia)}shouldUseAnonymization(){if(this.Tt&&!this.Tt.isReplayUnanonymizedAllowedByConsent()){switch(this.ae.anonymisationMethod){case null:case us.replayRecordingUnmaskedUrlRegex:return!(this.ae.replayRecordingUnmaskedUrlRegex&&this.ae.replayRecordingUnmaskedUrlRegex.test(this.$r.getAnonymizedUrl()));case us.replayRecordingUnmaskedUrlRegexRules:return!this.zr.evaluateUrl(this.$r.getAnonymizedUrl())}return!0}else{switch(this.ae.anonymisationMethod){case null:case us.replayRecordingMaskedUrlRegex:return!!(this.ae.replayRecordingMaskedUrlRegex&&this.ae.replayRecordingMaskedUrlRegex.test(this.$r.getAnonymizedUrl()));case us.replayRecordingMaskedUrlRegexRules:return this.zr.evaluateUrl(this.$r.getAnonymizedUrl())}return!1}}wE(){this.ae.anonymisationMethod===us.replayRecordingMaskedUrlRegexRules&&this.ae.replayRecordingMaskedUrlRegexRules?this.zr.setRegexRules(this.ae.replayRecordingMaskedUrlRegexRules):this.ae.anonymisationMethod===us.replayRecordingUnmaskedUrlRegexRules&&this.ae.replayRecordingUnmaskedUrlRegexRules&&this.zr.setRegexRules(this.ae.replayRecordingUnmaskedUrlRegexRules)}}return s})();function lf(s){return s.nodeType===1}function wt(s){let r=csEventtarget.apply(s);return r&&lf(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:r}function hf(s){return s.composedPath&&Object.defineProperty(s,"__csOriginalTarget",{value:s.composedPath()[0],writable:!1,enumerable:!1}),s}function uf(){return(s,r,t)=>{let e=t.value;return e&&(t.value=function(i){if(wt(i)===csEventtarget.apply(i))return e.call(this,i)}),t}}var _t=(()=>{let s;return function(r){r[r.TAP=0]="TAP",r[r.LONG_PRESS=1]="LONG_PRESS",r[r.DRAG=2]="DRAG",r[r.FLICK=3]="FLICK",r[r.PINCH_IN=4]="PINCH_IN",r[r.PINCH_OUT=5]="PINCH_OUT"}(s||(s={})),s})(),$i=(()=>{let s;return function(r){r[r.UP=1]="UP",r[r.DOWN=2]="DOWN",r[r.LEFT=3]="LEFT",r[r.RIGHT=4]="RIGHT"}(s||(s={})),s})(),df=(()=>{class s{compute(t,e){let i=this.Vs(e.x)-this.Vs(t.x),n=this.Vs(e.y)-this.Vs(t.y),o=e.time-t.time;return{duration:o,distance:this.jd(i,n),direction:this.TE(i,n),velocity:this.bE(i,n,o)}}computePinchMetrics(t,e){let i=this.Vs(e.x)-this.Vs(t.x),n=this.Vs(e.y)-this.Vs(t.y);return{duration:e.time-t.time,distance:this.jd(i,n)}}getScale(t,e){return Math.abs(e/t-1)}Vs(t){return t/window.devicePixelRatio}jd(t,e){return Math.round(Math.sqrt(t*t+e*e))}bE(t,e,i){let n=i/1e3,o=t/n,c=e/n;return Math.round(Math.abs(o)+Math.abs(c))}TE(t,e){return Math.abs(t)>Math.abs(e)?t>0?$i.RIGHT:$i.LEFT:e>0?$i.DOWN:$i.UP}}return s})(),Qc=typeof performance!="undefined"&&!!performance.now,va=Qc?()=>performance.now():()=>csDate.now(),pf=(()=>{var s;return Qc?(s=performance.timing)===null||s===void 0?void 0:s.navigationStart:0})(),zi={now(){return Math.round(va()+pf)},elapsed(){return va()}};function _a(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var ff=1e3,gf=100,mf=.1,An=(()=>{class s{constructor(){this.Ht={},this.Mc=()=>{},this.Io=new df,this.be()}static isGestureDetectionSupported(){return typeof devicePixelRatio!="undefined"}onGesture(t){this.Mc=t}isValidTouchEvent(t){return"touches"in t&&"changedTouches"in t}processActionDown(t){if(!this.AE(t))return;this.RE(t)&&this.be();let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:zi.now()};if(t.touches.length===1)this.Ht.startPinchTime=e.time,this.Ht.firstTouch=e;else if(t.touches.length===2&&(this.Ht.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:zi.now()},this.Ht.firstTouch&&this.Ht.secondTouch)){let i=this.Io.computePinchMetrics(this.Ht.firstTouch,this.Ht.secondTouch);this.Wi=i.distance}csArray.prototype.push.call(this.Gr,e),this.Po=wt(t)}processActionMove(){this.kc=!0}processActionUp(t){if(this.CE(t)){if(csArray.prototype.push.call(this.Gr,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:zi.now()}),this.IE(t)&&this.Ht.startPinchTime){let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.Ht.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:zi.now()};this.Ht.firstTouch&&(this.Ht.firstTouch=e,this.Ht.secondTouch=i),this.PE(t)}this.Wi||this.OE()&&this.NE(t)}}be(){this.Gr=[],this.Po=null,this.kc=!1,this.Wi=null,this.qr=!0}NE(t){let e=this.Io.compute(this.Gr[0],this.Gr[1]);this.qr=t.isTrusted;let i=this.kc?this.ME(e):this.kE(e);if(this.DE(i.type,t.changedTouches)){let n=t.changedTouches[0];i.pageX=_a(n.pageX,1),i.pageY=_a(n.pageY,1)}this.Mc(i,t)}PE(t){if(!(this.Ht.firstTouch&&this.Ht.secondTouch))return;let e=this.Io.computePinchMetrics(this.Ht.firstTouch,this.Ht.secondTouch);this.qr=t.isTrusted;let i=this.xE(e);i&&this.Mc(i,t)}xE(t){return!this.Wi||this.Io.getScale(this.Wi,t.distance)<mf?void 0:{type:this.Wi>t.distance?_t.PINCH_IN:_t.PINCH_OUT,target:this.Po,distance:t.distance,isTrusted:this.qr}}ME(t){return{type:t.velocity<gf?_t.DRAG:_t.FLICK,target:this.Po,velocity:t.velocity,distance:t.distance,direction:t.direction,isTrusted:this.qr}}kE(t){return{type:t.duration<ff?_t.TAP:_t.LONG_PRESS,target:this.Po,isTrusted:this.qr}}DE(t,e){return t===_t.TAP&&e&&e.length===1}RE(t){return t.touches.length===1}OE(){return this.Gr.length===2}AE(t){return t.touches.length>0}CE(t){return t.changedTouches.length>0}IE(t){return this.kc&&!!this.Wi&&t.changedTouches.length===1&&t.touches.length===1}}return s})(),yf=(()=>{class s{constructor(){this.subscriptions={}}subscribe(t,e){this.subscriptions[t]=e,Object.keys(this.subscriptions).length===1&&this.onStartTracking()}unsubscribe(t){delete this.subscriptions[t],Object.keys(this.subscriptions).length===0&&this.onStopTracking()}}return s})(),Zc=!0,tr=csSymbol("safe"),wa=csSymbol("task");function ft(s,r=Zc){var t;(t=s[tr])!==null&&t!==void 0||(s[tr]=function(e){let i=arguments;_s(()=>(e[wa]=Kt,s.listener.apply(s.boundElement,i)),de.EventListener,e[wa])}),s.boundElement.addEventListener(s.type,s[tr],r)}function gt(s,r=Zc){s.boundElement.removeEventListener(s.type,s[tr],r)}var Ef=(()=>{class s extends yf{constructor(t){super(),this.LE=t,this.Us=[{boundElement:document,type:"touchstart",listener:e=>this.K(e)},{boundElement:document,type:"touchmove",listener:e=>this.K(e)},{boundElement:document,type:"touchend",listener:e=>this.K(e)}],this.Wr=new An,this.Wr.onGesture((e,i)=>this.Dc(e,i))}Dc(t,e){for(let i in this.subscriptions){let n=this.subscriptions[i];n(t,e)}}onStartTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Us,t=>ft(t))}onStopTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Us,t=>gt(t))}canDetectGesture(){return typeof devicePixelRatio!="undefined"}K(t){this.LE.tryToExecute("process gesture event",()=>{if(this.Wr.isValidTouchEvent(t))switch(t.type){case"touchstart":this.Wr.processActionDown(t);break;case"touchmove":this.Wr.processActionMove();break;case"touchend":this.Wr.processActionUp(t);break}})()}static isSwipe(t){return t.type===_t.FLICK||t.type===_t.DRAG}}return s})();var Mt=(()=>{class s{constructor(){this._isStarted=!1}get isStarted(){return this._isStarted}start(...t){this._isStarted||(this._isStarted=!0,this.onStart(...t))}stop(){this._isStarted&&(this._isStarted=!1,this.onStop())}restart(){this.stop(),this.start()}}return s})();var Ss;(function(s){s.ContentSquare="CONTENTSQUARE",s.LoadedByClicktale="LOADED_BY_CLICKTALE",s.LoadClicktalePtc="LOAD_CLICKTALE_PTC",s.DualCollectionReview="DUAL_COLLECTION_REVIEW",s.DualCollection="DUAL_COLLECTION",s.ContentSquareTagClickTaleEndpoints="CONTENTSQUARE_TAG_CLICKTALE_ENDPOINTS"})(Ss||(Ss={}));function tl(s){return s.tagDeploymentMode===Ss.DualCollectionReview||s.tagDeploymentMode===Ss.DualCollection}function Sf(s){return tl(s)||s.tagDeploymentMode===Ss.LoadClicktalePtc}var Ta=(()=>{let s;return function(r){function t(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()}r.isRecording=t;function e(){window.ClickTaleStop&&window.ClickTaleStop()}r.stopRecording=e;function i(c){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(c)}r.triggerLogicalPageView=i;function n(c){window.ClickTaleEvent&&window.ClickTaleEvent(c)}r.sendPageEvent=n;function o(c){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(c)}r.sendEventTriggerRecording=o}(s||(s={})),s})();var vf=(()=>{class s{constructor(t){this.pt=t}on(t,e){return i=>{this.pt.hasValidEventTarget(i)&&this.rS(i,t)&&e(i)}}rS(t,e){let i=wt(t);return Gt.call(i,e)}isMatchesSelectorSupported(){return!!Gt}}return s})(),_f=(()=>{class s extends Mt{constructor(){super(),this.Gd=0}onStart(){B.isPerfLoggingActive()&&(this.Yr=window.csSetInterval(()=>this.qd(),s.nS))}onStop(){B.isPerfLoggingActive()&&(this.qd(),csClearInterval(this.Yr))}qd(){this.Gd>=s.oS||q.counters.methodPerformance.flush()&&this.Gd++}}return s.nS=5e3,s.oS=5,s})(),wf=(()=>{class s{constructor(){}init(){this.Wd=new _f}onStartTracking(){this.Wd.start()}onOptout(){this.Wd.stop()}}return s})();var ba=(()=>{let s;return function(r){function t(n){return R(n)||pt(n)}r.isValidIdentity=t;function e(n){let o=!1;return i(n)&&(o=!!n.hash),o}r.parseIdentityOptionsHash=e;function i(n){return ut(n)&&ys(n)&&"hash"in n}}(s||(s={})),s})(),Aa=["identify"],Tf=["getIdentity"],bf=["resetIdentity"],Af=(()=>{class s{constructor(t,e){this.E=t,this.Je=e}init(){this.E.register(Aa,(t,e)=>{if(!ba.isValidIdentity(t))throw new Error(`Command misuse: ${Aa[0]}`);let i=ba.parseIdentityOptionsHash(e);this.Je.identify(t.toString(),i)}),this.E.register(bf,()=>this.Je.resetIdentity()),this.E.register(Tf,()=>this.Je.getIdentity())}onStartTracking(){this.Je.start()}onBeforeSessionRenewal(){this.Je.stop()}onOptout(){this.Je.stop()}}return s})();var Rf=s=>{let r=s*60*1e3;return`${Math.floor(csDate.now()/r)}`},Cf=5e3,Rn=(()=>{class s extends Uc{constructor(t,e,i){super(t,e),this.Xi=null,this.uS=(i==null?void 0:i.type)||"json",this.Kd=i==null?void 0:i.cacheMinutes,this.Ur=i==null?void 0:i.timeout}onLoad(t){this.qi=t}onError(t){this.Vr=t}onTimeout(t,e){this.fi=t,this.Ur=e}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,n=>n());let t=this.retrieveParameters();this.hc(t);let e=yi.toQuery(t),i=`${this.domainUri}${this.path?`/${this.path}`:""}?${e}`;this.dS(i,this.uS)}abort(){this.Xi&&(this.Xi.abort(),this.Xi=null)}isInProgress(){return this.Xi!==null}dS(t,e){var i;let n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType=e,n.onerror=()=>{var o;return(o=this.Vr)===null||o===void 0?void 0:o.call(this,n)},n.ontimeout=()=>{var o;return(o=this.fi)===null||o===void 0?void 0:o.call(this,n)},n.onload=()=>{var o,c;n.status>=200&&n.status<400?((o=this.qi)===null||o===void 0||o.call(this,this.pS(n,e)?n.response:n.responseText),csArray.prototype.forEach.call(this.afterRequestCallbacks,l=>l())):(c=this.Vr)===null||c===void 0||c.call(this,n)},n.onloadend=()=>{this.Xi=null},n.timeout=(i=this.Ur)!==null&&i!==void 0?i:Cf,this.Xi=n,n.send()}pS(t,e){let i=t.getResponseHeader("Content-Type");return i===null?e==="json":csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(i),"json")>0}hc(t){let e;this.Kd?e=`${Rf(this.Kd)}`:e=csString.prototype.slice.call(`${Math.random()}`,2,8),t.r=e}}return s})(),If=Math.pow(2,52),ri=null;async function el(s){if((ri==null?void 0:ri.visitorId)===s)return ri.heapUserId;let r=await Pf(s),t=Number(r%BigInt(If));return ri={visitorId:s,heapUserId:t},t}async function Pf(s){let r=await crypto.subtle.digest("SHA-256",Of(s)),t=new Uint8Array(r.slice(0,8));return t=Mf(t),Nf(t)}function Of(s){let r=new ArrayBuffer(s.length),t=new Uint8Array(r);for(let e=0;e<s.length;e++)t[e]=csString.prototype.charCodeAt.call(s,e);return r}function Nf(s){let r=[];return Uint8Array.from(s).forEach(function(e){let i=e.toString(16);i.length%2&&(i="0"+i),csArray.prototype.push.call(r,i)}),BigInt("0x"+csArray.prototype.join.call(r,""))}function Mf(s){let r=new ArrayBuffer(s.byteLength+1),t=new Uint8Array(r);for(let e=1;e<t.byteLength;e++)t[e]=s[e-1];return t}var sl=(()=>{let s;return function(r){function t(n){return W(n)}r.isValidProperties=t;let e=255;function i(n){let o={};for(let c of Object.keys(n)){let l=n[c];if(R(l)||pt(l)){let u=zt.truncate(csString(c),e);o[u]=zt.truncate(csString(l),e)}}return o}r.sanitizeProperties=i}(s||(s={})),s})(),kf=(()=>{class s extends Mt{constructor(t,e,i,n){super(),this.Bs=t,this.jc=e,this.I=i,this.B=n,this.Do=null,this.Jd=!1,this.xo=null,Gn()&&(this.Jd=!0,e.setRequestParametersProviders({getRequestParameters:()=>{var o;return(o=this.xo)!==null&&o!==void 0?o:{}}}),e.after(()=>{this.xo=null}))}async addUserProperties(t){if(!this.Jd)return;if(!this.Bs){et.error("missing heap env id","UserPropertiesService");return}let e=sl.sanitizeProperties(t);Object.keys(e).length>0&&(this.isStarted?await this.Qd(e,this.Bs):this.Do=e)}async Qd(t,e){let i=this.I.getVisitor();if(!i){et.warn("could not get current visitor",!0,"UserPropertiesService");return}let n=csString(await el(i.id));this.xo={a:e,u:n,st:M.now().toString(),b:"web",v:"1",s:"1",tv:"4.0"};for(let o of Object.keys(t))this.xo[`_${o}`]=t[o];this.jc.send(),this.B.refreshSession()}onStart(){this.Do!==null&&(this.Qd(this.Do,this.Bs),this.Do=null)}onStop(){}}return s})(),Ra=["addUserProperties"],Df="api/add_user_properties_v3",xf=(()=>{class s{constructor(t,e,i,n){this.E=t,this.f=e,this.I=i,this.B=n}init(){let t=new Rn(this.f.getPaProxyDomainUri(),Df);this.Lo=new kf(this.f.heapEnvironment.env_id,t,this.I,this.B),this.E.register(Ra,e=>{if(!sl.isValidProperties(e))throw new Error(`Command misuse: ${Ra[0]}`);this.Lo.addUserProperties(e)})}onStartTracking(){this.Lo.start()}onBeforeSessionRenewal(){this.Lo.stop()}onOptout(){this.Lo.stop()}}return s})();var Ei={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11};var Ca=new Map,qr=!_i&&document.implementation.createHTMLDocument("");function il(s){var r,t;return(t=(r=s.sheet)===null||r===void 0?void 0:r.href)!==null&&t!==void 0?t:s.getAttribute("href")}function Lf(s){if(!Er(s))return null;let r=rl(s);if(r===null||r.length===0)return null;let t="";if(fn(s.textContent))X(r,e=>t+=e.cssText);else{let e=Vf(s);if(e===r.length||e>r.length)return null;let i=new csArray(r.length-e);for(let n=e,o=0;n<r.length;n+=1,o+=1)i[o]=r[n];X(i,n=>t+=n.cssText)}return t}function Vf(s){if(!qr)return 0;let r=Ca.get(s.textContent);if(r)return r;let t=s.cloneNode(!0);t.textContent=s.textContent,qr.head.appendChild(t);let e=rl(t);return r=e?e.length:0,Ca.set(s.textContent,r),qr.head.removeChild(t),r}function rl(s){try{if(s.disabled)return null;let r=s.sheet;return r?r.cssRules||r.rules:null}catch(r){if(r.name!=="SecurityError"&&r.name!=="InvalidAccessError")throw r;return null}}var oi=s=>s instanceof HTMLFormElement?"form":s.localName;var Ts=(()=>{class s{constructor(t){this.csId=rt(t),this.props=Zi.getStore(t)}}return s})(),nl=(()=>{class s extends Ts{constructor(t){super(t),this.nodeType=3,this.data=t.data}}return s})(),Ls=(()=>{class s extends Ts{constructor(t){var e,i,n;super(t),this.attributes=[],this.nodeType=Ei.ELEMENT_NODE,this.localName=oi(t),this.namespaceURI=(e=t.namespaceURI)!==null&&e!==void 0?e:void 0,this.children=[];let o=Lf(t);if(o){this.children=new csArray(csNodechildNodes.apply(t).length);let c=document.createTextNode(o),l=new nl(c);csArray.prototype.push.call(this.children,l)}Ys(t)&&Y.setProperty(this,"SVG",!0),(Er(t)||Xn(t))&&(this.disabledSheet=(n=(i=t.sheet)===null||i===void 0?void 0:i.disabled)!==null&&n!==void 0?n:!1)}static isElement(t){return t.nodeType===Ei.ELEMENT_NODE}static getAttribute(t,e){return Ae(t.attributes,i=>i.name===e)}static getAttributeValue(t,e){var i;return(i=this.getAttribute(t,e))===null||i===void 0?void 0:i.value}}return s})(),Uf=(()=>{class s extends Ts{constructor(t){super(t),this.nodeType=4,this.data=t.data}}return s})(),jf=(()=>{class s extends Ts{constructor(t){super(t),this.nodeType=8,this.data=t.data}}return s})(),Hf=(()=>{class s extends Ts{constructor(t){super(t),this.nodeType=10,this.name=t.name,this.publicId=t.publicId,this.systemId=t.systemId}}return s})(),Bf=(()=>{class s extends Ts{constructor(t){super(t),this.nodeType=9,this.baseURI=s.getBaseURI(t),this.children=[]}static getBaseURI(t){let e=t.baseURI;if(e==null){let i=t.getElementsByTagName("base");e=i.length!==0?i[0].href:t.URL}return e}}return s})(),Ff=(()=>{class s extends Ts{constructor(t){super(t),this.nodeType=11,this.mode=t.mode,this.children=[]}}return s})(),$f=(()=>{class s{constructor(t,e,i){var n;typeof t=="string"?(this.name=t,this.value=e,this.namespaceURI=i!=null?i:""):(this.name=t.name,this.value=t.value,this.namespaceURI=(n=t.namespaceURI)!==null&&n!==void 0?n:"")}static create(t){let e=t.attributes,i=new csArray(e.length);for(let n=0;n<i.length;n++){let o=e[n];i[n]=new s(o.name,o.value,o.namespaceURI),o.name==="href"&&Xn(t)&&(i[n].value=il(t))}return i}}return s})(),Ia={workTime:40,async:!0,initialDOM:!0};var li=csSymbol("InitialDom"),Pa=csSymbol.for("ignoreNextSerialization");function ol(s){return s[Pa]?(delete s[Pa],!0):!1}function zf(s=Ia){return function(t,e){var i;(i=s.workTime)!==null&&i!==void 0||(s.workTime=Ia.workTime);let n=rs("serialize:callback",y=>e(y)),o=new wi,c=(y,m)=>{y.hasChildNodes()&&o.push({node:y,serializedNode:m});let S=y instanceof Element&&csElementshadowRoot.apply(y);if(S){let I=m.shadowRoot=hi(S);s.async&&s.initialDOM&&Y.setProperty(S,li,!0),c(S,I)}},l,u=!0,E=8,p=rs("work",()=>{var y;if(u)l=hi(t),s.async&&s.initialDOM&&Y.setProperty(t,li,!0),c(t,l),u=!1;else if(o.isEmpty)return;let m=Wf(100);for(;!o.isEmpty;){if(s.async&&m.elapsed()>=s.workTime){--E<=0&&csSetTimeout(p);return}let{node:S,serializedNode:I}=o.pop(),P=(y=I.children)!==null&&y!==void 0?y:[];if(vr(S))continue;let v=0;for(let _=csNodefirstChild.apply(S);_;_=csNodenextSibling.apply(_)){if(ol(_))continue;let D=hi(_);s.async&&s.initialDOM&&Y.setProperty(_,li,!0),P[v++]=D,c(_,D)}}s.async?csSetTimeout(()=>n(l)):e(l)});if(!s.async)s.workTime=1/0,p();else for(let y=0;y<E;y++)csSetTimeout(p,1)}}function Gf(s){let r=hi(s),t=r;if(vr(s))return r;let e=0;for(let n=csNodefirstChild.apply(s);n;n=csNodenextSibling.apply(n))ol(n)||(t.children[e++]=Cn(n));let i=s.shadowRoot;return i&&(t.shadowRoot=Cn(i)),r}var Cn=ws(Gf,"serializeSync");function hi(s){let r,t;switch(s.nodeType){case 1:t=r=new Ls(s),r.attributes=Yf(s);break;case 3:t=new nl(s);break;case 4:t=new Uf(s);break;case 8:t=new jf(s);break;case 10:t=new Hf(s);break;case 9:t=new Bf(s);break;case 11:t=new Ff(s);break;default:throw new Error("Node type not supported: "+s.nodeType)}return t}function qf(){li=csSymbol("InitialDom")}function Wf(s){if(s<1)throw new Error("Precision should be >= 1");let r=0,t=M.elapsed();return{started:t,elapsed(){return++r%s===0&&(t=M.elapsed()),t-this.started}}}function Yf(s){return vr(s)?[]:$f.create(s)}var Xf=/[\u4E00-\u9FFF]|[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]/g,Kf="\uFF41",Jf=/[^ａ\s]/g,Qf="a";function Wr(s){let r=csString.prototype.replace.call(s,Xf,Kf);return csString.prototype.replace.call(r,Jf,Qf)}var Zf=(()=>{class s{constructor(t,e,i,n=null,o=!1){this.Qe=t,this.gS=e,this.M=i,this.Uo=n,this.mS=o,this.yS=Lc(this.gS)}sanitize(t,e){return Y.traverse(t,(i,n)=>{if(i.anonymized=this.Qe,i.nodeType===Ei.TEXT_NODE){let o=i,{anonymizedValue:c,withAnonymization:l}=this.getAnonymizedValue(o.data,n?n==null?void 0:n.localName:e==null?void 0:e.targetLocalName,n?Y.getProperties(n):e==null?void 0:e.targetProps);i.anonymized=l,o.data=c;return}if(Ls.isElement(i))return this.ES(i);if(i.nodeType===Ei.CDATA_SECTION_NODE){let o=i;o.data=this.Qe?Wr(o.data):this.M.checkAndAnonymizePII(o.data,this.Uo);return}}),t}setAnonymization(t){this.Qe=t}getAnonymizedValue(t,e,i){if(e==="style")return{anonymizedValue:t,withAnonymization:!1};let n=(i==null?void 0:i[Te.ANONYMIZED_TEXT_STATUS_PROP])===Te.WHITELISTED_STATUS;return this.Qe&&!n?{anonymizedValue:Wr(t),withAnonymization:!0}:{anonymizedValue:this.M.checkAndAnonymizePII(t,this.Uo),withAnonymization:!1}}ES(t){if(Y.getProperty(t,"SVG"))return;let e=Ae(t.attributes,n=>n.name==="type"),i=e==null?void 0:e.value;t.attributes=csArray.prototype.map.call(t.attributes,n=>(n.anonymized=this.Qe,n.value=this.getAnonymizedAttributeValue(t.localName,n.name,n.value,i),n))}getAnonymizedAttributeValue(t,e,i,n){if(this.SS(t,e,n))return i;if(Dd(e))return xd(t,e,i)?this.M.anonymizePII(i):i;let o=this.mS&&e==="placeholder";return this.Qe&&(Ld(t,e,n)||o)?Wr(i):this.Qe?"":this.M.checkAndAnonymizePII(i,null)}SS(t,e,i){return kd(t,e,i)||this.yS.has(e)}}return s})(),tg=(()=>{let s;return function(r){function t(){let i=navigator.userAgent+navigator.language+navigator.platform,n=csString.prototype.slice.call(e(i).toString(16),-4),o=new csDate().getTime(),c="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,l=>{let u=(o+Math.random()*16)%16|0;return o=Math.floor(o/16),(l==="x"?u:u&7|8).toString(16)});return csString.prototype.replace.call(c,"hhhh",n)}r.generate=t;function e(i){let n=0;for(let o=0;o<i.length;o+=1)n=csString.prototype.charCodeAt.call(i,o)+(n<<6)+(n<<16)-n;return Math.abs(n)}}(s||(s={})),s})();var al=(()=>{class s{emit(t,e,i,n=document){let c=`${i!==void 0?`${i}`:`${s.RS}`}${t}`,l=s.createEvent(c,{detail:e});l!==null&&n.dispatchEvent(l)}static createEvent(t,e={}){if(typeof CustomEvent=="function")return new CustomEvent(t,e);let i=this.CS();if(i===null)return null;let{bubbles:n=!1,cancelable:o=!1,detail:c}=e;return i.initCustomEvent(t,n,o,c),i}static CS(){try{return document.createEvent("CustomEvent")}catch{return null}}}return s.RS="cs.tracking.",s})();var eg=(()=>{class s{constructor(){}onLoad(t){this.qi=t}onLoadCallbackExecute(){this.qi()}start(){let t=this.onLoadCallbackExecute.bind(this);this.JS(t)}JS(t){document.readyState==="complete"||document.readyState!=="loading"&&!document.documentElement.doScroll?csSetTimeout(t):(document.addEventListener("DOMContentLoaded",e),window.addEventListener("load",e));function e(){document.removeEventListener("DOMContentLoaded",e),window.removeEventListener("load",e),t()}}}return H([N("onLoad")],s.prototype,"onLoadCallbackExecute",null),s})(),sg=(()=>{class s{constructor(t){this.Ho=t.performance}getRequestParameters(){if(this.QS())return{};let t=this.ZS();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}}ZS(){let t=this.Ho.timing;return{startRender:`${t.domLoading-t.requestStart}`,domInteractive:`${t.domInteractive-t.requestStart}`,domComplete:`${t.domComplete-t.requestStart}`,fullyLoaded:`${t.loadEventEnd-t.requestStart}`}}QS(){return!(this.Ho&&this.Ho.timing&&this.Ho.timing.loadEventEnd>0)}}return s})(),Ut=(()=>{class s{static build(t,e,i){return csArray.prototype.reduce.call(i,(n,o)=>o.enhanceAnalysisEvent(t,n),e)}}return s})(),z=(()=>{let s;return function(r){r[r.RESIZE=0]="RESIZE",r[r.SCROLL=1]="SCROLL",r[r.MOUSEMOVE=2]="MOUSEMOVE",r[r.MOUSEDOWN=3]="MOUSEDOWN",r[r.MOUSEUP=4]="MOUSEUP",r[r.CLICK=5]="CLICK",r[r.MOUSEOVER=6]="MOUSEOVER",r[r.MOUSEOUT=7]="MOUSEOUT",r[r.CHANGE=10]="CHANGE",r[r.FOCUSIN=11]="FOCUSIN",r[r.FOCUSOUT=12]="FOCUSOUT",r[r.TAP=14]="TAP",r[r.KEYDOWN=15]="KEYDOWN",r[r.KEYUP=16]="KEYUP",r[r.COMMAND=17]="COMMAND",r[r.SUBMIT_COMMAND=18]="SUBMIT_COMMAND",r[r.PERFORMANCE=19]="PERFORMANCE",r[r.DRAG=20]="DRAG",r[r.FLICK=21]="FLICK",r[r.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",r[r.ZOOM=23]="ZOOM",r[r.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",r[r.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",r[r.DEAD_CLICK=30]="DEAD_CLICK",r[r.DEAD_ZOOM=31]="DEAD_ZOOM",r[r.PAGE_RELOAD=32]="PAGE_RELOAD",r[r.THRASHED_CURSOR=33]="THRASHED_CURSOR",r[r.BLANK_PAGE=34]="BLANK_PAGE",r[r.EXTERNAL_EVENT=35]="EXTERNAL_EVENT",r[r.SUBMIT=36]="SUBMIT",r[r.CUSTOM_EVENT=37]="CUSTOM_EVENT"}(s||(s={})),s})(),Yr=(()=>{let s;return function(r){r.SUCCESS="success",r.FAILURE="failure",r.ATTEMPT="attempt"}(s||(s={})),s})(),fs=(()=>{let s;return function(r){r.APPCUES="appcues",r.CHAMELEON="chameleon",r.CONTENTSQUARE="contentsquare",r.SEGMENT="segment",r.WEB="web"}(s||(s={})),s})();function ig(s){return s.tgtHM!==void 0}function cl(s){return s.tgt!==void 0}function rg(s){return s.tgtLk!==void 0}function ng(s){return s.x!==void 0&&s.y!==void 0}function og(s){return s===Yr.SUCCESS||s===Yr.FAILURE||s===Yr.ATTEMPT}function ag(s){return s===fs.APPCUES||s===fs.CHAMELEON||s===fs.CONTENTSQUARE||s===fs.SEGMENT||s===fs.WEB}var cg=(()=>{class s{constructor(t,e,i){this.Qt=t,this.xt=e,this.bt=i}processGesture(t,e){switch(t.type){case _t.TAP:this.sv(e);break;case _t.FLICK:this.iv(t,e);break;case _t.DRAG:this.rv(t,e);break;default:break}}sv(t){let e={type:z.TAP,ts:0,x:0,y:0,tgt:""},i=Ut.build(t,e,this.Qt);i.tgt!==Ce.INVALID_ELEMENT&&this.L(i)}rv(t,e){var i,n;let o={type:z.DRAG,ts:0,fd:t.direction,tgt:""};!((i=this.bt)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((n=this.bt)===null||n===void 0)&&n.collectGestureVelocity&&(o.velocity=t.velocity);let c=Ut.build(e,o,this.Qt);c.tgt!==Ce.INVALID_ELEMENT&&this.L(c)}iv(t,e){var i,n;let o={type:z.FLICK,ts:0,fd:t.direction,tgt:""};!((i=this.bt)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((n=this.bt)===null||n===void 0)&&n.collectGestureVelocity&&(o.velocity=t.velocity);let c=Ut.build(e,o,this.Qt);c.tgt!==Ce.INVALID_ELEMENT&&this.L(c)}onEvent(t){this.L=t}start(){this.xt.subscribe(s.op,(t,e)=>this.processGesture(t,e))}stop(){this.xt.unsubscribe(s.op)}}return s.op="AnalysisGestureTracker",H([at()],s.prototype,"processGesture",null),s})();function Ar(s,r){typeof r=="number"&&(r={wait:r});let t=r.wait,e=r.mode||"leading",i,n=[],o=null,c=0,l,u=()=>{c=M.now(),o=null,l=s.apply(i,n),n=[],i=null},E=function(...p){if(i=this!==null&&this!==void 0?this:tt,n=[...p],e==="trailing")return o||(o=tt.csSetTimeout(u,t)),l;let y=M.now(),m=t-(y-c);return m<=0||m>t?(c=y,l=s.apply(i,n),o?(tt.csClearTimeout(o),o=null):n=[]):o||(o=tt.csSetTimeout(u,m)),l};return E.cancel=()=>{o&&(tt.csClearTimeout(o),c=0,o=null,n=[])},E.flushPending=()=>{o&&(tt.csClearTimeout(o),u())},E}var Rr=s=>(r,t,e)=>{e.value=Ar(e.value,s)},Oa="data-cs-scroll-container";function lg(s){try{if(ut(csEventtarget.apply(s)))return!0}catch{}return!1}var Vs=(()=>{let s;return function(r){function t(i){return!!(ut(i)&&lg(i)&&Ie(csEventtarget.apply(i))&&csEventtarget.apply(i).getAttribute(Oa)!==null)}r.isEventOnScrollContainer=t;function e(){return window.csquerySelector[document.nodeType].call(document,`[${Oa}]`)}r.getScrollContainer=e}(s||(s={})),s})(),Us=(()=>{let s;return function(r){r[r.COPY=0]="COPY",r[r.CUT=1]="CUT",r[r.PASTE=2]="PASTE"}(s||(s={})),s})(),G=(()=>{let s;return function(r){r[r.SPACE=0]="SPACE",r[r.ENTER=1]="ENTER",r[r.BACKSPACE=2]="BACKSPACE",r[r.DELETE=3]="DELETE",r[r.ARROWUP=4]="ARROWUP",r[r.ARROWDOWN=5]="ARROWDOWN",r[r.ARROWLEFT=6]="ARROWLEFT",r[r.ARROWRIGHT=7]="ARROWRIGHT",r[r.CAPSLOCK=8]="CAPSLOCK",r[r.SHIFT=9]="SHIFT",r[r.TAB=10]="TAB",r[r.ALPHANUMERICAL=11]="ALPHANUMERICAL",r[r.ESCAPE=12]="ESCAPE",r[r.END=13]="END",r[r.ALT=14]="ALT",r[r.CTRL=15]="CTRL",r[r.META=16]="META"}(s||(s={})),s})(),hg=(()=>{class s{constructor(t,e,i,n=["submit"]){this.Qt=t,this.pt=e,this.Lt=i,this.nv=n,this.ap="select, select *, input, textarea",this.ov="select, select *, input, textarea",this.cp="a, a *, button, button *, select, select *, input, textarea",this.Jr="input, select, textarea",this.av="form",this.Bo=150,this.cv=400,this.lp=!1,this.Qr=Fs((o,c)=>this.scrollListener(o,c),this.Bo),this.hp=Fs(o=>this.resizeListener(o),this.Bo),this.lv=Ar(o=>this.mouseMoveListener(o),this.cv),this.hv=[{boundElement:window,type:"resize",listener:()=>this.hp()},{boundElement:document,type:"scroll",listener:o=>this.Qr(o)},{boundElement:window,type:"mousemove",listener:o=>{this.lv(hf(o))}},{boundElement:document,type:"mousedown",listener:o=>this.mouseDownListener(o)},{boundElement:document,type:"mouseup",listener:o=>this.mouseUpListener(o)},{boundElement:document,type:"click",listener:o=>this.clickListener(o)}],this.up=[{type:"change",listener:this.Lt.on(this.ov,o=>this.changeListener(o))},{type:"submit",listener:this.Lt.on(this.av,o=>this.submitListener(o))}],this.uv=[{boundElement:document,type:"mouseover",listener:this.Lt.on(this.cp,o=>this.mouseOverListener(o))},{boundElement:document,type:"mouseout",listener:this.Lt.on(this.cp,o=>this.mouseOutListener(o))},{boundElement:document,type:"focusin",listener:this.Lt.on(this.ap,o=>this.focusInListener(o))},{boundElement:document,type:"focusout",listener:this.Lt.on(this.ap,o=>this.focusOutListener(o))},{boundElement:document,type:"keyup",listener:this.Lt.on(this.Jr,o=>this.keyUpListener(o))},{boundElement:document,type:"keydown",listener:this.Lt.on(this.Jr,o=>this.keyDownListener(o))},{boundElement:document,type:"copy",listener:this.Lt.on(this.Jr,o=>this.copyListener(o))},{boundElement:document,type:"cut",listener:this.Lt.on(this.Jr,o=>this.cutListener(o))},{boundElement:document,type:"paste",listener:this.Lt.on(this.Jr,o=>this.pasteListener(o))},...csArray.prototype.map.call(this.up,o=>({...o,boundElement:document}))],this.U={},this.Xc=(o,c)=>{switch(c){case"initial":case"added":this.Ei(o);break;case"removed":this.Si(o);break}},this.he=new Xs(this.Xc),this.Kc()}Ei(t){if(lr(t)){let e=this.dp();csArray.prototype.forEach.call(e,i=>ft(i))}else{let e=this.pp();csArray.prototype.forEach.call(e,i=>{ft({...i,boundElement:t})})}}Si(t){if(lr(t)){let e=this.dp();csArray.prototype.forEach.call(e,i=>gt(i))}else{let e=this.pp();csArray.prototype.forEach.call(e,i=>{gt({...i,boundElement:t})})}}onEvent(t){this.L=t}start(){this.he.observe(),this.Ei(document),this.resizeListener()}stop(){this.Si(document),this.he.disconnect()}flushPendingDebouncedListeners(){this.Qr.flushPending(),this.hp.flushPending()}fp(t){return csArray.prototype.some.call(this.nv,e=>e===t)}pp(){return this.Lt.isMatchesSelectorSupported()?csArray.prototype.filter.call(this.up,t=>!this.fp(t.type)):(B.warn("Element.matches is not implemented yet"),[])}dp(){let t=[];return csArray.prototype.push.call(t,...this.hv),this.Lt.isMatchesSelectorSupported()?csArray.prototype.push.call(t,...this.uv):B.warn("Element.matches is not implemented yet"),csArray.prototype.filter.call(t,e=>!this.fp(e.type))}resizeListener(t){let e=Vs.getScrollContainer(),i=Ie(e);i&&(this.lp=!0);let n={type:z.RESIZE,ts:0,x:i?e.clientWidth:yt.windowWidth(),y:i?e.clientHeight:yt.windowHeight()};t!==void 0&&(n.d=t),this.L(n)}scrollListener(t,e){let i=Vs.isEventOnScrollContainer(e);!this.lp&&i&&this.resizeListener();let n={type:z.SCROLL,ts:0,x:i?csEventtarget.apply(e).scrollLeft:yt.windowOffsetX(),y:i?csEventtarget.apply(e).scrollTop:yt.windowOffsetY(),d:t},o=Ut.build(e,n,this.Qt);this.L(o)}mouseMoveListener(t){let e={type:z.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=Ut.build(t,e,this.Qt);this.L(i)}mouseDownListener(t){let e={type:z.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ut.build(t,e,this.Qt);this.ue(i)}mouseUpListener(t){let e={type:z.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ut.build(t,e,this.Qt);this.ue(i)}clickListener(t){let e={type:z.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ut.build(t,e,this.Qt);this.ue(i)}mouseOverListener(t){let e={type:z.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ut.build(t,e,this.Qt);this.ue(i)}mouseOutListener(t){let e={type:z.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.pt.getEventTargetPath(t)},i=Ut.build(t,e,this.Qt);this.ue(i)}focusInListener(t){let e={type:z.FOCUSIN,ts:0,tgt:this.pt.getEventTargetPath(t)},i=Ut.build(t,e,this.Qt);this.ue(i)}focusOutListener(t){let e={type:z.FOCUSOUT,ts:0,tgt:this.pt.getEventTargetPath(t)},i=Ut.build(t,e,this.Qt);this.ue(i)}changeListener(t){let e={type:z.CHANGE,ts:0,tgt:""},i=Ut.build(t,e,this.Qt);this.ue(i)}submitListener(t){let e={type:z.SUBMIT,ts:0,tgt:""},i=Ut.build(t,e,this.Qt);this.ue(i)}copyListener(t){let e={type:z.COMMAND,ts:0,tgt:this.pt.getEventTargetPath(t),key:Us.COPY};this.ue(e)}cutListener(t){let e={type:z.COMMAND,ts:0,tgt:this.pt.getEventTargetPath(t),key:Us.CUT};this.ue(e)}pasteListener(t){let e={type:z.COMMAND,ts:0,tgt:this.pt.getEventTargetPath(t),key:Us.PASTE};this.ue(e)}keyUpListener(t){let e={type:z.KEYUP,ts:0,tgt:this.pt.getEventTargetPath(t),key:this.gp(t)};this.ue(e)}keyDownListener(t){let e={type:z.KEYDOWN,ts:0,tgt:this.pt.getEventTargetPath(t),key:this.gp(t)};this.ue(e)}gp(t){let e=this.U[t.key];return e===void 0?G.ALPHANUMERICAL:e}ue(t){cl(t)&&t.tgt!==Ce.INVALID_ELEMENT&&this.L(t)}Kc(){this.U[" "]=G.SPACE,this.U.Spacebar=G.SPACE,this.U.Enter=G.ENTER,this.U.Backspace=G.BACKSPACE,this.U.Delete=G.DELETE,this.U.ArrowUp=G.ARROWUP,this.U.ArrowDown=G.ARROWDOWN,this.U.ArrowLeft=G.ARROWLEFT,this.U.ArrowRight=G.ARROWRIGHT,this.U.Up=G.ARROWUP,this.U.Down=G.ARROWDOWN,this.U.Left=G.ARROWLEFT,this.U.Right=G.ARROWRIGHT,this.U.CapsLock=G.CAPSLOCK,this.U.Shift=G.SHIFT,this.U.Tab=G.TAB}}return H([N("Event handler type: resize")],s.prototype,"resizeListener",null),H([N("Event handler type: scroll")],s.prototype,"scrollListener",null),H([N("Event handler type: mouseMove"),at()],s.prototype,"mouseMoveListener",null),H([N("Event handler type: mouseDown"),at()],s.prototype,"mouseDownListener",null),H([N("Event handler type: mouseUp"),at()],s.prototype,"mouseUpListener",null),H([N("Event handler type: click"),at()],s.prototype,"clickListener",null),H([N("Event handler type: mouseOver"),at()],s.prototype,"mouseOverListener",null),H([N("Event handler type: mouseOut"),at()],s.prototype,"mouseOutListener",null),H([N("Event handler type: focusIn")],s.prototype,"focusInListener",null),H([N("Event handler type: focusOut")],s.prototype,"focusOutListener",null),H([N("Event handler type: change")],s.prototype,"changeListener",null),H([N("Event handler type: submit"),at()],s.prototype,"submitListener",null),H([N("Event handler type: copy")],s.prototype,"copyListener",null),H([N("Event handler type: cut")],s.prototype,"cutListener",null),H([N("Event handler type: paste")],s.prototype,"pasteListener",null),H([N("Event handler type: keyup")],s.prototype,"keyUpListener",null),H([N("Event handler type: keydown")],s.prototype,"keyDownListener",null),s})(),ug=(()=>{class s{constructor(){this.mp=100,this.Zr=0,this.tn=yt.documentHeight(),this.yp={boundElement:document,type:"scroll",listener:t=>this.maxScrollRateListener(t)},this.Zr=this.Jc(Vs.getScrollContainer()).maxScrollRate}onEvent(t){this.L=t}start(){ft(this.yp)}stop(){gt(this.yp)}reset(){let t=Vs.getScrollContainer(),{maxScrollRate:e,maxDocumentHeight:i}=this.Jc(t);this.tn=i,this.Zr=e,this.L()}Jc(t){let e=0,i=0;if(t===null)i=yt.documentHeight(),e=this.pv(i);else{let n=this.fv(t);i=this.Ep(t,n),e=this.gv(t,n)}return{maxScrollRate:e,maxDocumentHeight:i}}maxScrollRateListener(t){let e=null;Vs.isEventOnScrollContainer(t)&&(e=csEventtarget.apply(t));let{maxScrollRate:i,maxDocumentHeight:n}=this.Jc(e);(i>this.Zr||n>this.tn)&&(this.Zr=i,n>this.tn&&(this.tn=n),this.L())}pv(t){let e=Math.round(this.mv()/t*100);return Math.min(e,this.mp)}mv(){let t=yt.windowHeight();return yt.windowOffsetY()+t}gv(t,e){let i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+e,n=this.Ep(t,e),o=Math.round(i/n*100);return Math.min(o,this.mp)}fv(t){let e=window.getComputedStyle(t).paddingTop||"0px";return parseInt(e,10)}Ep(t,e){return t.scrollHeight+t.getBoundingClientRect().top+e}getRequestParameters(){return{sr:`${this.Zr}`,mdh:`${this.tn}`}}}return H([N("MaxScrollRate handler")],s.prototype,"maxScrollRateListener",null),s})(),Qt=(()=>{let s;return function(r){r.Visible="visible",r.Hidden="hidden",r.Blur="blur",r.PagehideVisible="pagehideVisible",r.PagehideHidden="pagehideHidden",r.ExitPageByNavigate="exitPageByNavigate"}(s||(s={})),s})(),ll=(()=>{class s{constructor(){this.V=!1,this.$s=t=>{try{switch(t.type){case"visibilitychange":return document.visibilityState==="hidden"?this.Zt(Qt.Hidden):this.Zt(Qt.Visible);case"pagehide":return document.visibilityState==="hidden"?this.Zt(Qt.PagehideHidden):this.Zt(Qt.PagehideVisible);case"blur":return this.Zt(Qt.Blur);case"navigate":return this.yv(t)?this.Zt(Qt.ExitPageByNavigate):void 0;default:return}}catch{}}}start(){this.V||(this.V=!0,this.Qc(),this.Ev(),this.Sv(),Zo()&&this.vv())}stop(){this.V&&(this.V=!1,this.Zc(),this._v(),this.wv(),Zo()&&this.Tv())}onEvent(t){this.Zt=t}vv(){window.navigation.addEventListener("navigate",this.$s)}Tv(){window.navigation.removeEventListener("navigate",this.$s)}Qc(){document.addEventListener("visibilitychange",this.$s)}Zc(){document.removeEventListener("visibilitychange",this.$s)}Ev(){window.addEventListener("pagehide",this.$s)}_v(){window.removeEventListener("pagehide",this.$s)}Sv(){window.addEventListener("blur",this.$s)}wv(){window.removeEventListener("blur",this.$s)}yv(t){return t instanceof NavigateEvent?!t.hashChange&&!t.downloadRequest&&!t.formData:!1}}return s})();var dg=1024,pg=512,Xr=1024,Kr="||",fg=(()=>{class s extends Mt{constructor(t,e,i,n,o,c,l,u,E,p,y,m,S,I,P,v,_,D,O,A,j){super(),this.f=t,this.zs=e,this.xt=i,this.er=n,this.tl=o,this.$e=c,this.Ce=l,this.sl=u,this.B=E,this.Jt=p,this.Q=y,this.il=m,this.ze=S,this.W=I,this.Fo=P,this.ms=v,this.ys=_,this.rl=D,this.vi=O,this._i=A,this.wi=j,this.Fs=new al,this.$o=!1,this.nl=[]}init(){var t,e,i,n,o,c,l;this.zs.onEvent(u=>this.Nt(u)),this.xt.onEvent(u=>this.Nt(u)),this.er.onEvent(()=>{let u=this.er.getRequestParameters();this.W.setQueryParams(u),this.Ce.setQueryParams(u)}),this.il.onEvent(u=>this.Ie(u)),this.ol(),(t=this.Fo)===null||t===void 0||t.onEvent(u=>this.Nt(u)),(e=this.vi)===null||e===void 0||e.onEvent(u=>this.Nt(u)),(i=this.ms)===null||i===void 0||i.onEvent(u=>this.Nt(u)),(n=this.ys)===null||n===void 0||n.onEvent(u=>this.Nt(u)),this.bv(),(o=this.rl)===null||o===void 0||o.onEvent(u=>this.Ie(u)),(c=this._i)===null||c===void 0||c.onEvent(u=>this.Ie(u)),(l=this.wi)===null||l===void 0||l.onEvent(u=>this.Ie(u))}bv(){this.Ce.onBeaconSuccess(()=>{this.$e.clearEvents()}),this.Ce.onBeaconFailure(t=>{this.Av(t)})}initStates(){let t=this.sl.getRequestParameters(),e=this.tl.getRequestParameters(),i=this.er.getRequestParameters();this.W.setQueryParams(t),this.W.setQueryParams(e),this.W.setQueryParams(i),this.Ce.setQueryParams(t),this.Ce.setQueryParams(e),this.Ce.setQueryParams(i),this.al()}clearStates(t){var e,i;this.zs.flushPendingDebouncedListeners(),(e=this.ms)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.ys)===null||i===void 0||i.flushPendingTextHighlightEvent(),t?(this.cl(),this.sendLastMessageBeacon()):this.sendEvents(),this.er.reset(),this.W.removeQueryParams()}onStart(t){var e,i,n,o,c,l,u;t||(e=this.rl)===null||e===void 0||e.start(),this.ze.start(),this.zs.start(),this.er.start(),this.xt.start(),(i=this.Fo)===null||i===void 0||i.start(),(n=this.ys)===null||n===void 0||n.start(),t||this.il.start(),(o=this.ms)===null||o===void 0||o.start(),(c=this.vi)===null||c===void 0||c.start(),(l=this._i)===null||l===void 0||l.start(),(u=this.wi)===null||u===void 0||u.start(),csArray.prototype.forEach.call(this.nl,E=>{this.Ie(E)}),this.nl=[]}collectInitialEvents(){var t;(t=this.Fo)===null||t===void 0||t.collectInitialEvents()}onIframeAnalysisBrowserEvent(t){this.Ie(t)}onIframeAnalysisUserEvent(t){this.Nt(t)}onExternalEvent(t){this.K(t)}Ie(t){this.B.isCurrentPageviewValid()&&this.K(t)}Nt(t){this.B.refreshSession(),this.B.isSessionValid()&&this.K(t)}K(t){this.$e.addEvent(this.Rv(t)),this.$e.isFull()&&this.sendEvents(),this.f.emitDebugEvents&&this.Fs.emit("analysisEvent",{...t,typeName:z[t.type]})}Rv(t){return t.ts=this.Ti(),t}cl(){this.Ce.setQueryParams({hlm:"true"}),this.$o=!0}sendLastMessageBeacon(){this.Ce.removeQueryParams(["i"]),this.Ce.setQueryParams(this.sl.getRequestParameters()),this.Ce.setQueryParams(this.tl.getRequestParameters()),this.Ce.send(this.$e.stringifyEvents()),this.Ce.removeQueryParams(["hlm"]),this.$o=!1}sendEvents(){this.$e.isEmpty()||(this.Ce.removeQueryParams(["i"]),this.W.setQueryParams(this.sl.getRequestParameters()),this.W.setQueryParams(this.tl.getRequestParameters()),this.W.send(this.$e.getEvents()),this.$e.clearEvents())}onStop(){var t,e,i,n,o,c,l;this.ze.stop(),this.zs.stop(),this.er.stop(),this.xt.stop(),this.il.stop(),(t=this.Fo)===null||t===void 0||t.stop(),(e=this.ms)===null||e===void 0||e.stop(),(i=this.ys)===null||i===void 0||i.stop(),(n=this.vi)===null||n===void 0||n.stop(),this.$e.empty(),(o=this.rl)===null||o===void 0||o.stop(),(c=this._i)===null||c===void 0||c.stop(),(l=this.wi)===null||l===void 0||l.stop()}al(){this.es=M.now()}Ti(){return M.now()-this.es}ol(){this.ze.onEvent(t=>{var e,i;t!==Qt.Visible&&((e=this.ms)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.ys)===null||i===void 0||i.flushPendingTextHighlightEvent(),t===Qt.PagehideVisible?this.cl():t===Qt.PagehideHidden?(this.cl(),this.sendLastMessageBeacon()):(!this.$e.isEmpty()||this.$o)&&this.sendLastMessageBeacon())})}Av(t){try{(!this.$e.isEmpty()||this.$o)&&this.Jt.save({requestParameters:t,events:this.$e.getEvents()})}catch{}}pushSubmitCommandEvent(t,e){if(!og(t)||!Ie(e))throw new Error(`Command misuse: ${co}`);let i={status:t,type:z.SUBMIT_COMMAND,ts:0,tgt:this.Q.getElementPath(e)};i.tgt!==Ce.INVALID_ELEMENT&&this.Ie(i)}pushCustomEvent(t,e,i){if(!(R(t)&&!fn(t))||i!==void 0&&!W(i))throw new Error(`Command misuse: ${kn}`);let n=ag(e)?e:fs.WEB,o=this.Cv(i),c={type:z.CUSTOM_EVENT,ts:0,customEventName:zt.truncate(t,dg),sourceLibrary:n,...pn(o)?{}:{properties:o}};this.isStarted?this.Ie(c):csArray.prototype.push.call(this.nl,c)}Cv(t){let e={};for(let i in t){if(i.length>pg)continue;let n=t[i];if(pt(n)||ir(n))e[i]=csString(n);else if(this.Sp(n))e[i]=zt.truncate(n,Xr);else if(this.Iv(n)){let o=this.Pv(n);o!==""&&(e[i]=o)}}return e}Pv(t){let e="";for(let i=0;i<t.length;i++){let n=t[i];if(!pt(n)&&!ir(n)&&!this.Sp(n))continue;let o=csString(n);if(e==="")e=zt.truncate(o,Xr);else if(e.length+Kr.length+o.length<=Xr)e+=Kr+o;else break}return e}Sp(t){return R(t)&&!fn(t)&&!csString.prototype.includes.call(t,Kr)}Iv(t){return csArray.isArray(t)&&t.length>0}}return s})(),Si=(()=>{class s{constructor(...t){this.vp=t}addProvider(t){csArray.prototype.push.call(this.vp,t)}getRequestParameters(){return csArray.prototype.reduce.call(this.vp,(t,e)=>({...e.getRequestParameters(),...t}),{})}}return s})(),gg=(()=>{class s{constructor(t,e){this.Jt=t,this.W=e,this._p=()=>{document.visibilityState==="visible"&&this.wp()}}start(){this.wp(),this.Qc()}stop(){this.Zc()}getRecoveryStorage(){return this.Jt}wp(){let t=this.Jt.recover();if(t!==null){let{requestParameters:e,events:i}=t;this.W.send(i,e)}}Qc(){document.addEventListener("visibilitychange",this._p)}Zc(){document.removeEventListener("visibilitychange",this._p)}}return s})(),hl=(()=>{class s{constructor(t){this.Tp=[],this.bp=[],this.Xt={},this.Kt=t}setQueryParams(t){csArray.prototype.forEach.call(Object.keys(t),e=>{this.Xt[e]=t[e]})}removeQueryParams(t){t?csArray.prototype.forEach.call(t,e=>{delete this.Xt[e]}):this.Xt={}}onBeaconSuccess(t){csArray.prototype.push.call(this.Tp,t)}onBeaconFailure(t){csArray.prototype.push.call(this.bp,t)}send(t){let e=yi.toQuery({...this.Xt,ct:wr.UNCOMPRESSED}),i=this.Ov(e,t);return i?csArray.prototype.forEach.call(this.Tp,n=>n()):csArray.prototype.forEach.call(this.bp,n=>n(this.Xt)),i}Ov(t,e){try{if(typeof csNavigatorsendBeacon!="function")return!1;let i=csNavigatorsendBeacon(`${this.Kt}?${t}`,e||"");if(i)return i}catch{}return typeof navigator.sendBeacon!="function"?!1:navigator.sendBeacon(`${this.Kt}?${t}`,e||"")}}return s})(),mg=(()=>{class s{constructor(t){this.ir=t}save(t){localStorage.setItem(this.ir,csJSON.stringify(t))}clear(){localStorage.removeItem(this.ir)}recover(){let t=localStorage.getItem(this.ir);if(t===null)return null;let e=null;try{e=csJSON.parse(t)}catch{B.error(`Invalid item in localStorage.
         (key:${this.ir}; value:${t})`)}finally{this.clear()}return e}}return s})(),yg=(()=>{class s{constructor(t){this.rn=t,this.nn=e=>this.processMetric(e),this.V=!1}onEvent(t){this.L=t}start(){this.V||(this.V=!0,this.rn.onFCP(this.nn),this.rn.onCLS(this.nn),this.rn.onLCP(this.nn),this.rn.onTTFB(this.nn),this.rn.onINP(this.nn))}stop(){this.V=!1}processMetric(t){if(!this.V)return;let e={type:z.PERFORMANCE,name:t.name,val:t.value,ts:0};this.L(e)}}return H([N("Performance metric handler")],s.prototype,"processMetric",null),s})(),ul=-1,Ks=s=>{addEventListener("pageshow",r=>{r.persisted&&(ul=r.timeStamp,s(r))},!0)},pe=(s,r,t,e)=>{let i,n;return o=>{r.value>=0&&(o||e)&&(n=r.value-(i!=null?i:0),(n||i===void 0)&&(i=r.value,r.delta=n,r.rating=((c,l)=>c>l[1]?"poor":c>l[0]?"needs-improvement":"good")(r.value,t),s(r)))}},ro=s=>{requestAnimationFrame(()=>requestAnimationFrame(()=>s()))},no=()=>{let s=performance.getEntriesByType("navigation")[0];if(s&&s.responseStart>0&&s.responseStart<performance.now())return s},Ri=()=>{var r;let s=no();return(r=s==null?void 0:s.activationStart)!=null?r:0},fe=(s,r=-1)=>{let t=no(),e="navigate";return ul>=0?e="back-forward-cache":t&&(document.prerendering||Ri()>0?e="prerender":document.wasDiscarded?e="restore":t.type&&(e=t.type.replace(/_/g,"-"))),{name:s,value:r,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:e}},Jr=new WeakMap;function oo(s,r){return Jr.get(s)||Jr.set(s,new r),Jr.get(s)}var In=class{constructor(){ye(this,"t");ye(this,"i",0);ye(this,"o",[])}h(r){var i;if(r.hadRecentInput)return;let t=this.o[0],e=this.o.at(-1);this.i&&t&&e&&r.startTime-e.startTime<1e3&&r.startTime-t.startTime<5e3?(this.i+=r.value,this.o.push(r)):(this.i=r.value,this.o=[r]),(i=this.t)==null||i.call(this,r)}},Ci=(s,r,t={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(s)){let e=new PerformanceObserver(i=>{Promise.resolve().then(()=>{r(i.getEntries())})});return e.observe({type:s,buffered:!0,...t}),e}}catch{}},ao=s=>{let r=!1;return()=>{r||(s(),r=!0)}},xs=-1,Na=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,fr=s=>{document.visibilityState==="hidden"&&xs>-1&&(xs=s.type==="visibilitychange"?s.timeStamp:0,Eg())},Ma=()=>{addEventListener("visibilitychange",fr,!0),addEventListener("prerenderingchange",fr,!0)},Eg=()=>{removeEventListener("visibilitychange",fr,!0),removeEventListener("prerenderingchange",fr,!0)},dl=()=>{var s;if(xs<0){let r=Ri(),t=document.prerendering||(s=globalThis.performance.getEntriesByType("visibility-state").filter(e=>e.name==="hidden"&&e.startTime>r)[0])==null?void 0:s.startTime;xs=t!=null?t:Na(),Ma(),Ks(()=>{setTimeout(()=>{xs=Na(),Ma()})})}return{get firstHiddenTime(){return xs}}},Cr=s=>{document.prerendering?addEventListener("prerenderingchange",()=>s(),!0):s()},ka=[1800,3e3],pl=(s,r={})=>{Cr(()=>{let t=dl(),e,i=fe("FCP"),n=Ci("paint",o=>{for(let c of o)c.name==="first-contentful-paint"&&(n.disconnect(),c.startTime<t.firstHiddenTime&&(i.value=Math.max(c.startTime-Ri(),0),i.entries.push(c),e(!0)))});n&&(e=pe(s,i,ka,r.reportAllChanges),Ks(o=>{i=fe("FCP"),e=pe(s,i,ka,r.reportAllChanges),ro(()=>{i.value=performance.now()-o.timeStamp,e(!0)})}))})},Da=[.1,.25],Sg=(s,r={})=>{pl(ao(()=>{let t,e=fe("CLS",0),i=oo(r,In),n=c=>{for(let l of c)i.h(l);i.i>e.value&&(e.value=i.i,e.entries=i.o,t())},o=Ci("layout-shift",n);o&&(t=pe(s,e,Da,r.reportAllChanges),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(n(o.takeRecords()),t(!0))}),Ks(()=>{i.i=0,e=fe("CLS",0),t=pe(s,e,Da,r.reportAllChanges),ro(()=>t())}),setTimeout(t))}))},fl=0,Qr=1/0,Gi=0,vg=s=>{for(let r of s)r.interactionId&&(Qr=Math.min(Qr,r.interactionId),Gi=Math.max(Gi,r.interactionId),fl=Gi?(Gi-Qr)/7+1:0)},Pn,xa=()=>{var s;return Pn?fl:(s=performance.interactionCount)!=null?s:0},_g=()=>{"interactionCount"in performance||Pn||(Pn=Ci("event",vg,{type:"event",buffered:!0,durationThreshold:0}))},La=0,On=class{constructor(){ye(this,"u",[]);ye(this,"l",new Map);ye(this,"m");ye(this,"p")}v(){La=xa(),this.u.length=0,this.l.clear()}P(){let r=Math.min(this.u.length-1,Math.floor((xa()-La)/50));return this.u[r]}h(r){var i,n;if((i=this.m)==null||i.call(this,r),!r.interactionId&&r.entryType!=="first-input")return;let t=this.u.at(-1),e=this.l.get(r.interactionId);if(e||this.u.length<10||r.duration>t.T){if(e?r.duration>e.T?(e.entries=[r],e.T=r.duration):r.duration===e.T&&r.startTime===e.entries[0].startTime&&e.entries.push(r):(e={id:r.interactionId,entries:[r],T:r.duration},this.l.set(e.id,e),this.u.push(e)),this.u.sort((o,c)=>c.T-o.T),this.u.length>10){let o=this.u.splice(10);for(let c of o)this.l.delete(c.id)}(n=this.p)==null||n.call(this,e)}}},gl=s=>{let r=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?s():(r(s=ao(s)),document.addEventListener("visibilitychange",s,{once:!0}))},Va=[200,500],wg=(s,r={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&Cr(()=>{var c;_g();let t,e=fe("INP"),i=oo(r,On),n=l=>{gl(()=>{for(let E of l)i.h(E);let u=i.P();u&&u.T!==e.value&&(e.value=u.T,e.entries=u.entries,t())})},o=Ci("event",n,{durationThreshold:(c=r.durationThreshold)!=null?c:40});t=pe(s,e,Va,r.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(n(o.takeRecords()),t(!0))}),Ks(()=>{i.v(),e=fe("INP"),t=pe(s,e,Va,r.reportAllChanges)}))})},Nn=class{constructor(){ye(this,"m")}h(r){var t;(t=this.m)==null||t.call(this,r)}},Ua=[2500,4e3],Tg=(s,r={})=>{Cr(()=>{let t=dl(),e,i=fe("LCP"),n=oo(r,Nn),o=l=>{r.reportAllChanges||(l=l.slice(-1));for(let u of l)n.h(u),u.startTime<t.firstHiddenTime&&(i.value=Math.max(u.startTime-Ri(),0),i.entries=[u],e())},c=Ci("largest-contentful-paint",o);if(c){e=pe(s,i,Ua,r.reportAllChanges);let l=ao(()=>{o(c.takeRecords()),c.disconnect(),e(!0)});for(let u of["keydown","click","visibilitychange"])addEventListener(u,()=>gl(l),{capture:!0,once:!0});Ks(u=>{i=fe("LCP"),e=pe(s,i,Ua,r.reportAllChanges),ro(()=>{i.value=performance.now()-u.timeStamp,e(!0)})})}})},ja=[800,1800],Mn=s=>{document.prerendering?Cr(()=>Mn(s)):document.readyState!=="complete"?addEventListener("load",()=>Mn(s),!0):setTimeout(s)},bg=(s,r={})=>{let t=fe("TTFB"),e=pe(s,t,ja,r.reportAllChanges);Mn(()=>{let i=no();i&&(t.value=Math.max(i.responseStart-Ri(),0),t.entries=[i],e(!0),Ks(()=>{t=fe("TTFB",0),e=pe(s,t,ja,r.reportAllChanges),e(!0)}))})},Ag=(()=>{class s{onFCP(t){try{pl(t,{reportAllChanges:!0})}catch{q.counters.webVitalsErrors.count("FCP")}}onCLS(t){try{Sg(t,{reportAllChanges:!0})}catch{q.counters.webVitalsErrors.count("CLS")}}onLCP(t){try{Tg(t,{reportAllChanges:!0})}catch{q.counters.webVitalsErrors.count("LCP")}}onTTFB(t){try{bg(t,{reportAllChanges:!0})}catch{q.counters.webVitalsErrors.count("TTFB")}}onINP(t){try{wg(t,{reportAllChanges:!0})}catch{q.counters.webVitalsErrors.count("INP")}}}return s})();var Ii=(()=>{class s{isEventTypeSupported(t){return csArray.prototype.indexOf.call(this.supportedEventTypes,t)!==-1}enhanceAnalysisEvent(t,e){return this.isEventTypeSupported(e.type)?this.baseEnhanceAnalysisEvent(t,e):e}}return s})(),Rg=(()=>{class s extends Ii{constructor(){super(...arguments),this.supportedEventTypes=[z.CHANGE],this.e_=["text","email","number","search","tel","url","password"]}baseEnhanceAnalysisEvent(t,e){let i=wt(t);return Sr(i)&&csArray.prototype.indexOf.call(this.e_,i.type)>=0&&(e.isBlank=i.value===""),e}}return s})();var ml=(()=>{class s extends Ii{constructor(t){super(),this.pt=t,this.supportedEventTypes=[z.MOUSEDOWN,z.MOUSEUP,z.CLICK,z.MOUSEOVER,z.TAP,z.DRAG,z.FLICK,z.SUBMIT,z.CHANGE]}baseEnhanceAnalysisEvent(t,e){return e.tgt||(e.tgt=this.pt.getEventTargetPath(t)),e}}return s})(),Ha=65535,Cg=(()=>{let s;return function(r){function t(e){let i=wt(e);if(!i||!ct(i)||!ue(i.getBoundingClientRect)||!ut(e.pageX)||!ut(e.pageY))return{xRel:-1,yRel:-1,valid:!1};let n=i.getBoundingClientRect(),o=e.pageX-n.left-yt.windowOffsetX(),c=e.pageY-n.top-yt.windowOffsetY();i!==document.documentElement&&(o+=i.scrollLeft,c+=i.scrollTop);let l=Math.max(i.scrollWidth,n.width),u=Math.max(i.scrollHeight,n.height),E=Math.round(o/l*Ha),p=Math.round(c/u*Ha);return{xRel:E,yRel:p,valid:!0}}r.getRelativePosition=t}(s||(s={})),s})(),Ig=Math.pow(2,31);function Pg(s,r=0){let l=r>>>0,u=s.length;for(let m=0;m<u-3;m+=4){let S=(csString.prototype.charCodeAt.call(s,m)&255|(csString.prototype.charCodeAt.call(s,m+1)&255)<<8|(csString.prototype.charCodeAt.call(s,m+2)&255)<<16|(csString.prototype.charCodeAt.call(s,m+3)&255)<<24)>>>0;S=Math.imul(S,3432918353),S=S<<15|S>>>17,S=Math.imul(S,461845907),l^=S,l=l<<13|l>>>19,l=Math.imul(l,5)+3864292196}let E=0,p=u&3,y=u-p;switch(p){case 3:E^=(csString.prototype.charCodeAt.call(s,y+2)&255)<<16;case 2:E^=(csString.prototype.charCodeAt.call(s,y+1)&255)<<8;case 1:E^=csString.prototype.charCodeAt.call(s,y)&255,E=Math.imul(E,3432918353),E=E<<15|E>>>17,E=Math.imul(E,461845907),l^=E}return l^=u,l^=l>>>16,l=Math.imul(l,2246822507),l^=l>>>13,l=Math.imul(l,3266489909),l^=l>>>16,l>>>0}function yl(s){return Pg(s)+Ig>>>0}var Og=(()=>{class s extends Ii{constructor(t,e){super(),this.us=t,this.pt=e,this.supportedEventTypes=[z.MOUSEMOVE,z.CLICK],this.Sl=""}baseEnhanceAnalysisEvent(t,e){let{valid:i,xRel:n,yRel:o}=Cg.getRelativePosition(t);if(i){let c=this.pt.getEventTargetPath(t);c!==Ce.INVALID_ELEMENT&&(e.xRel=n,e.yRel=o,e.type===z.MOUSEMOVE&&(c!==this.Sl||this.us.iframesTracking?(this.Sl=c,e.tgtHM=c,this.us.isChild||(e.tgtHMH=yl(e.tgtHM))):e.tgtHM=""))}else e.type===z.MOUSEMOVE&&(this.Sl="");return e}}return s})(),Xe=(()=>{let s;return function(r){r[r.ANONYMIZED=0]="ANONYMIZED",r[r.CAPTURED=1]="CAPTURED",r[r.MASKED=2]="MASKED",r[r.ENCRYPTED=3]="ENCRYPTED"}(s||(s={})),s})(),Ba=100,El=(()=>{class s extends Ii{constructor(t,e,i){super(),this.f=t,this.ce=e,this.M=i,this.supportedEventTypes=[z.TAP,z.CLICK,z.SUBMIT]}s_(t){let e="",i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT),n=i.nextNode();for(;n;){if(e+=n.textContent,Jn(n.parentElement)||Kn(n.parentElement)||this.ce.getElementSensitiveStatus(n.parentElement)!==Xe.CAPTURED)return!0;if(csString.prototype.trim.call(e).length>=Ba)break;n=i.nextNode()}return!1}i_(t){let e=Gs(t,"button,a");return e||(this.f.collectTargetText===vn.ButtonAndLinkOnly?null:t)}baseEnhanceAnalysisEvent(t,e){if(Ie(csEventtarget.apply(t))){let i=this.i_(csEventtarget.apply(t));if(i&&R(i.textContent)&&!this.s_(i)&&!this.M.hasPII(i.textContent,this.f.anonymizeDigits)){let n=zt.truncate(csString.prototype.trim.call(i.textContent),Ba);n.length>0&&(e.text=n)}}return e}}return s})(),Sl=(()=>{class s extends Ii{constructor(t,e){super(),this.pt=t,this.ce=e,this.supportedEventTypes=[z.CLICK,z.SUBMIT,z.CHANGE,z.TAP]}baseEnhanceAnalysisEvent(t,e){let i=this.ce.getSensitiveStatus().useAnonymization,{path:n,hierarchy:o}=this.pt.getEventTargetPathAndHierarchy(t,i);return e.tgt=n,e.hrchy=o,e}}return s})();function Ng(s,r,t){let e=[];return s.mouseMoveHeatmapEnabled&&csArray.prototype.push.call(e,new Og(s,r)),s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(e,new El(s,t,new Ai)),s.collectHierarchy&&csArray.prototype.push.call(e,new Sl(r,t)),csArray.prototype.push.call(e,new Rg,new ml(r)),e}function Mg(s,r,t){let e=[];return s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(e,new El(s,t,new Ai)),s.collectHierarchy&&csArray.prototype.push.call(e,new Sl(r,t)),csArray.prototype.push.call(e,new ml(r)),e}var kg=50,Dg=(()=>{class s{constructor(t=[]){this.Vt=t}stringifyEvents(){return csJSON.stringify(this.Vt)}addEvent(t){csArray.prototype.push.call(this.Vt,t)}eventsCount(){return this.Vt.length}clearEvents(){this.Vt=[]}empty(){this.clearEvents()}isFull(){return this.eventsCount()>=kg}isEmpty(){return this.Vt.length===0}getEvents(){return this.Vt}}return s})(),xg="csAnalysisEventsPersisted",Fa="v2/events",co=["submit"],kn=["trackEvent"],Lg="track",Vg=(()=>{class s{constructor(t,e,i,n,o,c,l,u,E,p,y,m,S){this.f=t,this.gt=e,this.I=i,this.Q=n,this.Lt=o,this.E=c,this.B=l,this.xt=u,this.St=E,this.de=p,this.J=y,this.ce=m,this.ar=S}init(){let t=new Dg,e=this.de.create(`${this.f.getTrackerUri()}/${Fa}`,!0,"base64");this.Wo=this.r_(e),this.pe=this.n_(t,this.Wo.getRecoveryStorage(),e),this.pe.init(),this.J.addListener(this.pe),this.St.addListener(this.pe),this.E.register(co,(i,n)=>{this.pe.pushSubmitCommandEvent(i,n)}),this.E.register(kn,i=>{if(!W(i))throw new Error(`Command misuse: ${kn}`);this.pe.pushCustomEvent(i.name,i.source,i.properties)}),this.ar&&this.ar.register(Lg,(i,n,o)=>{R(i)&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(i),"chameleon")!==-1&&(o=fs.CHAMELEON),this.pe.pushCustomEvent(i,o,n)})}onStartTracking(t){this.Wo.start(),this.pe.start(t)}onAfterNaturalPageView(){this.pe.initStates()}onAfterArtificialPageView(){this.pe.initStates(),this.pe.collectInitialEvents()}onArtificialPageViewEnd(){this.pe.clearStates(!0)}onBeforeSessionRenewal(){this.pe.clearStates(),this.pe.stop(),this.Wo.stop()}onOptout(){this.pe.stop(),this.Wo.stop()}n_(t,e,i){var n;let o=new sg(window),c=new ug,l=Ng(this.f,this.Q,this.ce),u=[];this.f.collectSubmit||csArray.prototype.push.call(u,"submit");let E=new hg(l,this.Q,this.Lt,u),p=Mg(this.f,this.Q,this.ce),y=new cg(p,this.xt),m=new yg(new Ag),S=new ll,I,P,v,_=new hl(`${this.f.getTrackerUri()}/${Fa}`),D=new Si(this.gt,this.I),O,A,j,it;return new fg(this.f,E,y,c,o,t,_,D,this.B,e,this.Q,m,S,i,I,P,v,O,A,j,it)}r_(t){return new gg(new mg(xg),t)}}return s})();var Ug=["api-errors:maskUrl"];var jg=["trackError"];var Hg=512,Bg=255,Zr=(()=>{class s{constructor(t,e){this.key=csString.prototype.slice.call(t,0,Hg),this.value=R(e)?csString.prototype.slice.call(e,0,Bg):e}static isKeyValid(t){return R(t)}static isValueValid(t){return R(t)||Bs(t)}}return s})(),Fg=(()=>{class s extends Mt{constructor(t,e){super(),this.zt=t,this.M=e,this.Ml=[]}onStart(){csArray.prototype.forEach.call(this.Ml,t=>this.Qp(t.key,t.value)),this.Ml=[]}onStop(){}Qp(t,e){let i=this.M.anonymizePII(t),n=Bs(e)?e:this.M.anonymizePII(e);this.zt.add(new Zr(i,n))}trackDynamicVariable(t,e){if(Zr.isKeyValid(t)&&Zr.isValueValid(e)){if(!this.isStarted){csArray.prototype.push.call(this.Ml,{key:t,value:e});return}this.Qp(t,e)}else throw new Error(`Command misuse: ${lo[0]}`)}}return s})(),$g=(()=>{class s{constructor(t){this.fe=t,this.zt=[]}add(t){csArray.prototype.push.call(this.zt,t),this.setBatchReadyCall()}clear(){this.zt=[]}onBatchReady(t){this.L_=t}getRequestParameters(){let t={};for(let e of this.zt)t[e.key]=e.value;return{dv:this.fe.compressSync(csJSON.stringify(t),"base64"),ct:this.fe.algorithm}}setBatchReadyCall(){this.L_()}}return H([Rr({wait:0,mode:"trailing"}),N("dynamicVariablesBatchReady")],s.prototype,"setBatchReadyCall",null),s})(),zg="dvar",lo=["trackDynamicVariable"],Gg=(()=>{class s{constructor(t,e,i,n,o,c){this.E=t,this.R=e,this.f=i,this.Le=n,this.fe=o,this.M=c,this.ds=new zs(this.f.getTrackerUri(),zg),this.zt=new $g(this.fe),this.ki=new Fg(this.zt,this.M)}init(){this.ds.setRequestParametersProviders(this.Le,this.zt),this.R.setDynamicVariablesService(this.ki),this.zt.onBatchReady(()=>this.ds.send()),this.ds.after(()=>this.zt.clear()),this.E.register(lo,({key:t,value:e}={})=>{this.ki.trackDynamicVariable(t,e)})}onStartTracking(){this.ki.start()}}return s})(),$a=(()=>{class s{constructor(t,e){this.id=t,this.revenue=e}static from(t){let e=new s(t.id,parseFloat(t.revenue));return isNaN(parseFloat(t.tax))||(e.tax=parseFloat(t.tax)),isNaN(parseFloat(t.shipping))||(e.shipping=parseFloat(t.shipping)),R(t.currency)&&t.currency.length<=10&&(e.currency=t.currency),e}hasValidRevenue(){return!isNaN(this.revenue)&&this.revenue>=0}static isValid(t){return ut(t)&&pt(t.revenue)&&R(t.currency)&&t.currency.length<=10&&(!ut(t.id)||R(t.id))}}return s})(),vl=100,qg=100,Wg=(()=>{class s{constructor(t,e,i,n){this.id=t,this.name=e,this.price=i,this.quantity=n}static from(t){if(!s.Bc(t))return null;let e=new s(t.id,t.name,parseFloat(t.price),parseInt(t.quantity,10));return K(t.sku)&&(e.sku=t.sku),K(t.category)&&(e.category=t.category),K(t.merchant)&&t.merchant.length>0&&(e.merchant=t.merchant.slice(0,vl)),e}static Bc(t){return ut(t)&&R(t.id)&&R(t.name)&&pt(parseFloat(t.price))&&Bs(parseInt(t.quantity,10))&&(!K(t.sku)||R(t.sku))&&(!K(t.category)||R(t.category))&&(!K(t.merchant)||R(t.merchant))}}return s})(),Yg=(()=>{class s extends Mt{constructor(t,e,i){super(),this.M=t,this.Zp=e,this.B=i,this.kl=[],this.clear()}onStart(){csArray.prototype.forEach.call(this.kl,t=>{this.ge=t.transaction,this.Sn=t.transactionItems,this.sendTransaction()}),this.kl=[]}onStop(){}addTransaction(t){let e=this.M.anonymizeFields(t,["id"]);this.ge=$a.from(e)}getTransaction(){return this.ge}sendTransaction(){if(!this.isStarted){csArray.prototype.push.call(this.kl,{transaction:this.ge,transactionItems:[...this.Sn]}),this.clear();return}if(!(this.Zp===null||this.B===null)&&(this.B.refreshSession(),!!this.B.isSessionValid())){if(!this.ge.hasValidRevenue()){B.warn("Transaction Service: unable to send transaction with invalid parameters");return}this.Zp.send()}}addItem(t){if(ue(t))throw new Error(`Command misuse: ${Ir[1]}`);let e=this.M.anonymizeFields(t,["id","name","sku","category"]),i=Wg.from(e);i!==null&&csArray.prototype.push.call(this.Sn,i)}getItems(){return this.Sn}clear(){this.ge=$a.from({revenue:NaN}),this.Sn=[]}getRequestParameters(){let t={id:this.ge.id?`${this.ge.id}`:"",revenue:`${this.ge.revenue}`};return K(this.ge.tax)&&(t.tax=`${this.ge.tax}`),K(this.ge.shipping)&&(t.shipping=`${this.ge.shipping}`),K(this.ge.currency)&&(t.cu=`${this.ge.currency}`),t.items=window.csJSON.stringify(this.Sn),t}}return s})(),Xg=(()=>{class s extends Mt{constructor(t,e){super(),this.V_=t,this.B=e,this.Pe=null,this.Dl=[]}onStart(){csArray.prototype.forEach.call(this.Dl,t=>{this.Pe=t,this.tf()}),this.Dl=[]}onStop(){}addToCart(t){let e={};R(t.sku)&&(e.sku=csString.prototype.slice.call(t.sku,0,qg)),R(t.merchant)&&(e.merchant=csString.prototype.slice.call(t.merchant,0,vl)),(e.sku||e.merchant)&&(this.Pe=e,this.tf())}getCartItem(){return this.Pe}tf(){if(!this.isStarted&&this.Pe!==null){csArray.prototype.push.call(this.Dl,this.Pe),this.clear();return}this.B.refreshSession(),this.B.isSessionValid()&&this.V_.send()}clear(){this.Pe=null}getRequestParameters(){if(!this.Pe)return{};let t={};return R(this.Pe.sku)&&this.Pe.sku.length>0&&(t.sku=this.Pe.sku),R(this.Pe.merchant)&&this.Pe.merchant.length>0&&(t.me=this.Pe.merchant),t}}return s})(),Kg=["ecommerce:addToCart","ec:cart:add"],ho=["ecommerce:addTransaction","ec:transaction:create"],Ir=["ecommerce:addItem","ec:transaction:items:add"],uo=["ecommerce:send","ec:transaction:send"],Jg=(()=>{class s{constructor(t,e,i,n,o,c,l){this.f=t,this.gt=e,this.I=i,this.E=n,this.M=o,this.B=c,this.A=l}init(){let t=new zs(this.f.getTrackerUri(),"transaction"),e=new zs(this.f.getTrackerUri(),"addtocart");this.is=new Yg(this.M,t,this.B),this.sa=new Xg(e,this.B);let i=new Si(this.gt,this.I,this.A,this.is);t.setRequestParametersProviders(i),t.after(()=>{this.is.clear()});let n=new Si(this.gt,this.I,this.A,this.sa);e.setRequestParametersProviders(n),e.after(()=>{this.sa.clear()}),this.E.register(ho,o=>{this.is.addTransaction(o)}),this.E.register(Ir,o=>this.is.addItem(o)),this.E.register(uo,()=>this.is.sendTransaction()),this.E.register(Kg,o=>{this.sa.addToCart(o)})}onStartTracking(){this.is.start(),this.sa.start()}}return s})();var Qg=2,po=(()=>{class s{constructor(t){this.G_=t,this.ia=0}addString(t){this.ia+=t.length*Qg}addArrayBuffer(t){this.ia+=t.byteLength}isThresholdReached(){return this.ia>this.G_}reset(){this.ia=0}}return s})();var za=(()=>{class s{static create(t,e){if(!s.isSupported())throw new Error("IntersectionObserver is not supported");if(e&&e.delay&&e.delay<100)throw new Error("Visibility delay should be > 100ms");return e!=null&&e.trackVisibility&&(t=s.W_(t)),new csIntersectionObserver(t,e)}static isSupported(){return!!window.csIntersectionObserver&&!!window.IntersectionObserverEntry}static W_(t){return(e,i)=>t(Re(e,Zg),i)}}return s})();function Zg(s){return s.isVisible||!nt.isVisibleInViewportInForeground(s.target)?s:{boundingClientRect:s.boundingClientRect,intersectionRatio:s.intersectionRatio,intersectionRect:s.intersectionRect,isIntersecting:s.isIntersecting,rootBounds:s.rootBounds,target:s.target,time:s.time,isVisible:!0}}var Dn=()=>(s,r,t)=>{t.value=tm(t.value)};function tm(s){let r=csSymbol("oncePerTickSymbol"),t=null,e={},i=function(){var n;let o=(n=this)!==null&&n!==void 0?n:e;if(t=arguments,o[r])return;o[r]=!0,qn(()=>{o[r]=!1,s.apply(o,t)})};return i.oncePerTickSymbol=r,i}Dn.isScheduled=(s,r)=>{let t=r.oncePerTickSymbol;return s[t]};var em=(()=>{class s{constructor(t){this.w=t,this.Js=new Map,this.nf=e=>{let i=e.target;if(this.Js.has(i))return!0;let n=!1;return this.Js.forEach((o,c)=>{n||!this.Js.get(c).subtree||(n=c.contains(i))}),n},mt.general.nbOfMutationObservers.increase(),this.D=new csMutationObserver(e=>{Dn.isScheduled(this,this.garbageCollect)&&(e=ar(e,this.nf)),e.length&&jt(()=>t(e,this))})}disconnect(){mt.general.nbOfMutationObservers.decrease(),this.D.disconnect(),this.Js=new Map}takeRecords(){return this.D.takeRecords()}observe(t,e){return mt.mutations.elementMutationObserved.increase(),this.Js.set(t,e),this.D.observe(t,e)}unobserve(t){this.Js.has(t)&&(mt.mutations.elementMutationObserved.decrease(),this.Js.delete(t),this.garbageCollect())}garbageCollect(){mt.mutations.unobserveGarbageCollection.measure(()=>{let t=ar(this.takeRecords(),this.nf);t.length&&this.w(t,this),this.D.disconnect(),this.Js.forEach((e,i)=>this.D.observe(i,e))})}}return Z([Dn()],s.prototype,"garbageCollect",null),s})(),sm=(()=>{class s{constructor(t){this.w=t,this.oa=new Set}onMutations(t){if(Tc(t,e=>{var i;return!!(!((i=e.removedNodes)===null||i===void 0)&&i.length)}))for(let e of this.oa.values())nt.isConnected(e)||(this.oa.delete(e),this.w(e))}observe(t){this.G||(this.G=new ge(e=>csSetTimeout(()=>this.onMutations(e))),this.G.observe()),this.oa.add(t)}disconnect(){var t;(t=this.G)===null||t===void 0||t.disconnect(),this.oa.clear(),this.G=void 0}}return Z([N("NodeDisconnectedObserver.onMutations")],s.prototype,"onMutations",null),s})(),im=300,gr=(()=>{class s{constructor(t){this.aa=new Set,this.Y_=new sm(e=>this.of(e)),this.z=!1,this.bt=t?{...Ga,...t}:Ga}stop(){var t,e;this.z=!1,(t=this.bn)===null||t===void 0||t.disconnect(),(e=this.D)===null||e===void 0||e.disconnect()}start(t){if(this.z)throw new Error("VisibilityObserver is already started");this.w=rs("VisibilityObserver:callback",(i,n)=>t(i,n));let e={root:null,rootMargin:"0px",threshold:.5,trackVisibility:!0,delay:im};this.bn=za.create(i=>this.handleIntersection(i),e),this.D=new em(i=>csSetTimeout(()=>{X(i,n=>this.of(n.target))})),this.xl(),this.z=!0}observe(t){if(!this.z)throw new Error("Observer is stopped.");this.bt.reobserve===!1&&t[this.Ll]||(mt.visibilityObserver.nbElements.increase(),t[this.Ll]=!0,this.watchIntersection(t))}xl(){this.ca=csSymbol("isVisible"),this.Ll=csSymbol("ObservedElement"),this.Vl=csSymbol("LinkedElement"),this.af=csSymbol("Tracked")}of(t){this.aa.add(t);for(let e of this.X_(t))this.aa.add(e);this.recheckCssVisibilityAll()}recheckCssVisibilityAll(){X(this.aa.keys(),t=>{!t.isConnected||nt.areAncestorsHiddenByCSS(t)||t[this.Ll]&&this.watchIntersection(t)}),this.aa.clear()}watchIntersection(t){this.D.unobserve(t),this.bn.unobserve(t);let e=nt.getTopAncestorHiddenByCSS(t);e?(e!==t&&(this.cf(e,t),this.watchMutation(e)),this.watchMutation(t)):this.bn.observe(t)}watchMutation(t,e=!0){e&&delete t[this.ca],this.bn.unobserve(t);let i={attributeFilter:["style","class","hidden"]};this.D.observe(t,i)}handleIntersection(t){for(let e of t){let i=e.target;if(!e.isVisible){nt.isVisibleInDocument(i)||this.K_(i);continue}let n=this.bt.allowSameMatch||!e.target[this.ca];e.target[this.ca]=!0,n&&!this.bt.delay&&this.onVisibilityChanged(e.target,ui.VisibleInViewPort)}this.bt.delay&&csSetTimeout(()=>{for(let e of t){let i=e.isIntersecting&&e.isVisible;e.target[this.ca]&&i&&this.onVisibilityChanged(e.target,ui.VisibleInViewPort)}},this.bt.delay)}K_(t){mt.visibilityObserver.hiddenElements.increase();let e=nt.getTopElement(t);this.watchMutation(t),e&&(this.Y_.observe(e),this.cf(e,t),this.watchMutation(e,!1))}cf(t,e){var i;(t[this.Vl]=(i=t[this.Vl])!==null&&i!==void 0?i:new Set).add(e)}X_(t){var e,i;let n=[],o=(i=(e=t[this.Vl])===null||e===void 0?void 0:e.values())!==null&&i!==void 0?i:[];return X(o,c=>csArray.prototype.push.call(n,c)),n}onVisibilityChanged(t,e){if(e===ui.VisibleInViewPort&&this.bt.trackOnce){if(this.bn.unobserve(t),this.D.unobserve(t),t[this.af])return;t[this.af]=!0}this.w(t,e)}static isSupported(){return za.isSupported()}}return Z([N()],s.prototype,"observe",null),Z([Rr({wait:50}),N(),Tt("recheckCssVisibilityAll")],s.prototype,"recheckCssVisibilityAll",null),Z([N()],s.prototype,"watchIntersection",null),Z([N()],s.prototype,"watchMutation",null),Z([N(),Tt("VisibilityObserver.handleIntersection")],s.prototype,"handleIntersection",null),Z([N()],s.prototype,"onVisibilityChanged",null),s})(),ui=(()=>{let s;return function(r){r.VisibleInViewPort="VisibleInViewPort",r.HiddenByAnother="HiddenByAnother",r.Hidden="Hidden"}(s||(s={})),s})(),Ga={delay:1e3,trackOnce:!0,reobserve:!1};var qi=(()=>{let s;return function(r){r[r.NOT_NEEDED=1]="NOT_NEEDED",r[r.NOT_EXPRESSED=2]="NOT_EXPRESSED",r[r.WITHDRAWN=3]="WITHDRAWN",r[r.GRANTED=4]="GRANTED"}(s||(s={})),s})(),ts=(()=>{let s;return function(r){function t(n){return n.replayConsentRequiredForSession}r.isReplayConsentNeeded=t;function e(n){return n.collectState===V.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED||n.collectState===V.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingBlockedByConsent=e;function i(n){return n.collectState===V.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingWithDrawn=i}(s||(s={})),s})(),rm=(()=>{class s{constructor(t,e,i,n){this.I=t,this.R=e,this.f=i,this.cs=n,this.yf=!1}isNaturalPageViewSent(){return this.yf}setNaturalPageViewSent(t){this.yf=t}getTrackingContext(){let t=this.R.getSession();if(!t)return null;let e=this.getSessionKey();if(!e)return null;let i=this.f.projectId,n=this.f.uxaDomain,o=t.pageNumber,c=this.cs.getPageViewType(),l=this.R.isReplayRecorded(),u=this.Aw(t);return{projectId:i,sessionKey:e,pageNumber:o,pageViewType:c,isRecording:l,uxaDomain:n,recordingConsentState:u,...this.f.smbConfig}}getSessionKey(){let t=this.I.getVisitor();return t?`${t.id}.${t.visitsCount}`:null}Aw(t){return ts.isReplayConsentNeeded(this.f)?t.collectState===V.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED?qi.NOT_EXPRESSED:t.collectState===V.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?qi.WITHDRAWN:qi.GRANTED:qi.NOT_NEEDED}}return s})(),nm=(()=>{class s{constructor(t){this.It=t,this.ee=[]}handleCommand(t){if(ue(t)&&(this.Cn(t),this.It.isNaturalPageViewSent())){let e=this.It.getTrackingContext();e!==null&&this.jt(t,e)}}Cn(t){csArray.prototype.push.call(this.ee,t)}executeRegisteredCallbacks(){let t=this.It.getTrackingContext();t!==null&&csArray.prototype.map.call(this.ee,e=>this.jt(e,t))}jt(t,e){csSetTimeout(()=>{t(e)})}}return s})(),om=(()=>{class s{constructor(t){this.It=t,this.Di=[]}handleCommand(t){if(this.It.isNaturalPageViewSent())return this.Rw(t);this.In(t)}Rw(t){let e=this.It.getSessionKey();return this.Ef(t)&&e!==null&&this.jt(t.callback,e),e}In(t){this.Ef(t)&&csArray.prototype.push.call(this.Di,t.callback)}flushPendingCallbacks(){let t=this.It.getSessionKey();t!==null&&csArray.prototype.forEach.call(this.Di,e=>{this.jt(e,t)}),this.Di=[]}Ef(t){return t&&typeof t.callback=="function"}jt(t,e){csSetTimeout(()=>{t(e)})}}return s})();function am(s,r){let{isRecording:t,pageNumber:e,projectId:i,siteId:n,uxaDomain:o,csLiteDomain:c}=s,l=/^(.+)\.(\d+)$/.exec(s.sessionKey),u;if(t&&l){let[,E,p]=l;n?u=`${c}/sites/${n}/player?uu=${E}&sn=${p}&pn=${e}`:u=`${o}/quick-playback/index.html?pid=${i}&uu=${E}&sn=${p}&pvid=${e}&recordingType=cs`,r.withTimestamp&&(u+=`&t=${M.now()-r.recordingStartTimestamp}`)}return{replayLink:u,isRecording:t}}var cm=(()=>{class s{constructor(t){this.It=t}handleCommand(t,e){ys(t)&&ue(e)&&this.jt(t,e)}jt(t,e){csSetTimeout(()=>{let i=this.It.getTrackingContext();if(i){let n=am(i,t);e(n)}})}}return s})(),lm=(()=>{class s{constructor(){this.ee=new Set}handleCommand(t,e){return!ue(t)||this.ee.has(t)?null:(this.ee.add(t),e&&(this.Ne=e,this.Sf(t,e)),()=>this.ee.delete(t))}executeCallbacks(t){this.Cw(t)&&(this.Ne=t,this.ee.forEach(e=>this.Sf(e,t)))}Sf(t,e){csSetTimeout(()=>{try{t(e)}catch{}})}Cw(t){let{isRecording:e,recordingStartTimestamp:i,etrState:n,etrStatus:o,collectState:c}=t;return this.Ne&&(this.Ne.isRecording!==e||this.Ne.recordingStartTimestamp!==i||this.Ne.etrState!==n||this.Ne.etrStatus!==o||this.Ne.collectState!==c)}}return s})(),_l=["afterPageView"],hm=["getSessionKey"],um=["onRecordingContextChange","onRecordingStateChange"],dm=["replay:link:generate"],pm=(()=>{class s{constructor(t,e,i,n,o,c,l,u){this.I=t,this.R=e,this.E=i,this.St=n,this.Z=o,this.f=c,this.cs=l,this.js=u,this.vf=null}init(){this.It=new rm(this.I,this.R,this.f,this.cs),this.jl=new nm(this.It),this._f=new om(this.It),this.Pn=new lm,this.Iw=new cm(this.It),this.E.register(hm,t=>this._f.handleCommand(t)),this.E.register(_l,t=>this.jl.handleCommand(t)),this.E.register(um,t=>this.Pn.handleCommand(t,this.js.getRecordingContext())),this.E.register(dm,(t,e)=>{this.gr&&this.Iw.handleCommand({...t,recordingStartTimestamp:this.js.getRecordingContext().recordingStartTimestamp},e)})}onAfterNaturalPageView(){var t;this.It.setNaturalPageViewSent(!0),this._f.flushPendingCallbacks(),this.jl.executeRegisteredCallbacks(),(t=this.vf)===null||t===void 0||t.sendAfterPageViewCallbackToChildren()}onAfterArtificialPageView(){var t;this.jl.executeRegisteredCallbacks(),(t=this.vf)===null||t===void 0||t.sendAfterPageViewCallbackToChildren()}onCollectStateChange(){this.executeRecordingContextChangeCallbacks()}onRecordingContextChange(){this.executeRecordingContextChangeCallbacks()}executeRecordingContextChangeCallbacks(){this.Pn.executeCallbacks(this.js.getRecordingContext())}setRecordingService(t){this.gr=t}}return H([Rr({wait:0,mode:"trailing"})],s.prototype,"executeRecordingContextChangeCallbacks",null),s})(),fm=(()=>{class s{constructor(t){this.E=t}init(){this.wf(s.Pw,Bc),this.wf(s.Ow,Hc)}wf(t,e){this.E.register([t],(i,n)=>{!R(i)||!(R(n)||Pe(n))||B.error(n,`${e}${i}`)})}}return s.Ow="logSnippetError",s.Pw="logImplementationSnippetError",s})(),gm="@ETP@",qa="@user-identifier@",mm=(()=>{class s extends Mt{constructor(t,e,i,n){super(),this.f=t,this.Nw=e,this.fe=i,this.J=n,this.Hl=[],this.xi=[]}onStart(){csArray.prototype.forEach.call(this.Hl,t=>this.Tf(t)),this.Hl=[],csArray.prototype.forEach.call(this.xi,t=>this.bf(t)),this.xi=[]}onStop(){}Tf(t){this.Mw(t)?is.isSupported()&&this.kw(t):this.Dw(t)}trackPageEvent(t){if(!s.Af(t))throw new Error(`Command misuse: ${fo[0]}`);this.isStarted?this.Tf(t):csArray.prototype.push.call(this.Hl,t)}Mw(t){return _n(t,qa)}async kw(t){if(!this.f.customHashIdEnabled)return;let e=csString.prototype.slice.call(t,qa.length);if(e.length>is.MAX_DIGEST_INPUT_SIZE){B.warn("UserIdentifier event: invalid user identifier");return}let i=await is.digest(e);i?(this.mr={eventName:i,isETR:!1,isCustomHashId:!0},this.da()):B.warn("Page event: unable to compute customHashId"),this.f.encryptionEnabled&&this.J.emitUserIdentifierEvent(e)}Dw(t){this.J.emitPageEvent(t),this.mr={eventName:t,isETR:!1,isCustomHashId:!1},this.da(),this.f.tagDeploymentMode===Ss.LoadClicktalePtc&&Ta.sendPageEvent(t)}bf(t){this.f.malkaEtrEnabled?this.xw(t):this.Lw(t)}trackEventTriggerRecording(t){if(!s.Af(t))throw new Error(`Command misuse: ${Pi[0]}`);this.isStarted?this.bf(t):csArray.prototype.push.call(this.xi,t)}xw(t){_n(t,gm)?this.J.emitEventTriggerRecording(t,ss.ETR_PAGE):this.J.emitEventTriggerRecording(t,ss.ETR_SESSION),this.mr={eventName:t,isETR:!0,isCustomHashId:!1},this.da()}Lw(t){Sf(this.f)&&(this.J.emitEventTriggerRecording(t,ss.ETR_LEGACY),this.mr={eventName:t,isETR:!0,isCustomHashId:!1},this.da(),this.f.tagDeploymentMode===Ss.LoadClicktalePtc&&Ta.sendEventTriggerRecording(t))}getRequestParameters(){return{value:this.fe.compressSync(this.mr.eventName,"base64"),ct:this.fe.algorithm,isETR:`${this.mr.isETR}`,isCustomHashId:`${this.mr.isCustomHashId}`}}da(){this.Nw.send()}static Af(t){return R(t)&&!!csString.prototype.trim.call(t)}}return s})(),fo=["trackPageEvent"],Pi=["trackEventTriggerRecording"],ym=(()=>{class s{constructor(t,e,i,n,o){this.f=t,this.E=e,this.fe=i,this.Le=n,this.J=o}init(){let t=new zs(this.f.getTrackerUri(),"pageEvent");this.pa=new mm(this.f,t,this.fe,this.J),t.setRequestParametersProviders(this.pa,this.Le),this.E.register(fo,e=>{this.pa.trackPageEvent(e)}),this.E.register(Pi,e=>{this.pa.trackEventTriggerRecording(e)})}onStartTracking(){this.pa.start()}}return s})(),Em=["hidePageTitle"],Sm=["resetHidePageTitle"],vm="onNextPageviewOnly",_m=(()=>{class s{constructor(t,e){this.Ee=t,this.E=e}init(){this.E.register(Em,t=>{let e=t===vm;this.Ee.setHidePageTitle(e)}),this.E.register(Sm,()=>this.Ee.resetHidePageTitle())}onAfterNaturalPageView(){this.Ee.updateStateOnAfterPageview()}onAfterArtificialPageView(){this.Ee.updateStateOnAfterPageview()}}return s})(),wl=(()=>{class s{constructor(){this.Rf=255,this.Vw="****",this.Uw="data-cs-hide-title",this.jw="data-heap-redact-text",this.fa={value:!1,onNextPageviewOnly:!1}}getRequestParameters(){return{t:this.getPageTitle()}}getPageTitle(){return this.fa.value||this.Hw()?this.Vw:this.Bw(window.document.title)}setHidePageTitle(t){this.fa={value:!0,onNextPageviewOnly:t}}resetHidePageTitle(){this.fa={value:!1,onNextPageviewOnly:!1}}updateStateOnAfterPageview(){this.fa.onNextPageviewOnly&&this.resetHidePageTitle()}Hw(){let t=window.csquerySelector[document.nodeType].call(document,"head > title");return t===null?!1:t.getAttribute(this.Uw)!==null||t.getAttribute(this.jw)!==null}Bw(t){return t.length>this.Rf?csString.prototype.substring.call(t,0,this.Rf):t}}return s})(),er=(()=>{let s;return function(r){r.Artificial="a",r.Renewal="r",r.Natural="n"}(s||(s={})),s})(),wm=(()=>{class s{constructor(){this.Bl=er.Natural}setPageViewType(t){this.Bl=t}getPageViewType(){return this.Bl}getRequestParameters(){return{pvt:this.Bl}}}return s})();var Tm=(()=>{class s extends Mt{constructor(t,e,i,n,o){super(),this.S=t,this.J=e,this.Fl=i,this.A=n,this.cs=o}init(){this.Fw()}onStart(t){t?this.$w():this.zw()}onStop(){}triggerArtificialPageView(t,e){this.isStarted?this.Cf(t,e):ut(t)&&this.A.overridePath(t,e),this.isStarted||(this.J.emitTargetingRulesArtificialPageview(this.A.getUrl()),this.A.cleanupOverrideLifespan())}zw(){this.cs.setPageViewType(er.Natural),this.S.emitBeforeNaturalPageView(this.A.getAnonymizedUrl()),this.Fl.send(),this.A.cleanupOverrideLifespan(),this.S.emitAfterNaturalPageView()}$w(){this.cs.setPageViewType(er.Renewal),this.S.emitBeforeNaturalPageView(this.A.getAnonymizedUrl()),this.Fl.send(),this.S.emitAfterNaturalPageView()}Cf(t,e){let i=this.A.getAnonymizedUrl();this.cs.setPageViewType(er.Artificial),this.S.emitArtificialPageViewEnd(),ut(t)&&this.A.overridePath(t,e),this.S.emitBeforeArtificialPageView(i,this.A.getAnonymizedUrl()),this.Fl.send(),this.A.cleanupOverrideLifespan(),this.S.emitAfterArtificialPageView()}Fw(){window.addEventListener("pageshow",t=>{this.isStarted&&t.persisted&&this.Cf()})}}return s})(),bm=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function Am(){return{la:bm}}var Rm=99999,Cm=(()=>{class s{constructor(t){this.R=t,this.Gw=this.qw()&&window.CSCurrentScript}Ww(){let t=window.CSCurrentScript;if(!t)return null;let e=window.performance.getEntriesByName(t.src,"resource")[0];return!e||this.Yw(e)?null:Math.round(e.responseEnd-e.fetchStart)}Yw(t){let e=t.transferSize;return e!==void 0?e===0||e===300||e<t.encodedBodySize:t.connectStart===t.domainLookupEnd}getRequestParameters(){if(!this.Gw||this.Xw()!==1)return{};let t=this.Ww();return t===null?{}:{dt:`${Math.min(t,Rm)}`}}Xw(){var t;return((t=this.R.getSession())===null||t===void 0?void 0:t.pageNumber)||null}qw(){return typeof window.performance=="object"&&typeof window.performance.getEntriesByName=="function"}}return s})(),Tl=["trackPageview"],xn=["setPath"],Ln=["setQuery"],Wa=["referrer:maskUrl"],Im=["referrer:removeQueryString"],Pm=["referrer:keepQueryString"],tn=s=>ys(s)&&s!==null,Om=(s,r,t,e)=>{s.register(Tl,(i,n)=>{if(!R(i)){r.triggerArtificialPageView();return}tn(n)?r.triggerArtificialPageView(i,n):r.triggerArtificialPageView(i)}),s.register(xn,(i,n)=>{if(!R(i))throw new Error(`Command misuse: ${xn[0]}`);tn(n)?t.overridePath(i,n):t.overridePath(i)}),s.register(Ln,(i,n)=>{if(!R(i))throw new Error(`Command misuse: ${Ln[0]}`);tn(n)?t.overrideQuery(i,n):t.overrideQuery(i)}),e&&(s.register(Wa,i=>{if(!R(i))throw new Error(`Command misuse: ${Wa[0]}`);e.addUrlMaskingPattern(i)}),s.register(Im,()=>e.enableRemoveQueryString()),s.register(Pm,()=>e.disableRemoveQueryString()))};var Nm=(()=>{class s{constructor(t,e,i,n,o,c,l,u,E,p,y,m,S,I,P){this.f=t,this.E=e,this.S=i,this.Le=n,this.I=o,this.R=c,this.Li=l,this.Tt=u,this.Et=E,this.A=p,this.se=y,this.cs=m,this.J=S,this.Ee=I,this.Yi=P}init(){let t=new zs(this.f.getTrackerUri(),"pageview");this.Qs=new Tm(this.S,this.J,t,this.A,this.cs),this.Qs.init();let e=new Si(this.Le,this.I,yt,this.Li,this.A,this.Tt,Fn,this.Et,this.cs,new Cm(this.R),this.se);this.Ee&&e.addProvider(this.Ee),this.Yi&&e.addProvider(this.Yi);let i=this.f.isCsCrosswritingHeap();if(i||this.f.isCsSideloadingHeap()||this.f.isHeapSideloadsCs()){let n=this.f.getHeapEnvId()||void 0;e.addProvider({getRequestParameters(){let o={cw:i?"1":"2"};return n&&(o.happid=n),o}})}t.setRequestParametersProviders(e),Om(this.E,this.Qs,this.A,this.Li)}start(t){this.Qs.start(t)}onBeforeSessionRenewal(){this.Qs.stop()}}return s})();function Mm(s,r){let t=!1,e=function(){if(!t)return s.apply(r,arguments)};return e.cancel=()=>t=!0,e}var be=csSymbol(),go=(()=>{class s{constructor(t){var e,i,n,o,c,l,u,E,p,y,m,S,I;this.w=t,this.$l=null,this.zl=null,this.Gl=null,this.ql=null,this.Wl=null,this.Kw=br(P=>this.processUpdateRulesInATick(P)),this.Yl=null,this.Xl=null,this.Kl=null,this.w=P=>jt(()=>t(P)),typeof((i=(e=window.CSSStyleSheet)===null||e===void 0?void 0:e.prototype)===null||i===void 0?void 0:i.insertRule)=="function"&&(this.$l=we({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:({context:P,args:v})=>{this.processInsertRule(P,v)}})),typeof((o=(n=window.CSSStyleSheet)===null||n===void 0?void 0:n.prototype)===null||o===void 0?void 0:o.deleteRule)=="function"&&(this.zl=we({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:({context:P,args:v})=>{this.processDeleteRule(P,v)}})),typeof((l=(c=window.CSSGroupingRule)===null||c===void 0?void 0:c.prototype)===null||l===void 0?void 0:l.insertRule)=="function"&&(this.Gl=we({target:window.CSSGroupingRule.prototype,methodName:"insertRule",hook:({context:P})=>this.processUpdateRule(P)})),typeof((E=(u=window.CSSGroupingRule)===null||u===void 0?void 0:u.prototype)===null||E===void 0?void 0:E.deleteRule)=="function"&&(this.ql=we({target:window.CSSGroupingRule.prototype,methodName:"deleteRule",hook:({context:P})=>this.processUpdateRule(P)})),!((p=window.StyleSheet)===null||p===void 0)&&p.prototype&&"disabled"in window.StyleSheet.prototype&&(this.Wl=pr(window.StyleSheet.prototype,"disabled",(P,v,_)=>{v!==_&&this.Jw(P,v)})),typeof((m=(y=window.CSSStyleDeclaration)===null||y===void 0?void 0:y.prototype)===null||m===void 0?void 0:m.setProperty)=="function"&&(this.Yl=we({target:window.CSSStyleDeclaration.prototype,methodName:"setProperty",hook:({context:P})=>{let v=P.parentRule;v instanceof CSSStyleRule&&this.processUpdateRule(v)}})),typeof((I=(S=window.CSSStyleDeclaration)===null||S===void 0?void 0:S.prototype)===null||I===void 0?void 0:I.removeProperty)=="function"&&(this.Xl=we({target:window.CSSStyleDeclaration.prototype,methodName:"removeProperty",hook:({context:P})=>{let v=P.parentRule;v instanceof CSSStyleRule&&this.processUpdateRule(v)}})),Object.getOwnPropertyDescriptor(window.CSSStyleRule.prototype,"style")&&(this.Kl=qp(window.CSSStyleRule.prototype,"style",P=>{this.processUpdateRule(P)}))}observe(){var t,e,i,n,o,c,l,u;(t=this.$l)===null||t===void 0||t.activate(),(e=this.zl)===null||e===void 0||e.activate(),(i=this.Gl)===null||i===void 0||i.activate(),(n=this.ql)===null||n===void 0||n.activate(),(o=this.Wl)===null||o===void 0||o.activate(),(c=this.Yl)===null||c===void 0||c.activate(),(l=this.Xl)===null||l===void 0||l.activate(),(u=this.Kl)===null||u===void 0||u.activate()}disconnect(){var t,e,i,n,o,c,l,u;(t=this.$l)===null||t===void 0||t.deactivate(),(e=this.zl)===null||e===void 0||e.deactivate(),(i=this.Gl)===null||i===void 0||i.deactivate(),(n=this.ql)===null||n===void 0||n.deactivate(),(o=this.Wl)===null||o===void 0||o.deactivate(),(c=this.Yl)===null||c===void 0||c.deactivate(),(l=this.Xl)===null||l===void 0||l.deactivate(),(u=this.Kl)===null||u===void 0||u.deactivate()}processInsertRule(t,[e,i]){if(t[be]==null&&!t.ownerNode)return;let n={type:"cssRuleInserted",sheet:t,rule:e,index:i};this.w(n)}processUpdateRule(t){let e=t;for(;e.parentRule!==null;)e=e.parentRule;e.parentStyleSheet!==null&&this.Kw.push(e)}processUpdateRulesInATick(t){for(let e of t){if(e.parentStyleSheet===null)return;let i=e.parentStyleSheet,n=csArray.prototype.indexOf.call(gi(i.cssRules),e);if(n===-1)return;let o={type:"cssRuleUpdated",sheet:i,rule:e.cssText,index:n};this.w(o)}}processDeleteRule(t,[e]){if(t[be]==null&&!t.ownerNode)return;let i={type:"cssRuleDeleted",sheet:t,index:e};this.w(i)}Jw(t,e){if(t[be]==null&&!t.ownerNode)return;let i={type:"cssStyleSheetDisabled",sheet:t,disabled:e};this.w(i)}}return Z([N()],s.prototype,"observe",null),Z([N()],s.prototype,"disconnect",null),Z([N()],s.prototype,"processInsertRule",null),Z([N()],s.prototype,"processUpdateRule",null),Z([N()],s.prototype,"processUpdateRulesInATick",null),Z([N()],s.prototype,"processDeleteRule",null),s})(),km=(()=>{class s{constructor(t){this.Qw=1,this.ga=new Set,this.Jl=null,this.Ql=null,this.Xc=(e,i)=>{(i==="initial"||i==="added")&&this.setStyleSheets(e,e.adoptedStyleSheets)},this.Zw=e=>{let i=e.sheet;if(this.ga.has(i)){if(e.type==="cssRuleInserted"){let n={type:"adoptedStyleSheetRuleInserted",sheetId:i[be],rule:e.rule,index:e.index};this.w(n)}else if(e.type==="cssRuleDeleted"){let n={type:"adoptedStyleSheetRuleDeleted",sheetId:i[be],index:e.index};this.w(n)}else if(e.type==="cssRuleUpdated"){let n={type:"adoptedStyleSheetRuleUpdated",sheetId:i[be],rule:e.rule,index:e.index};this.w(n)}else if(e.type==="cssStyleSheetDisabled"){let n={type:"adoptedStyleSheetDisabled",sheetId:i[be],disabled:e.disabled};this.w(n)}}},this.w=e=>jt(async()=>{await _c(2),t(e)}),this.he=new Xs(this.Xc),"adoptedStyleSheets"in Document.prototype&&(this.Jl=pr(window.Document.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),"ShadowRoot"in window&&"adoptedStyleSheets"in window.ShadowRoot.prototype&&(this.Ql=pr(window.ShadowRoot.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),this.If=new go(this.Zw)}observe(){var t,e;this.setStyleSheets(document,document.adoptedStyleSheets),this.he.observe(),(t=this.Jl)===null||t===void 0||t.activate(),(e=this.Ql)===null||e===void 0||e.activate(),this.If.observe()}disconnect(){var t,e;this.ga.clear(),this.he.disconnect(),(t=this.Jl)===null||t===void 0||t.deactivate(),(e=this.Ql)===null||e===void 0||e.deactivate(),this.If.disconnect()}setStyleSheets(t,e){if(!e.length)return;this.tT(e);let i=Re(e,o=>o[be]),n={type:"adoptedStyleSheetsSet",target:t,sheetsIds:i};this.w(n)}tT(t){X(t,e=>{if(this.ga.has(e))return;let i=this.Qw++;e[be]=i,this.ga.add(e);let n=this.eT(e),o={type:"adoptedStyleSheetRegistered",sheetId:i,cssRules:n,disabled:e==null?void 0:e.disabled};this.w(o)})}eT(t){let e=[];try{e=Re(t.cssRules,i=>i.cssText)}catch{}return e}}return Z([N()],s.prototype,"observe",null),Z([N()],s.prototype,"disconnect",null),Z([N()],s.prototype,"setStyleSheets",null),s})(),Dm=ws(Um,"optimizeMutations"),xm=csSymbol.for("ignoreNextSerialization");function Lm(){let s=new Set,r=new Set,t=new Set,e=new Set,i=new Map,n=new Map,o=new Map,c=new Set,l=new Set,u=new Map,E=new Set;return{isMovedNode(p){return s.has(p)},markAsMovedNode(p){E.delete(p),s.add(p)},isDetachedMove(p){return!!nt.findAncestor(p,y=>E.has(y),!0)},isAddedNode(p){let y=nt.findAncestor(p,m=>r.has(m)||l.has(m)||s.has(m),!0);return!!y&&!s.has(y)},isMovedNodeIntoAddedNode(p){return s.has(p)&&!!nt.findAncestor(p,y=>r.has(y)||l.has(y),!0)},markAsAddedNode(p){E.delete(p),l.delete(p),r.add(p)},markAsPendingInsert(p){l.add(p)},isPendingInsert(p){return l.has(p)},isRemovedNode(p){return!!nt.findAncestor(p,y=>t.has(y),!0)},markAsRemovedNode(p){t.add(p)},isUselessNode(p){return e.has(p)},markAsUselessNode(p){e.add(p)},getPlaceholder(p,y){let m=y==="previous"?n:i;return p&&m.has(p)?m.get(p)||null:p},getSiblings(p){let y=p.addedNodes.length,m=this.getPlaceholder(p.previousSibling,"previous"),S=this.getPlaceholder(p.nextSibling,"next");if(y){let I=m,P=S,v=p.previousSibling!==m,_=p.nextSibling!==S;for(let D=0;D<y;D++){let O=p.addedNodes[D],A=p.addedNodes[y-D-1];this.isLatestNodeMutation(O,p)?(n.delete(O),p.previousSibling&&v&&(i.set(p.previousSibling,O),v=!1),I=O):n.set(O,I),this.isLatestNodeMutation(A,p)?(i.delete(A),p.nextSibling&&_&&(n.set(p.nextSibling,A),_=!1),P=A):i.set(A,P)}}else p.previousSibling&&p.previousSibling!==m&&i.set(p.previousSibling,S),p.nextSibling&&p.nextSibling!==S&&n.set(p.nextSibling,m);return{previousSibling:m,nextSibling:S}},setAttributeMutation(p,y){let m=o.get(p)||new Set;m.add(y),o.set(p,m)},isAttributeMutated(p,y){var m;return!!(!((m=o.get(p))===null||m===void 0)&&m.has(y))},setLatestNodeMutation(p,y){u.set(p,y)},isLatestNodeMutation(p,y){return u.get(p)===y},markAsFutureAddedNode(p){u.has(p)||E.add(p)},isTextMutated(p){return c.has(p)},setTextMutated(p){return c.add(p)}}}function Vm(s,r){for(let t=0;t<s.addedNodes.length;t++){let e=s.addedNodes[t];r.markAsFutureAddedNode(e),r.setLatestNodeMutation(e,s)}for(let t=0;t<s.removedNodes.length;t++){let e=s.removedNodes[t];r.setLatestNodeMutation(e,s)}}function Um(s){let r=Lm(),t=[];for(let e of s)e.type==="childList"&&Vm(e,r);for(let e of s)switch(e.type){case"attributes":Hm(e,r,t);break;case"characterData":jm(e,r,t);break;case"childList":$m(e,r,t);break}return t}function jm(s,r,t=[]){let e=s.target;return nt.isConnected(e)&&!r.isTextMutated(e)&&!r.isAddedNode(e)&&!Fm(e,"characterData")&&(r.setTextMutated(e),csArray.prototype.push.call(t,s)),t}function Hm(s,r,t=[]){let e=s.target,i=`${s.attributeNamespace}/${s.attributeName}`;return nt.isConnected(e)&&!r.isAttributeMutated(e,i)&&!r.isAddedNode(e)&&(r.setAttributeMutation(e,i),csArray.prototype.push.call(t,s)),t}var Bm=30;function Fm(s,r,t){let e=csSymbol.for(t?`${r}:${t}`:r),i=M.now(),n=s[e];return n&&i<n?!0:(s[e]=i+Bm,!1)}function $m(s,r,t=[]){let e=nt.isConnected(s.target),i=!e&&r.isRemovedNode(s.target),n=e&&r.isAddedNode(s.target),o=r.getSiblings(s),c=o.nextSibling,l=o.previousSibling,u=null,E=()=>{if(u){let{childListType:m,movedNodes:S,...I}=u;csArray.prototype.push.call(t,m==="added"?I:{...I,movedNodes:S}),u=null}},p=m=>m===(u==null?void 0:u.childListType)?u:(E(),{childListType:m,type:"childList",target:s.target,addedNodes:[],removedNodes:[],movedNodes:[],previousSibling:l,nextSibling:c});if(e){for(let m=0;m<s.addedNodes.length;m++){let S=s.addedNodes[m];r.isLatestNodeMutation(S,s)?(r.isMovedNode(S)?(u=p("moved"),csArray.prototype.push.call(u.movedNodes,S)):(r.markAsAddedNode(S),n||(u=p("added"),csArray.prototype.push.call(u.addedNodes,S))),l=S):nt.isConnected(S)?r.isMovedNode(S)||r.markAsPendingInsert(S):r.markAsUselessNode(S)}E()}let y=ar(s.removedNodes,m=>{if(nt.isConnected(m)){if(!i&&!r.isPendingInsert(m)){if(r.isDetachedMove(m))return!0;r.markAsMovedNode(m),r.isMovedNodeIntoAddedNode(m)&&(m[xm]=!0)}return!1}return r.isUselessNode(m)?!1:(r.markAsRemovedNode(m),!0)});return y.length&&csArray.prototype.push.call(t,{type:"childList",removedNodes:y,addedNodes:[],movedNodes:[],target:s.target,nextSibling:c,previousSibling:l}),t}var zm=(()=>{class s{constructor(t){this.w=t,this.Zl=!1,this.sT=e=>{e.sheet.ownerNode&&(e.type==="cssRuleInserted"?this.w({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssRuleDeleted"?this.w({type:e.type,target:e.sheet.ownerNode,index:e.index}):e.type==="cssRuleUpdated"?this.w({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssStyleSheetDisabled"&&this.w({type:e.type,target:e.sheet.ownerNode,disabled:e.disabled}))},this.w=e=>jt(()=>t(e)),this.Pf=new go(e=>jt(async()=>{await _c(),this.sT(e)})),"adoptedStyleSheets"in Document.prototype&&(this.Of=new km(t))}observe(){var t;this.Zl=!1,this.D=new ge(e=>this.iT(e),(e,i)=>{i==="added"&&this.rT(e)}),this.D.observe(),this.Pf.observe(),(t=this.Of)===null||t===void 0||t.observe()}disconnect(){var t,e;(t=this.D)===null||t===void 0||t.disconnect(),this.Pf.disconnect(),(e=this.Of)===null||e===void 0||e.disconnect(),this.Zl=!0}iT(t){if(this.Zl)return;let e=Dm(t);for(let i=0;i<e.length;i++){let n=e[i];if(!n){et.error("processRawMutations: empty record");continue}switch(n.type){case"attributes":this.processAttributeChanged(n);break;case"characterData":this.processCharacterDataChanged(n);break;case"childList":this.processChildListChanged(n);break;default:et.error(`processRawMutations: unknown record type '${n.type}'`);break}}}processAttributeChanged(t){let e={type:"attributeChanged",target:t.target,attribute:t.attributeName,namespace:t.attributeNamespace,oldValue:t.oldValue,newValue:nt.getAttributeNS(t.target,t.attributeNamespace,t.attributeName)};this.w(e)}processCharacterDataChanged(t){let e={type:"characterDataChanged",target:t.target,oldValue:t.oldValue,newValue:t.target.data};this.w(e)}processChildListChanged(t){var e,i,n;if(!((e=t.movedNodes)===null||e===void 0)&&e.length){let o={type:"nodesMoved",target:t.target,nodes:t.movedNodes,previousSibling:t.previousSibling,nextSibling:t.nextSibling};this.w(o)}if(!((i=t.addedNodes)===null||i===void 0)&&i.length){let o={type:"nodesAdded",target:t.target,previousSibling:t.previousSibling,nextSibling:t.nextSibling,nodes:gi(t.addedNodes)};this.w(o)}if(!((n=t.removedNodes)===null||n===void 0)&&n.length){let o={type:"nodesRemoved",target:t.target,nodes:Re(t.removedNodes,c=>c)};this.w(o)}}rT(t){let e={type:"shadowRootAttached",target:t.host,shadowRoot:t};this.w(e)}}return Z([N()],s.prototype,"processAttributeChanged",null),Z([N()],s.prototype,"processCharacterDataChanged",null),Z([N()],s.prototype,"processChildListChanged",null),s})(),mo=(()=>{class s{constructor(t){this.type="asyncEvent",this.th=!1,t&&t(e=>this.resolve(e))}resolve(t){if(this.th)throw new Error("AsyncEvent already resolve.");t.timestamp==null&&(t={...t,timestamp:this.timestamp}),this.Gs=t,this.th=!0,this.w&&this.w(this.Gs)}complete(t){this.th&&t(this.Gs),this.w=t}wait(){return new Promise(t=>this.complete(t))}}return s})(),Gm=zf(),qm=(()=>{class s extends Ne{constructor(){super(...arguments),this.ma=!1}onStart(){this.ma=!0,this.w=Mm(this.nT,this),this.G=new zm(this.w),this.G.observe();let t=mt.mutations.initialDOM.asyncMeasure(),e=()=>{this.ma=!1,qf(),t()};this.produceEvent(new mo(i=>Gm(document,n=>{e(),i({type:"DomEvent",domEvent:"initialDOM",initialDOM:n})})))}onStop(){var t,e;this.ma=!1,(t=this.w)===null||t===void 0||t.cancel(),(e=this.G)===null||e===void 0||e.disconnect()}Gt(t,e){let i={type:"DomEvent",domEvent:e.type,target:0,targetProps:{}};return"target"in e&&(i.target=rt(e.target),i.targetProps=Y.getProperties(e.target)),[e,i]}nT(t){if(!this.oT(t))switch(t.type){case"attributeChanged":{let[e,i]=this.Gt(t.type,t);i.attribute=e.attribute,i.isSvg=Ys(e.target),i.namespace=e.namespace,i.newValue=e.newValue,i.oldValue=e.oldValue,i.localName=oi(e.target),i.linkRel=Cc(e.target)?e.target.rel:null,i.parentLocalName=e.target.parentElement?oi(e.target.parentElement):void 0,i.localName==="input"&&(i.inputType=e.target.getAttribute("type")),this.produceEvent(i)}break;case"characterDataChanged":{let[e,i]=this.Gt(t.type,t);i.newValue=e.newValue,i.oldValue=e.oldValue,i.targetNodeType=e.target.nodeType,i.parentLocalName=e.target.parentElement?oi(e.target.parentElement):null,i.parentProps=e.target.parentElement?Y.getProperties(e.target.parentElement):void 0,this.produceEvent(i)}break;case"nodesAdded":{let[e,i]=this.Gt(t.type,t);i.targetLocalName=ct(e.target)?oi(e.target):null,i.nextSibling=e.nextSibling?rt(e.nextSibling):null,i.previousSibling=e.previousSibling?rt(e.previousSibling):null,mt.mutations.serializedMutations.measure(()=>{i.nodes=Re(e.nodes,Cn)}),this.produceEvent(i);break}case"nodesMoved":{let[e,i]=this.Gt(t.type,t);i.previousSibling=e.previousSibling?rt(e.previousSibling):null,i.nextSibling=e.nextSibling?rt(e.nextSibling):null,i.nodesIds=Re(e.nodes,rt),this.produceEvent(i);break}case"nodesRemoved":{let[e,i]=this.Gt(t.type,t);i.nodesIds=Re(e.nodes,rt),this.produceEvent(i);break}case"shadowRootAttached":{let[e,i]=this.Gt(t.type,t);i.shadowRoot=hi(e.shadowRoot),this.produceEvent(i);break}case"cssRuleInserted":{let[e,i]=this.Gt(t.type,t);i.index=e.index,i.rule=e.rule,this.produceEvent(i);break}case"cssRuleDeleted":{let[e,i]=this.Gt(t.type,t);i.index=e.index,this.produceEvent(i);break}case"cssRuleUpdated":{let[e,i]=this.Gt(t.type,t);i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"cssStyleSheetDisabled":{let[e,i]=this.Gt(t.type,t);i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetRegistered":{let[e,i]=this.Gt(t.type,t);i.sheetId=e.sheetId,i.cssRules=e.cssRules,i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetsSet":{let[e,i]=this.Gt(t.type,t);i.sheetsIds=e.sheetsIds,this.produceEvent(i);break}case"adoptedStyleSheetRuleInserted":{let[e,i]=this.Gt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleDeleted":{let[e,i]=this.Gt(t.type,t);i.sheetId=e.sheetId,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleUpdated":{let[e,i]=this.Gt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetDisabled":{let[e,i]=this.Gt(t.type,t);i.sheetId=e.sheetId,i.disabled=e.disabled,this.produceEvent(i);break}}}ya(t){return this.ma&&!Y.getProperty(t,li)}oT(t){switch(t.type){case"nodesAdded":case"nodesMoved":case"nodesRemoved":case"shadowRootAttached":return this.ya(t.target)||x.isMaskedElement(t.target)||x.isMaskedElementChild(t.target);case"characterDataChanged":{let e=t.target.parentElement;return e!==null&&(this.ya(e)||x.isMaskedElement(e)||x.isMaskedElementChild(e))}case"attributeChanged":return this.ya(t.target)||x.isMaskedElementChild(t.target)||x.isMaskedAttribute(t.target,t.attribute);case"cssRuleInserted":case"cssRuleDeleted":case"cssRuleUpdated":case"cssStyleSheetDisabled":return this.ya(t.target)||x.isMaskedElementChild(t.target);default:return!1}}}return s})(),Oi=(()=>{let s;return function(r){function t(e){return e.type==="DomEvent"}r.isDOMEvent=t}(s||(s={})),s})(),Ni=(()=>{class s{constructor(){this.oe=[]}start(){}stop(){this.oe.length=0,this.oe=[]}pushEvent(t){if(s.pendingEvents++,this.isListening(t)){let e=this.oe;csSetTimeout(()=>{let n=rs("Processor:processEvent",o=>this.processEvent(o))(t);n!=null&&csArray.prototype.forEach.call(e,o=>o(n)),s.pendingEvents--})}else csSetTimeout(()=>{csArray.prototype.forEach.call(this.oe,e=>e(t))})}subscribe(t){return csArray.prototype.push.call(this.oe,t),()=>{this.oe=csArray.prototype.filter.call(this.oe,e=>e!==t)}}emitEvent(t){jt(()=>csArray.prototype.forEach.call(this.oe,e=>e(t)))}}return s.pendingEvents=0,s})(),Wm=(()=>{class s extends Ni{isListening(t){return Oi.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded")}processEvent(t){let e=0,i=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let n of i){if(n instanceof Ls){let c=x.getMaskedAttributeDetails(n);n.attributes=this.Vo(n,c)}if(x.getMaskedElementDetails(n).state===x.MaskedElementState.Child){if(t.domEvent==="initialDOM")return null;t.nodes=csArray.prototype.filter.call(t.nodes,c=>c!==n);continue}Y.traverse(n,c=>{if(c instanceof Ls){let l=x.getMaskedAttributeDetails(c);c.attributes=this.Vo(c,l);let u=x.getMaskedElementDetails(c);u.state===x.MaskedElementState.Parent&&(this.Fc(c,u),e++)}})}return e>0&&q.counters.sensitiveElements.count("masked-elements",e),t}Vo(t,e){return e.attributes.length===0?t.attributes:csArray.prototype.filter.call(t.attributes,i=>csArray.prototype.indexOf.call(e.attributes,i.name)===-1)}Fc(t,e){let i=`width: ${e.width}px !important; height: ${e.height}px !important;`;t.children=[],t.shadowRoot=void 0,csArray.prototype.push.call(t.attributes,{name:"style",value:i,namespaceURI:""}),Ls.getAttribute(t,"data-cs-mask")||csArray.prototype.push.call(t.attributes,{name:"data-cs-mask",value:"",namespaceURI:""})}}return Oe([Tt("MaskedElementProcessor.processEvent")],s.prototype,"processEvent",null),s})();var Ya=(()=>{let s;return function(r){function t(e){return e.type==="TextVisibility"}r.isTextVisibilityEvent=t}(s||(s={})),s})(),Ym=(()=>{class s extends Ni{constructor(t,e,i,n=null,o=!1){super(),this.M=i,this.Uo=n,this.captureAnonymizedPlaceholders=o,this.Ea=new Zf(t,e,i,n,o)}setAnonymization(t){this.Ea.setAnonymization(t)}isListening(t){return Ya.isTextVisibilityEvent(t)||Oi.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged")}processEvent(t){if(Ya.isTextVisibilityEvent(t))return t.text=this.M.checkAndAnonymizePII(t.text,this.Uo),t;switch(t.domEvent){case"initialDOM":case"nodesAdded":this.rh(t);break;case"attributeChanged":this.cT(t);break;case"characterDataChanged":this.lT(t);break}return t}rh(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes,i;t.domEvent==="nodesAdded"&&(i={targetLocalName:t.targetLocalName,targetProps:t.targetProps});for(let n of e)this.Ea.sanitize(n,i)}cT(t){if(!t.isSvg&&t.newValue){if(t.localName===null){t.newValue="";return}t.newValue=this.Ea.getAnonymizedAttributeValue(t.localName,t.attribute,t.newValue,t.inputType)}}lT(t){t.newValue=this.Ea.getAnonymizedValue(t.newValue,t.parentLocalName,t.parentProps).anonymizedValue}}return Oe([Tt("AnonymizedTextProcessor.processEvent")],s.prototype,"processEvent",null),s})();function yo(s){let r=csString.prototype.trim.call(s);if(s==="")return[];let[t,e]=Xm(r);return e?(Ws(t,",")||(e=Km(e)),[Xa(t),...yo(e)]):[Xa(t)]}function Xm(s){return csString.prototype.split.call(s,/\s(.+)/)}function Xa(s){return csString.prototype.split.call(s,/,$/)[0]}function Km(s){return csString.prototype.split.call(s,/,(.+)/)[1]||""}var Jm=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\)(?!\\))/g;function Qm(s,r){return csString.prototype.replace.call(s,Jm,(...e)=>{let i=e[3]||e[4],n=e[9]||e[10]||e[11],o=ty((i||n).trim()),c=i?"@import ":"",l=r(o)||o;return`${c}url(${Zm(l)})`})}function Zm(s){return csString.prototype.indexOf.call(s,'"')===-1?`"${s}"`:csString.prototype.indexOf.call(s,"'")===-1?`'${s}'`:s}function di(s){let r=new Set;return Qm(s,t=>{var e,i;return r.add((i=(e=csString.prototype.match.call(t,/^["|'](.*)?["|']$/))===null||e===void 0?void 0:e[1])!==null&&i!==void 0?i:t),t}),ns(r)}function ty(s){let r=/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g;return csString.prototype.replace.call(s,r,(t,e,i,n)=>{if(e==="\\")return csString.prototype.slice.call(t,1);if(n)return n;let o=parseInt(i,16);return 55296<=o&&o<=57343||o===0||o>1114111?"\uFFFD":csString.fromCodePoint(o)})}var Ka=(()=>{class s{static async toStaticResourceEvent(t,e,i){let n=await s.uT(t);if(!n)return null;let o=await s.kf(n),c=le(t)?void 0:t,l={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:o,data:n}};return c&&(l.originalResourceName=c),l}static async toCSSStaticResourceEvent(t,e,i,n){let o=await s.dT(t,n),c=es(t),l=o.get(c);if(!l)return null;let u={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:l.hash,data:l.data}};return o.delete(c),o.size&&(u.nestedResources=[],o.forEach(E=>{E&&csArray.prototype.push.call(u.nestedResources,{hash:E.hash,data:E.data})})),u}static async kf(t){let e=await t.arrayBuffer(),i=await crypto.subtle.digest(this.Df,e);return rr(i)}static async uT(t){let e;if(!le(t))e=await(await window.fetch(t)).blob();else{let i=Ko(t);if(!i)return null;e=i}return e}static async dT(t,e){let i=new Map,n=es(t),c=[{resourceRawPath:t,resourceAbsolutePath:n}];for(;c.length>0;){let l=csArray.prototype.pop.call(c);if(!e&&l.resourceAbsolutePath!==null&&!le(l.resourceAbsolutePath)){i.set(l.resourceAbsolutePath,null);continue}if(i.get(l.resourceAbsolutePath)===void 0)try{if(l.resourceRawPath===null||csString.prototype.indexOf.call(l.resourceRawPath,".css")>0){if(!l.data){let m=await fetch(l.resourceAbsolutePath);l.data=await m.text()}l.nestedResources||(l.nestedResources=di(l.data));let p=!1,y=!1;for(let m of l.nestedResources){let S=le(m)?m:l.resourceAbsolutePath?lp(m,l.resourceAbsolutePath):es(m),I=i.get(S);if(I!==void 0){if(I!==null){let v=s.pT(I,m);l.data=zt.stringReplaceAll(l.data,m,v)}continue}Ae(c,v=>v.resourceAbsolutePath===S)!==void 0||(p=!0,y||(csArray.prototype.push.call(c,l),y=!0),csArray.prototype.push.call(c,{resourceRawPath:m,resourceAbsolutePath:S}))}if(!p){let m=await s.fT(l.data);i.set(l.resourceAbsolutePath,{hash:m.hash,data:m.data})}}else{let p;if(!le(l.resourceAbsolutePath))p=await(await fetch(l.resourceAbsolutePath)).blob();else{let m=Ko(l.resourceAbsolutePath);if(!m){i.set(l.resourceAbsolutePath,null);continue}p=m}let y=await s.kf(p);i.set(l.resourceAbsolutePath,{hash:y,data:p})}}catch{i.set(l.resourceAbsolutePath,null)}}return i}static pT(t,e){let i=`cs://resources/${t.hash}`;return le(e)||(i+=`?${s.nh}=${e}`),i}static async fT(t){let e=new Blob([t],{type:"text/css"}),i=await e.arrayBuffer(),n=await crypto.subtle.digest(s.Df,i);return{data:e,hash:rr(n)}}}return s.Df="SHA-256",s.nh="original-resource-name",s})(),Vn=(()=>{class s extends Ni{constructor(){super(),this.Sa="cssrm://",this.Se=0,this.bs=!1}isListening(t){return!s.isSupported()||!Oi.isDOMEvent(t)?!1:t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged"}processEvent(t){switch(t.domEvent){case"initialDOM":case"nodesAdded":this.gT(t);break;case"attributeChanged":this.mT(t);break;case"characterDataChanged":this.yT(t);break}return t}disableOnlineAssets(){this.bs=!1}enableOnlineAssets(){this.bs=!0}isOnlineAssetsActivated(){return this.bs}gT(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)Y.traverse(i,(n,o)=>{if(n.nodeType===Ei.TEXT_NODE&&o){this.ET(n,o.localName);return}if(!Ls.isElement(n))return;let c=Ae(n.attributes,l=>l.name==="style");if(c&&(c.value=this.va(c.value)),this.ST(n)||this.vT(n,o)){let l=Ae(n.attributes,E=>E.name==="src");l&&l.value&&(l.value=this.xf(l.value));let u=Ae(n.attributes,E=>E.name==="srcset");if(u){u.value=this.Lf(u.value);return}}if(this._T(n)&&this.bs){let l=Ae(n.attributes,u=>u.name==="href");if(!l||!l.value)return;this.Se++,this.yr(es(l.value),this.Se,!0),this.wT(n,l,this.Se)}})}wT(t,e,i){csArray.prototype.push.call(t.attributes,{name:"data-cs-original-href",namespaceURI:"",value:e.value}),e.value=this.Sa+i}ET(t,e){if(!t||e!=="style")return;let i=this.va(t.data);i!==null&&(t.data=i)}yT(t){if(t.parentLocalName!=="style"||!t.newValue)return;let e=this.va(t.newValue);e!==null&&(t.newValue=e)}mT(t){if(!t.newValue||t.newValue===t.oldValue)return;let e=t.attribute==="src",i=t.attribute==="srcset";if(t.attribute==="style"){t.newValue=this.va(t.newValue);return}if(!e&&!i)return;let o=t.localName==="img",c=t.localName==="source"&&t.parentLocalName&&t.parentLocalName==="picture";!o&&!c||(e&&(t.newValue=this.xf(t.newValue)),i&&(t.newValue=this.Lf(t.newValue)))}xf(t){return le(t)||this.bs?(this.Se++,this.yr(t,this.Se,!1,M.now()),this.Sa+this.Se):t}Lf(t){if(!this.bs)return t;let e=t,i=yo(t),n=M.now();for(let o of i)this.Se++,this.yr(es(o),this.Se,!1,n),e=csString.prototype.replace.call(e,o,this.Sa+this.Se);return e}va(t){let e=di(t),i=t,n=M.now();for(let o of e){let c=le(o);if(!(c||this.bs)||this.TT(o))continue;this.Se++,i=csString.prototype.replace.call(i,o,this.Sa+this.Se);let l=Od(o);c?this.yr(o,this.Se,!1,n):this.bs&&(l?this.yr(o,this.Se,!0,n):this.yr(es(o),this.Se,!1,n))}return i}yr(t,e,i,n=M.now()){let o=i?Ka.toCSSStaticResourceEvent:Ka.toStaticResourceEvent,c=new mo(async l=>{try{let u=await o(t,e,n,this.bs);l(u||{type:"warning",message:`Failed to process static resource: ${t}`})}catch(u){l({type:"warning",message:u})}});this.emitEvent(c)}ST(t){return t.localName==="img"}vT(t,e){return t.localName==="source"&&!!e&&e.localName==="picture"}_T(t){return t.localName==="link"&&csArray.prototype.some.call(t.attributes,e=>e.name==="rel"&&e.value==="stylesheet")}static isSupported(){return Sc()&&Gn()&&!!csArray.from}TT(t){return csString.prototype.replace.call(t,/['"]+/g,"").length===0}}return Oe([Tt("StaticResourceManagerProcessor.processEvent")],s.prototype,"processEvent",null),s})(),ey=(()=>{class s extends Ni{constructor(t){super(),this.tt=t}isListening(t){return Oi.isDOMEvent(t)&&t.domEvent==="initialDOM"}processEvent(t){return t.domEvent==="initialDOM"&&(t.initialDOM.baseURI=this.tt.anonymizeUrl(t.initialDOM.baseURI)),t}}return Oe([Tt("UrlAnonymizationProcessor.processEvent")],s.prototype,"processEvent",null),s})(),en="textarea",sy=(()=>{class s extends Ni{isListening(t){return Oi.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="characterDataChanged")}processEvent(t){switch(t.domEvent){case"initialDOM":this.bT(t);break;case"nodesAdded":this.AT(t);break;case"characterDataChanged":this.RT(t);break}return t}bT(t){Y.traverse(t.initialDOM,(e,i)=>{(this.Vf(e,i)||this.Uf(e))&&(e.data=this.oh(e.data))})}AT(t){for(let e of t.nodes)Y.traverse(e,(i,n)=>{(this.CT(i,n,t)||this.Uf(i))&&(i.data=this.oh(i.data))})}RT(t){var e;(t.parentLocalName===en||!((e=t.targetProps)===null||e===void 0)&&e.editableNode)&&(t.newValue=this.oh(t.newValue))}oh(t){return csString.prototype.replace.call(t,/\S/g,"\u2022")}CT(t,e,i){return this.IT(t,i)||this.Vf(t,e)}IT(t,e){return t.nodeType===3&&e.targetLocalName===en}Vf(t,e){return t.nodeType===3&&K(e)&&e.localName===en}Uf(t){return t.nodeType===3&&Je.isEditableNode(t)}}return Oe([Tt("AnonymizedEditableTextProcessor.processEvent")],s.prototype,"processEvent",null),s})(),iy=(()=>{class s{constructor(t){this.w=t,this.$t={boundElement:window,type:"resize",listener:()=>this.resizeListener()},this.w=t}observe(){ft(this.$t),this.ah()}ah(){this.resizeListener()}disconnect(){gt(this.$t)}resizeListener(){let t={width:yt.windowWidth(),height:yt.windowHeight()};this.w(t)}}return Z([N("resize")],s.prototype,"resizeListener",null),s})(),Ke=(()=>{let s;return function(r){r.PORTRAIT="Portrait",r.LANDSCAPE="Landscape"}(s||(s={})),s})(),Wi=(()=>{let s;return function(r){r.PORTRAIT_PRIMARY="portrait-primary",r.PORTRAIT_SECONDARY="portrait-secondary",r.LANDSCAPE_PRIMARY="landscape-primary",r.LANDSCAPE_SECONDARY="landscape-secondary"}(s||(s={})),s})(),Yi=(()=>{let s;return function(r){r[r.PORTRAIT=0]="PORTRAIT",r[r.PORTRAIT_REVERSE=180]="PORTRAIT_REVERSE",r[r.LANDSCAPE=-90]="LANDSCAPE",r[r.LANDSCAPE_REVERSE=90]="LANDSCAPE_REVERSE"}(s||(s={})),s})(),ry=(()=>{let s;return function(r){let t=null;r.isScreenOrientationApiSupported=()=>{var c;return t!=null?t:t=!!(!((c=tt.screen)===null||c===void 0)&&c.orientation)},r.isDeprecatedScreenOrientationApiSupported=()=>"orientation"in tt;function e(){return Ke.LANDSCAPE}function i(){var c;switch((c=tt.screen.orientation)===null||c===void 0?void 0:c.type){case Wi.PORTRAIT_PRIMARY:case Wi.PORTRAIT_SECONDARY:return Ke.PORTRAIT;case Wi.LANDSCAPE_PRIMARY:case Wi.LANDSCAPE_SECONDARY:return Ke.LANDSCAPE;default:return Ke.PORTRAIT}}function n(){switch(window.orientation){case Yi.PORTRAIT:case Yi.PORTRAIT_REVERSE:return Ke.PORTRAIT;case Yi.LANDSCAPE:case Yi.LANDSCAPE_REVERSE:return Ke.LANDSCAPE;default:return Ke.PORTRAIT}}function o(){return r.isScreenOrientationApiSupported()?i():r.isDeprecatedScreenOrientationApiSupported()?n():e()}r.getCurrentOrientation=o}(s||(s={})),s})(),ny=(()=>{class s extends Ne{constructor(){super(...arguments),this.ch=null,this.lh=null,this.xs=new iy(t=>{this.produceEvent({...t,type:"viewportResize"}),this.onScreenPotentiallyChanged()})}onScreenPotentiallyChanged(){let t=ry.getCurrentOrientation(),{screenWidth:e,screenHeight:i}=this.PT(t);if(e!==this.ch||i!==this.lh){this.ch=e,this.lh=i;let n={type:"screenResize",width:e,height:i};this.produceEvent(n)}}PT(t){let e,i,n=yt.screenWidth(),o=yt.screenHeight();return t===Ke.PORTRAIT?(e=n,i=o):(e=Math.max(n,o),i=Math.min(n,o)),{screenWidth:e,screenHeight:i}}onStart(){this.xs.observe()}onStop(){this.ch=null,this.lh=null,this.xs.disconnect()}}return s})();function oy(s){let r=csEventtarget.apply(s);return r&&ct(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:r}var ay=(()=>{class s extends Ne{constructor(){super(),this.jf=t=>{let e=oy(t);e&&this.hh(e,t.type)},this.he=new Xs((t,e)=>{switch(e){case"initial":case"added":this.Hf(t);break;case"removed":this.Bf(t);break}}),this.j=new re((t,e)=>{(e==="initial"||e==="added")&&this.OT(t)})}static shouldProcessElement(t){return t.tagName==="VIDEO"&&nt.isConnected(t)&&!x.isMaskedElement(t)&&!x.isMaskedElementChild(t)}static isPlaying(t){return!t.paused&&!t.ended}onStart(){this.Hf(document),this.he.observe(),this.j.observe("video")}onStop(){this.Bf(document),this.he.disconnect(),this.j.disconnect()}hh(t,...e){if(this.isStarted&&s.shouldProcessElement(t))for(let i of e){let n=rt(t),o={type:"VideoEvent",videoEventType:i,nodeId:n};i==="seeked"&&(o.newTimePositionInSec=t.currentTime),qn(()=>this.produceEvent(o))}}OT(t){for(let e of t)this.hh(e,"seeked"),s.isPlaying(e)&&this.hh(e,"play")}Hf(t){for(let e of["play","pause","seeked"])ft({type:e,listener:this.jf,boundElement:t})}Bf(t){for(let e of["play","pause","seeked"])gt({type:e,listener:this.jf,boundElement:t})}}return s})();function cy(s){return s.nodeName==="SELECT"}function Eo(s){return s.nodeName==="INPUT"}function ly(s){return s.nodeName==="TEXTAREA"||Eo(s)&&!bl(s)&&!Al(s)}function bl(s){return Eo(s)&&s.type==="number"}function Al(s){return Eo(s)&&(s.type==="checkbox"||s.type==="radio")}var hy=(()=>{class s extends Ne{constructor(t){super(),this.ot=t,this.uh=new jp("low"),this.Er=e=>this.inputHandler(e),this.Ai=[],this.NT(),this.MT(),this.j=new re(e=>{for(let i of e)this.ph(i)&&jt(()=>{this.fh(i,rt(i))},"low")}),this.he=new Xs((e,i)=>{switch(i){case"initial":case"added":ft({type:"change",listener:this.Er,boundElement:e});break;case"removed":gt({type:"change",boundElement:e,listener:this.Er});break}})}onStart(){ft({type:"keyup",boundElement:document,listener:this.Er}),ft({type:"change",boundElement:document,listener:this.Er}),X(this.Ai,t=>t.activate()),this.j.observe(csArray.prototype.join.call(s.kT,",")),this.he.observe()}onStop(){gt({type:"keyup",boundElement:document,listener:this.Er}),gt({type:"change",boundElement:document,listener:this.Er}),X(this.Ai,t=>t.deactivate()),this.j.disconnect(),this.he.disconnect(),this.uh.clear()}fh(t,e){var i,n,o;if(this.uh.has(t))return;if(this.uh.add(t),cy(t)){let u={type:"InputEvent",inputType:"select",target:rt(t),selectedIndex:t.selectedIndex,timestamp:M.now()};this.produceEvent(u);return}if(Al(t)){let u={type:"InputEvent",inputType:"checkable",target:rt(t),checked:t.checked,timestamp:M.now()};this.produceEvent(u);return}let c=ly(t),l=bl(t);if(c||l){let u=(i=t.value)!==null&&i!==void 0?i:"";if(!((n=this.ot)===null||n===void 0)&&n.shouldEncrypt(t)){(o=this.ot)===null||o===void 0||o.registerInputNodeToEncrypt({targetId:e,targetValue:u,date:M.now()});return}let E=l?"0":"\u2022",p={type:"InputEvent",inputType:"text",target:rt(t),value:csString.prototype.replace.call(u,/\S/g,E),timestamp:M.now()};this.produceEvent(p)}}inputHandler(t){if(!this.isStarted)return;let e=wt(t),i=rt(e);!i||!this.ph(e)||nt.isConnected(e)&&jt(()=>{this.fh(e,i)},"low")}NT(){this.trackChanges(HTMLInputElement,"checked"),this.trackChanges(HTMLInputElement,"value"),this.trackChanges(HTMLTextAreaElement,"value")}MT(){this.trackChanges(HTMLSelectElement,"selectedIndex"),this.trackChanges(HTMLSelectElement,"value"),this.trackChanges(HTMLOptionElement,"selected",!0)}trackChanges(t,e,i=!1){let n=pr(t.prototype,e,(o,c,l)=>{if(l!==c&&nt.isConnected(o)){let u=i?o.parentElement:o;this.DT(u)}});n&&csArray.prototype.push.call(this.Ai,n)}ph(t){return!x.isMaskedElement(t)&&!x.isMaskedElementChild(t)&&(Sr(t)||Jn(t)||Kn(t))}DT(t){if(this.isStarted&&nt.isConnected(t)){let e=rt(t);e&&this.ph(t)&&jt(()=>{this.fh(t,e)},"low")}}}return s.kT=["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]','input[type="number"]','input[type="checkbox"]','input[type="radio"]',"select"],Oe([at()],s.prototype,"inputHandler",null),Oe([N()],s.prototype,"trackChanges",null),s})();var uy=(()=>{class s{constructor(t=Number.POSITIVE_INFINITY){this.ti=[],this.nt=[],this.xT=t}next(t){this.nt.length===this.xT&&csArray.prototype.shift.call(this.nt),csArray.prototype.push.call(this.nt,t),this.nt.length===1&&csSetTimeout(()=>this.clear());for(let e of this.ti)e(t)}subscribe(t){if(Ae(this.ti,i=>t===i))return()=>{this.ti=csArray.prototype.filter.call(this.ti,i=>i!==t)};csArray.prototype.push.call(this.ti,t);for(let i of this.nt)t(i);return()=>{this.ti=csArray.prototype.filter.call(this.ti,i=>i!==t)}}clear(){this.nt=[]}hasObservers(){return this.ti.length>0}}return s})(),Rl=(()=>{var s;class r{constructor(e){this.w=e}observe(){this.LT=s.Nn.subscribe(e=>this.w(e)),s._a||(s._a=!0,s.On.observe(),Zt(document,NodeFilter.SHOW_ELEMENT).visitAll(i=>{s.Ts.add(i),s.Nn.next(i)}))}disconnect(){s._a&&(this.LT(),s.Nn.hasObservers()||(s._a=!1,s.On.disconnect(),s.Nn.clear(),s.Ts.clear()))}}return s=r,r.Ts=new Tr,r.Nn=new uy,r.VT=ws(t=>{jt(()=>{for(let e of t)e.type==="childList"&&X(e.addedNodes,i=>{Zt(i,NodeFilter.SHOW_ELEMENT).visitAll(o=>{s.Ts.has(o)||(s.Ts.add(o),s.Nn.next(o))})})})},"ElementObserver.findAllElements"),r._a=!1,r.On=new ge(s.VT),Z([N()],r.prototype,"observe",null),Z([N()],r.prototype,"disconnect",null),r})(),dy=(()=>{class s extends Ne{constructor(){super(),this._s=typeof window.customElements=="object"&&typeof window.customElements.whenDefined=="function"&&typeof window.Promise=="function",this.UT=rs("CustomElementRegistrationProducer:onElementsFound",e=>{for(let i of e)x.isMaskedElement(i)||x.isMaskedElementChild(i)||sd(i)&&this.register(csString.prototype.toLowerCase.call(i.tagName))});let t=br(this.UT);this.Mn=new Rl(e=>t.push(e)),this.Zs=new Set}onStart(){this._s&&this.Mn.observe()}onStop(){this.Zs.clear(),this.Mn.disconnect()}async register(t){this.Zs.has(t)||(this.Zs.add(t),await window.customElements.whenDefined(t),this.produceEvent({type:"CustomElementRegistration",tagName:csString.prototype.toLowerCase.call(t)}))}}return Oe([N()],s.prototype,"register",null),s})(),Ja=(()=>{class s{static isNavigationTimingObserverSupported(){var t,e;return(((t=window.PerformanceObserver)===null||t===void 0?void 0:t.supportedEntryTypes)==null?void 0:csArray.prototype.indexOf.call((e=window.PerformanceObserver)===null||e===void 0?void 0:e.supportedEntryTypes,"navigation"))>=0}static getTimeOrigin(){return window.performance.timeOrigin}static Ff(){if(this.isNavigationTimingObserverSupported())return new window.PerformanceObserver(t=>s.jT(t))}static jT(t){let i=t.getEntriesByType("navigation")[0];i&&(this.Vi=i,s.Sr(i))}static jr(t){this.HT(t),this.Vi&&t(this.Vi),this.Ve||this.BT()}static HT(t){this.Mt.add(t)}static FT(t){this.Mt.delete(t)}static BT(){if(this.kn||(this.kn=this.Ff()),!this.kn){this.Vi||(this.Vi={requestStart:window.performance.timing.requestStart,domInteractive:window.performance.timing.domInteractive}),this.Sr(this.Vi);return}this.kn.observe({type:"navigation",buffered:!0}),this.Ve=!0}static Sr(t){this.Mt.forEach(e=>e(t))}static Br(t){this.FT(t),this.Mt.size===0&&this.Dn()}static Dn(){var t;this.Ve&&((t=this.kn)===null||t===void 0||t.disconnect(),this.Ve=!1,this.Vi=null,this.kn=this.Ff())}constructor(t){this.w=t}observe(){s.jr(this.w)}disconnect(){s.Br(this.w)}}return s.Ve=!1,s.Mt=new Set,s.Vi=null,s})(),py=(()=>{class s extends Ne{constructor(){super(...arguments),this.wa=null,this.$f=new Ja(t=>{if(this.wa)return;let e=this.$T(t);e&&(this.wa=e,this.produceEvent(e))})}onStart(){if(this.wa){this.produceEvent(this.wa);return}this.$f.observe()}onStop(){this.$f.disconnect()}$T(t){let e=Ja.getTimeOrigin();return{type:"PerformanceTiming",timings:{timeOrigin:e,requestStart:Math.floor(e+t.requestStart),domInteractive:Math.floor(e+t.domInteractive)},timestamp:M.now()}}}return s})(),fy="touchstart",gy="touchmove",my="touchend",Cl=(()=>{class s{constructor(t){this.w=t}observe(){s.zf&&s.gh(this.w)}disconnect(){s.zf&&s.mh(this.w)}static zT(t,e){csArray.prototype.forEach.call(ns(s.Mt),i=>i(t,e))}static gh(t){s.Mt.has(t)||(s.Mt.add(t),s.Mt.size===1&&(s.xn.onGesture(s.zT),csArray.prototype.forEach.call(s.Us,e=>ft(e))))}static mh(t){s.Mt.delete(t),s.Mt.size===0&&csArray.prototype.forEach.call(s.Us,e=>gt(e))}static yh(t){if(s.xn.isValidTouchEvent(t))switch(t.type){case"touchstart":s.xn.processActionDown(t);break;case"touchmove":s.xn.processActionMove();break;case"touchend":s.xn.processActionUp(t);break}}}return s.Us=[{boundElement:tt.document,type:fy,listener:r=>s.yh(r)},{boundElement:tt.document,type:gy,listener:r=>s.yh(r)},{boundElement:tt.document,type:my,listener:r=>s.yh(r)}],s.zf=An.isGestureDetectionSupported(),s.Mt=new Set,s.xn=new An,s})(),yy=(()=>{class s extends Ne{constructor(){super(),this.Ln=new Cl(this.Dc.bind(this))}onStart(){this.Ln.observe()}onStop(){this.Ln.disconnect()}Dc(t){let e=this.GT(t);e&&this.produceEvent(e)}GT(t){if(!this.qT(t))return null;let e=Zp(t.target);return e?{type:"Gesture",targetId:e,data:{type:t.type,direction:t.direction,distance:t.distance,velocity:t.velocity,pageX:t.pageX,pageY:t.pageY}}:null}qT(t){return t.target!==null&&!(ct(t.target)&&x.isMaskedElementChild(t.target))}}return s})();var Ds=[],Un=!1,Il=ws(Sy,"executeTasks");function Ey(s){if(csArray.prototype.push.call(Ds,s),!Un){for(let r=0;r<3;r++)csSetTimeout(Il);Un=!0}}function Sy(){let s=csDate.now();for(let r=0;r<Ds.length;r++)if(Ds[r](),csDate.now()-s>=35){Ds=csArray.prototype.slice.call(Ds,r+1),csSetTimeout(Il);return}Ds=[],Un=!1}var qe=(()=>{let s;return function(r){r[r.Started=0]="Started",r[r.Stopped=1]="Stopped",r[r.Processing=2]="Processing",r[r.Completed=3]="Completed"}(s||(s={})),s})(),Pl=(()=>{class s{constructor(){this.kt=new wi,this.Pt=qe.Stopped,this.w=null,this.Wf=t=>{this.Pt===qe.Stopped||!t||(this.w(t),this.Yf())}}get queueLength(){return this.kt.length}start(t){if(this.w)throw new Error("callback already set");this.Pt=qe.Started,this.w=t}push(t){this.kt.push(t),this.Eh()}stop(){this.w=null,this.Pt=qe.Stopped,this.kt.clear()}static pipe(t,e){let i=t,n=new csArray;for(let c of e){let l=new s;l.start(u=>{c.pushEvent(u)}),csArray.prototype.push.call(n,l),X(i,u=>u.subscribe(E=>l.push(E))),i=[c]}let o=new vy(n);return X(i,c=>c.subscribe(l=>o.push(l))),o}Xf(){return this.Pt===qe.Stopped}as(){return this.Pt===qe.Processing}Yf(){if(!this.Xf()){if(this.kt.isEmpty){this.Pt=qe.Completed;return}this.Pt=qe.Processing,Ey(()=>{let t=this.kt.pop();t instanceof mo?t.complete(this.Wf):this.Wf(t)})}}Eh(){this.Xf()||this.as()||this.Yf()}}return s})(),vy=(()=>{class s extends Pl{constructor(t){super(),this.Kf=t}get queueLength(){return csArray.prototype.reduce.call(this.Kf,(t,e)=>t+e.queueLength,0)}stop(){super.stop(),X(this.Kf,t=>t.stop())}}return s})(),_y=(()=>{class s{constructor(t,e=[]){this.producers=t,this.processors=e,this.z=!1,this.Mt=[]}get pendingEvents(){var t,e;return(e=(t=this.kt)===null||t===void 0?void 0:t.queueLength)!==null&&e!==void 0?e:0}start(){if(this.z)throw new Error("Recording is already started.");let t=this.Mt;this.kt=Pl.pipe(this.producers,this.processors),this.kt.start(e=>csArray.prototype.forEach.call(t,i=>i(e))),X(this.producers,e=>e.start()),X(this.processors,e=>e.start()),this.z=!0}stop(){this.kt.stop(),this.Mt.length=0;for(let t of this.producers)t.stop();for(let t of this.processors)t.stop();this.z=!1,this.Mt=[]}subscribe(t){if(this.z)throw new Error("Recording is already started.");return csArray.prototype.push.call(this.Mt,t),()=>this.Mt=csArray.prototype.filter.call(this.Mt,e=>e!==t)}}return s})(),wy=(()=>{class s{constructor(t){this.ba={},this.Me=new po(t)}save({key:t,metadata:e,events:i}){this.Me.isThresholdReached()||(this.Me.addString(t),typeof i=="string"?this.Me.addString(i):this.Me.addArrayBuffer(i),!this.Me.isThresholdReached()&&(this.ba[t]={metadata:e,events:i}))}recover(t){let e=[];csArray.prototype.forEach.call(this.JT(),i=>{let n=this.ba[i];n!==void 0&&(delete n.metadata.datatype,csArray.prototype.push.call(e,n),this.QT(i))}),e.length!==0&&(t(e),this.Me.reset())}JT(){return Object.keys(this.ba)}QT(t){delete this.ba[t]}}return s})(),We=(()=>{let s;return function(r){r[r.NOT_STARTED=0]="NOT_STARTED",r[r.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",r[r.OPEN_FAILED=2]="OPEN_FAILED",r[r.READY=3]="READY"}(s||(s={})),s})(),Ty=(()=>{class s{constructor(t,e,i){this.ir=t,this.ZT=i,this.Ui=We.NOT_STARTED,this.Aa=[],this.Sh=0,this.tb=self.origin,this.Ne=typeof window=="object"?"":"worker-",this.Me=new po(e),this.xl()}async xl(){await this.Jf(),this.Ui===We.READY?this.eb():this.ZT(this.Aa)}eb(){csArray.prototype.forEach.call(this.Aa,t=>{this.save(t)}),this.Aa=[]}async save(t){try{if(this.Ui===We.OPEN_IN_PROGRESS){csArray.prototype.push.call(this.Aa,t);return}if(this.Ui!==We.READY||this.Me.isThresholdReached())return;let{key:e,metadata:i,events:n}=t;if(this.Me.addString(e),typeof n=="string"?this.Me.addString(n):this.Me.addArrayBuffer(n),this.Me.isThresholdReached())return;await this.ie.put(`${this.tb}/${e}`,new Response(n,{headers:i}))}catch{}}async recover(t){!this.ie&&(await this.Jf(),this.Ui!==We.READY)||this.sb(t)}async Jf(){try{this.Ui=We.OPEN_IN_PROGRESS,this.ie=await self.caches.open(`${this.Ne}${this.ir}`),this.Ui=We.READY}catch{this.Ui=We.OPEN_FAILED}}async sb(t){try{if(this.Sh++,this.Sh>1)return;let e=await this.ie.keys();if(e.length===0)return;let i=await this.ie.matchAll(),n=csArray.prototype.map.call(i,c=>{let l={};c.headers.forEach((E,p)=>{l[p]=E}),delete l["content-type"];let u=l.datatype;return delete l.datatype,u==="json"||u==="base64"?c.text().then(E=>({metadata:l,events:E})):c.arrayBuffer().then(E=>({metadata:l,events:E}))}),o=await Promise.all(n);await Promise.all(csArray.prototype.map.call(e,c=>this.ie.delete(c))),t(o),this.Me.reset()}catch{}finally{this.Sh--}}}return s})(),by=(()=>{class s{constructor(t){try{this.ib(t)}catch{this.vh()}}ib(t){self.caches?this.rb(t):this.vh()}save(t){this.Ra.save(t)}recover(t){this.Ra.recover(t)}rb(t){this.Ra=new Ty(t,s.Qf,e=>{this.vh(e)})}vh(t){this.Ra=new wy(s.Qf),t&&csArray.prototype.forEach.call(t,e=>{this.Ra.save(e)})}}return s.Qf=1024*1024*16,s})(),Ay=(()=>{class s{constructor(t,e){this.S=t,this.R=e,this.Vn=Jt.ETR_DISABLED,this.Ca=Jt.ETR_PENDING,this._h=!0}getEtrStatus(t){t===void 0&&(t=this.R.getSession());let e=t==null?void 0:t.etrStatus;return this.Zf()&&e===Jt.ETR_SAVED_SESSION?e:this.Vn}onEventTriggerRecording(t,e){switch(e){case ss.ETR_PAGE:this.tg(Jt.ETR_SAVED_PAGE);break;case ss.ETR_LEGACY:case ss.ETR_SESSION:this.tg(Jt.ETR_SAVED_SESSION);break}}onCollectStateChange(t,e){t===V.RECORDING_TEMPORARILY?this._h=!0:this._h=!1,t===V.ANALYTICS_ONLY&&e===$t.ETR_ON?this.eg(this.Ca):this.eg(Jt.ETR_DISABLED)}eg(t){this.Vn=t,this.Ca=Jt.ETR_PENDING,this.sg(t),this.S.emitRecordingContextChange()}tg(t){this._h?Number(t)>Number(this.Ca)&&(this.Ca=t):this.Zf()&&Number(t)>Number(this.Vn)&&(this.Vn=t,this.sg(t),this.S.emitRecordingContextChange())}sg(t){let e=this.R.getSession();e!==null&&e.etrStatus===Jt.ETR_NOT_SAVED_SESSION&&t===Jt.ETR_SAVED_SESSION&&(e.etrStatus=t,this.R.setSession(e))}Zf(){return this.Vn!==Jt.ETR_DISABLED}}return s})(),L=(()=>{let s;return function(r){r[r.MUTATION_INSERT=1]="MUTATION_INSERT",r[r.MUTATION_REMOVE=2]="MUTATION_REMOVE",r[r.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",r[r.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",r[r.INITIAL_DOM=5]="INITIAL_DOM",r[r.SCROLL=6]="SCROLL",r[r.CLICK=8]="CLICK",r[r.RESIZE=9]="RESIZE",r[r.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",r[r.INPUT_SELECT=11]="INPUT_SELECT",r[r.INPUT_TEXT=12]="INPUT_TEXT",r[r.HASH_CHANGE=13]="HASH_CHANGE",r[r.UNANONYMIZED_CONSENT_GRANTED=14]="UNANONYMIZED_CONSENT_GRANTED",r[r.UNANONYMIZED_CONSENT_WITHDRAWN=15]="UNANONYMIZED_CONSENT_WITHDRAWN",r[r.MOUSE_OVER=16]="MOUSE_OVER",r[r.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",r[r.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",r[r.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",r[r.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",r[r.ATTACH_SHADOW=22]="ATTACH_SHADOW",r[r.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",r[r.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",r[r.PAGE_EVENT=27]="PAGE_EVENT",r[r.API_ERROR=28]="API_ERROR",r[r.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",r[r.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",r[r.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",r[r.KEY_DOWN=32]="KEY_DOWN",r[r.KEY_UP=33]="KEY_UP",r[r.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",r[r.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",r[r.USER_IDENTIFIER=38]="USER_IDENTIFIER",r[r.TOUCH_START=41]="TOUCH_START",r[r.TOUCH_MOVE=42]="TOUCH_MOVE",r[r.TOUCH_END=43]="TOUCH_END",r[r.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",r[r.POINTER_DOWN=47]="POINTER_DOWN",r[r.POINTER_MOVE=48]="POINTER_MOVE",r[r.POINTER_UP=49]="POINTER_UP",r[r.CUSTOM_ERROR=50]="CUSTOM_ERROR",r[r.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",r[r.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",r[r.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",r[r.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",r[r.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE",r[r.SCREEN_RESIZE=65]="SCREEN_RESIZE",r[r.RESOURCE_HASHES=66]="RESOURCE_HASHES",r[r.PERFORMANCE_NAVIGATION_TIMING=67]="PERFORMANCE_NAVIGATION_TIMING",r[r.PERFORMANCE_RESOURCE_TIMING=68]="PERFORMANCE_RESOURCE_TIMING",r[r.RECORDING_INFO_EVENT=72]="RECORDING_INFO_EVENT",r[r.TEXT_REF=73]="TEXT_REF",r[r.TOUCH_CANCEL=74]="TOUCH_CANCEL",r[r.MUTATION_MOVE=75]="MUTATION_MOVE",r[r.STYLESHEET_RULE_UPDATE=76]="STYLESHEET_RULE_UPDATE",r[r.ADOPTED_STYLESHEET_RULE_UPDATE=77]="ADOPTED_STYLESHEET_RULE_UPDATE",r[r.VIDEO_PLAY=78]="VIDEO_PLAY",r[r.VIDEO_PAUSE=79]="VIDEO_PAUSE",r[r.VIDEO_SEEK=80]="VIDEO_SEEK",r[r.ADOPTED_STYLESHEET_DISABLED=98]="ADOPTED_STYLESHEET_DISABLED",r[r.STYLESHEET_DISABLED=99]="STYLESHEET_DISABLED",r[r.DEBUG=999]="DEBUG"}(s||(s={})),s})();var ni=(()=>{let s;return function(r){r[r.SWIPE=0]="SWIPE",r[r.PINCH_IN=1]="PINCH_IN",r[r.PINCH_OUT=2]="PINCH_OUT",r[r.LONG_PRESS=3]="LONG_PRESS",r[r.TAP=4]="TAP",r[r.DOUBLE_TAP=5]="DOUBLE_TAP"}(s||(s={})),s})(),Ry=(()=>{class s{constructor(t=100){this.nb=t,this.Ia={},this.Un=null,this.nh="original-resource-name"}onEvent(t){this.ob=t}processEvent(t){this.ab(t.resourceId,t.resource.hash,t.originalResourceName),this.cb(t)}flushEvents(){this.Un&&csClearTimeout(this.Un),this.ig()}onSendStaticResource(t){this.cb=t}ig(){if(!Object.keys(this.Ia).length)return;let t={type:L.RESOURCE_HASHES,date:M.now(),args:[this.Ia]};this.Un=null,this.Ia={},this.ob(t)}ab(t,e,i){let n=e;i&&(n+=`?${this.nh}=${i}`),this.Ia[t]=n,!this.Un&&(this.Un=window.csSetTimeout(()=>this.ig(),this.nb))}}return s})();function Cy(s,r,t){let{timestamp:e}=s;switch(s.domEvent){case"initialDOM":{let{initialDOM:i}=s,n={type:L.INITIAL_DOM,date:e,args:[i]};t.emitInitialDomDone(n);break}case"nodesAdded":{csArray.prototype.forEach.call(s.nodes,i=>{r({type:L.MUTATION_INSERT,date:e,args:[s.target,s.nextSibling,i]})});break}case"nodesMoved":{for(let i of s.nodesIds)r({type:L.MUTATION_MOVE,date:e,args:[i,s.nextSibling,s.target]});break}case"nodesRemoved":{csArray.prototype.forEach.call(s.nodesIds,i=>{r({type:L.MUTATION_REMOVE,date:e,args:[i]})});break}case"attributeChanged":{let{target:i,namespace:n,attribute:o,newValue:c}=s;r({type:L.MUTATION_ATTRIBUTE,date:e,args:[i,n,o,c]});break}case"characterDataChanged":{let{target:i,newValue:n}=s;r({type:L.MUTATION_CHARACTER_DATA,date:e,args:[i,n]});break}case"cssRuleInserted":{let{target:i,rule:n,index:o}=s,c=K(o)?[i,n,o]:[i,n];r({type:L.STYLESHEET_RULE_INSERT,date:e,args:c});break}case"cssRuleDeleted":{let{target:i,index:n}=s;r({type:L.STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case"cssRuleUpdated":{let{target:i,rule:n,index:o}=s;r({type:L.STYLESHEET_RULE_UPDATE,date:e,args:[i,n,o]});break}case"cssStyleSheetDisabled":{let{target:i,disabled:n}=s;r({type:L.STYLESHEET_DISABLED,date:e,args:[i,n]});break}case"shadowRootAttached":{let{target:i,shadowRoot:n}=s;r({type:L.ATTACH_SHADOW,date:e,args:[i,n]});break}case"adoptedStyleSheetRegistered":{let{sheetId:i,cssRules:n,disabled:o}=s;r({type:L.REGISTER_ADOPTED_STYLE_SHEET,date:e,args:[i,{cssRules:n,disabled:o}]});break}case"adoptedStyleSheetsSet":{let{target:i,sheetsIds:n}=s;r({type:L.SET_ADOPTED_STYLE_SHEETS,date:e,args:[i,n]});break}case"adoptedStyleSheetRuleInserted":{let{sheetId:i,rule:n,index:o}=s,c=K(o)?[i,n,o]:[i,n];r({type:L.ADOPTED_STYLESHEET_RULE_INSERT,date:e,args:c});break}case"adoptedStyleSheetRuleDeleted":{let{sheetId:i,index:n}=s;r({type:L.ADOPTED_STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case"adoptedStyleSheetRuleUpdated":{let{sheetId:i,rule:n,index:o}=s,c=[i,n,o];r({type:L.ADOPTED_STYLESHEET_RULE_UPDATE,date:e,args:c});break}case"adoptedStyleSheetDisabled":{let{sheetId:i,disabled:n}=s,o=[i,n];r({type:L.ADOPTED_STYLESHEET_DISABLED,date:e,args:o});break}default:B.error("translateDOMEvent: DOMEvent not supported");break}}function Iy(s){let r=Py(s.data);return{type:L.GESTURE_RECOGNITION,args:[s.targetId,r],date:s.timestamp}}function Py(s){let r={type:Oy(s.type)};for(let t in s){let e=s[t];e!==void 0&&t!=="type"&&(r[t]=e)}return r}function Oy(s){switch(s){case _t.DRAG:case _t.FLICK:return ni.SWIPE;case _t.LONG_PRESS:return ni.LONG_PRESS;case _t.TAP:return ni.TAP;case _t.PINCH_IN:return ni.PINCH_IN;case _t.PINCH_OUT:return ni.PINCH_OUT}}function Ny(s,r){let t=[],e=!1;return{push(i){if(csArray.prototype.push.call(t,i),t.length===r.batchSize){this.flush();return}r.autoFlushDelay&&r.autoFlushDelay>0&&!e&&(e=!0,csSetTimeout(()=>{e=!1,t.length>0&&this.flush()},r.autoFlushDelay))},flush(){if(!t.length)return;let i=t;t=[],s(i)}}}var My=20;function ky(s){return Ny(r=>{let t={visibleInViewPort:r},e={type:L.TEXT_VISIBILITY,date:M.now(),args:[t]};s(e)},{batchSize:My,autoFlushDelay:1e3})}var sn=(()=>{let s;return function(r){r.REQUEST_START="requestStart",r.DOM_INTERACTIVE="domInteractive",r.TIME_ORIGIN="timeOrigin"}(s||(s={})),s})();function Dy(s){return{type:L.PERFORMANCE_TIMINGS,args:[{performanceTiming:sn.REQUEST_START,timestamp:s.timings.requestStart},{performanceTiming:sn.DOM_INTERACTIVE,timestamp:s.timings.domInteractive},{performanceTiming:sn.TIME_ORIGIN,timestamp:s.timings.timeOrigin}],date:s.timestamp}}function xy(s){switch(s.inputType){case"text":return{type:L.INPUT_TEXT,args:[s.target,s.value],date:s.timestamp};case"select":return{type:L.INPUT_SELECT,args:[s.target,s.selectedIndex],date:s.timestamp};case"checkable":return{type:L.INPUT_CHECKABLE,args:[s.target,s.checked],date:s.timestamp}}}var Ly=500,rn=0;function Vy(){return{processEvent(s,r){if(s.originalEvent.type===L.PERFORMANCE_RESOURCE_TIMING)return rn>=Ly?null:(rn+=1,r({...s.originalEvent,date:s.timestamp}));r(s.originalEvent)},reset(){rn=0}}}function Uy(s){switch(s.videoEventType){case"play":return{type:L.VIDEO_PLAY,args:[s.nodeId],date:s.timestamp};case"pause":return{type:L.VIDEO_PAUSE,args:[s.nodeId],date:s.timestamp};case"seeked":{let r=s;return{type:L.VIDEO_SEEK,args:[r.nodeId,r.newTimePositionInSec],date:s.timestamp}}default:return null}}var jy=(()=>{class s{get pendingEvents(){return this.Pa.pendingEvents}constructor(t,e,i,n,o){this.Pa=t,this.S=e,this.ke=i,this.As=n,this.Rs=o,this.re=()=>{},this.Oa=()=>{},this.rg=ky(c=>this.re(c))}start(){var t,e;this.ng=Vy(),this.Pa.subscribe(i=>{var n,o,c,l,u,E;let p=i,{timestamp:y}=p;switch(p.type){case"Legacy":{let m=p.eventType==="user"?(n=this.Oa)!==null&&n!==void 0?n:()=>{}:this.re;this.ng.processEvent(p,m)}break;case"CustomElementRegistration":{this.re({type:L.CUSTOM_ELEMENT_REGISTRATION,date:y,args:[p.tagName]});break}case"DomEvent":{Cy(p,this.re,this.S);break}case"InputEvent":{let m=xy(p);(o=this.Oa)===null||o===void 0||o.call(this,m);break}case"encryptedCharacterDataChanged":{let{target:m,rawData:S,encryptedData:I,encryptionMetadata:P}=p;this.re({type:L.MUTATION_ENCRYPTED_CHARACTER_DATA,date:y,args:[m,S,I,P]});break}case"StaticResource":{let{url:m}=p;this.re({type:L.STATIC_RESOURCE_URL,date:y,args:[m]});break}case"ResizeMaskedElement":{let{target:m,width:S,height:I}=p;this.re({type:L.MUTATION_ATTRIBUTE,date:y,args:[m,"","style",`width:${S}px !important;height:${I}px !important;`]});break}case"Gesture":{let m=Iy(i);(c=this.Oa)===null||c===void 0||c.call(this,m);break}case"TextVisibility":{this.rg.push(p.text);break}case"StaticResourceManagerEvent":{(l=this.ke)===null||l===void 0||l.processEvent(p);break}case"screenResize":{let{width:m,height:S}=p,I={type:L.SCREEN_RESIZE,date:y,args:[m,S]};this.re(I);break}case"viewportResize":{let{width:m,height:S}=p,I={type:L.RESIZE,date:y,args:[m,S]};this.re(I);break}case"PerformanceTiming":{this.re(Dy(p));break}case"CustomError":{let m=(u=this.Rs)===null||u===void 0?void 0:u.translate(p);m&&this.re(m);break}case"JSError":{let m=(E=this.As)===null||E===void 0?void 0:E.translate(p);m&&this.re(m);break}case"VideoEvent":{let m=Uy(p);m&&this.re(m);break}case"warning":{B.warn(p.message);break}default:B.error(`WebRecorderEventTranslator: Event not supported (${p.type})`);break}}),this.S.emitInitialDomStart(),(t=this.As)===null||t===void 0||t.start(),(e=this.Rs)===null||e===void 0||e.start(),this.Pa.start()}stop(){var t,e,i;this.reset(),this.flush(),this.Pa.stop(),(t=this.ke)===null||t===void 0||t.flushEvents(),(e=this.As)===null||e===void 0||e.stop(),(i=this.Rs)===null||i===void 0||i.stop()}flush(){this.rg.flush()}onEvent(t,e){var i;this.re=t,this.Oa=e,(i=this.ke)===null||i===void 0||i.onEvent(n=>this.re(n))}reset(){this.ng.reset()}}return s})();var Hy=(()=>{class s extends Ne{constructor(t){super(),this.Ue=t}subscribe(t){return super.subscribe(t)}onStart(){X(this.Ue,t=>{t.onEvent(e=>{var i;return this.vr(e,(i=t.eventType)!==null&&i!==void 0?i:"browser")})}),X(this.Ue,t=>{var e;(e=t.start)===null||e===void 0||e.call(t)})}onStop(){X(this.Ue,t=>{var e;return(e=t.stop)===null||e===void 0?void 0:e.call(t)})}vr(t,e){this.produceEvent({timestamp:M.now(),type:"Legacy",originalEvent:t,eventType:e})}}return s})(),Nt=(()=>{let s;return function(r){r[r.Active=0]="Active",r[r.Paused=1]="Paused",r[r.Stopped=2]="Stopped"}(s||(s={})),s})(),By=(()=>{class s{constructor(t,e,i=[]){this.vr=t,this.Th=e,this.hb=i,this.Na=null,this.Pt=Nt.Active,this.nt=[]}reset(){this.Na=null,this.nt=[],this.Pt=Nt.Active}disconnect(){this.Pt=Nt.Stopped}db(){this.Th(Nt.Paused),this.Pt=Nt.Paused,csSetTimeout(()=>{this.Pt===Nt.Paused&&this.bh()},s.STOP_TIMEOUT)}pb(){this.Th(Nt.Active),this.Pt=Nt.Active,X(this.nt,this.vr),this.nt=[]}bh(){this.nt=[],this.Th(Nt.Stopped),this.Pt=Nt.Stopped}pushEvent(t,e){if(e.isUserEvent&&(this.Na=t.date,this.Pt!==Nt.Active)){this.pb(),this.vr(t);return}if(this.fb(t)){this.vr(t);return}switch(this.Pt){case Nt.Active:if(this.gb(t,e)){this.db(),csArray.prototype.push.call(this.nt,t);return}this.vr(t);break;case Nt.Paused:csArray.prototype.push.call(this.nt,t);break;case Nt.Stopped:break}}gb(t,e){return!e.isUserEvent&&this.Na!==null&&t.date-this.Na>s.INACTIVITY_TIMEOUT}fb(t){return csArray.prototype.indexOf.call(this.hb,t.type)>-1}}return s.INACTIVITY_TIMEOUT=5e3,s.STOP_TIMEOUT=5e3,s})(),Fy=2e3,$y=(()=>{class s extends Mt{constructor(t,e,i,n,o,c,l,u,E,p,y,m,S,I,P=[],v,_,D,O,A){super(),this.f=t,this.F=e,this.mb=i,this.Ye=n,this.B=o,this.R=c,this.qe=l,this.mt=u,this.xe=E,this.ot=p,this.W=y,this.Dt=m,this.Rt=S,this.je=I,this.Ue=P,this.og=v,this.qt=_,this.Hn=D,this.As=O,this.Rs=A,this.Ws=0,this.Fs=new al,this._r={allowFromQuotaService:!0,allowFromSerialization:!0},this.ag=Ar(()=>{this.F.eventsCount()>0&&this.cg()},Fy),this.Cs=j=>this.processBrowserEvent(j),this.Bn=j=>this.Nt(j),this.lg=0,this.Ma=0,this.ze=new ll,this.Ah=!1,this.hg=50*1024,this.ji=!1,this.Fn=!1,this.xi=[],this.ka=new By(j=>this.K(j),j=>{switch(j){case Nt.Active:this.yb();break;case Nt.Stopped:this.Eb();break}},[L.RESOURCE_HASHES,L.TEXT_VISIBILITY,L.API_ERROR,L.JAVASCRIPT_ERROR]),this.ug=j=>{this.Dt.removeBatchInProgress(`${j.params.sn}.${j.params.pn}.${j.params.ri}`)}}init(){this.Rh(),this.W.onLoad(this.ug),this.W.onError(this.ug)}yb(){csArray.prototype.forEach.call(this.og,t=>t.start())}Eb(){csArray.prototype.forEach.call(this.og,t=>t.stopForInactivity())}Rh(){var t,e,i;this.je.onEvent(this.Cs,this.Bn),(t=this.ot)===null||t===void 0||t.onInputNodeToEncrypt(this.Bn),(e=this.ot)===null||e===void 0||e.onApiErrorToEncrypt(n=>{this.dg(n)}),(i=this.ot)===null||i===void 0||i.onUserIdentifierToEncrypt(this.Cs),this.ze.onEvent(n=>{if(csSetTimeout(()=>this.Hi("page-state",n)),n!==Qt.Visible){if(n===Qt.Blur)return this.pg();if(!this.Ah)return this.Ah=!0,csSetTimeout(()=>{this.Ah=!1}),n===Qt.Hidden?this.pg():this.Sb()}})}isRecording(){return this.R.hasValidSession()&&this.isStarted}pg(){if(!this.canSendEvents())return;this.je.flush(),this.Dt.saveBatchesInProgress(),X(this.Ue,o=>{var c,l;return X((l=(c=o.getPendingEvents)===null||c===void 0?void 0:c.call(o))!==null&&l!==void 0?l:[],u=>this.F.addEvent(u))});let t=this.F.getEvents();if(t.length===0)return;this.Hi("pending-events",this.je.pendingEvents);let e=this.W.getQueryParams();e.rst=this.getRecordingStartTimestamp(),e.let=this.getRecordingLastEventTimestamp();let i=this.Ye.getCurrentIndex();e.ri=i.toString(),this.Rt.removeQueryParams(),this.Rt.setQueryParams(e),this.Ma=t[t.length-1].date;let n=this.F.stringifyEvents();if(n.length>this.hg){let o=this.fg();if(o.length>0){let c=$s(o);this.Rt.send(c)||this.Dt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:c}),this.Ye.increment()}if(this.F.eventsCount()>0){e.ri=this.Ye.getCurrentIndex().toString();let c=this.F.stringifyEvents();this.Dt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:c}),this.Ye.increment()}}else this.Rt.send(n)||this.Dt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:n}),this.Ye.increment();this.Rt.removeQueryParams(),this.F.clearEvents()}Sb(){if(!this.canSendEvents())return;this.je.flush();let t=this.W.getQueryParams();this.Dt.saveBatchesInProgress(),t.rst=this.getRecordingStartTimestamp(),delete t.ri,t.hlm="true",this.Rt.removeQueryParams(),X(this.Ue,n=>{var o,c;return X((c=(o=n.getPendingEvents)===null||o===void 0?void 0:o.call(n))!==null&&c!==void 0?c:[],l=>this.F.addEvent(l))});let e=this.F.getEvents();if(e.length===0){delete t.let,delete t.rst,this.Rt.setQueryParams(t),this.Rt.send(),this.Rt.removeQueryParams();return}this.Hi("pending-events",this.je.pendingEvents),this.Ma=e[e.length-1].date,t.let=this.getRecordingLastEventTimestamp(),this.Rt.setQueryParams(t);let i=this.F.stringifyEvents();if(i.length>this.hg){let n=this.fg();if(n.length>0){let o=$s(n);this.Rt.send(o)||this.Dt.save({key:`${t.sn}.${t.pn}.last`,metadata:{...t,datatype:"json"},events:o})}else delete t.let,delete t.rst,delete t.ri,this.Rt.removeQueryParams(),this.Rt.setQueryParams(t),this.Rt.send(),this.Rt.removeQueryParams();if(this.F.eventsCount()>0){t.rst=this.getRecordingStartTimestamp(),t.let=this.getRecordingLastEventTimestamp();let o=this.Ye.getCurrentIndex();t.ri=o.toString();let c=this.F.stringifyEvents();this.Dt.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:c}),this.Ye.increment()}}else this.Rt.send(i)||(this.Dt.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:i}),this.Ye.increment());this.Rt.removeQueryParams(),this.F.clearEvents()}blockSendingEventsFromQuotaService(){this._r.allowFromQuotaService=!1}allowSendingEventsFromQuotaService(){this._r.allowFromQuotaService=!0}blockSendingEventsFromSerialization(){this._r.allowFromSerialization=!1}allowSendingEventsFromSerialization(){this._r.allowFromSerialization=!0}canSendEvents(){return this._r.allowFromQuotaService&&this._r.allowFromSerialization}onIframeJavascriptError(t){var e;if(this.qe&&this.As){(e=this.qe)===null||e===void 0||e.anonymize(t);let i=this.As.translate({message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename,timestamp:M.now(),type:"JSError"});i&&this.Cs(i)}}onIframeCustomError(t){if(this.Rs){let e=this.Rs.translate({...t,timestamp:M.now(),type:"CustomError"});e&&this.Cs(e)}}onIframeDetailedApiError(t){this.gg(t)}onIframeRecordingUserEvent(t){for(let e of t)this.Nt(e)}onIframeRecordingBrowserEvent(t){if(this.isStarted)for(let e of t)this.processBrowserEvent(e)}processBrowserEvent(t){this.B.isCurrentPageviewValid()&&this.ka.pushEvent(t,{isUserEvent:!1})}Nt(t){this.B.refreshSession(),this.B.isSessionValid()&&this.ka.pushEvent(t,{isUserEvent:!0})}K(t){mt.general.nbEvents.increase(),this.F.addEvent(t),this.F.isThresholdReached()?this.pushEvents():this.F.isFull()&&this.ag(),this.mg(t)}mg(t){this.f.emitDebugEvents&&this.Fs.emit("recordingEvent",{...t,typeName:L[t.type]})}onStart(){var t;this.Hi("tag-version","15.134.1"),this.Hi("page-state",document.visibilityState),this.ka.reset(),this.ze.start(),this.initStates(),this.je.start(),this.mt&&this.xe&&this.mt.subscribe(s.Ut,e=>this.gg(e),{detailedEvent:!0}),this.f.emitDebugEvents&&this.Fs.emit("replayRecordingStarted"),csArray.prototype.forEach.call(this.xi,e=>this.yg(e)),this.xi=[],this.ji&&((t=this.qt)===null||t===void 0||t.enableOnlineAssets(),this.ji=!1)}onStop(){var t;this.ze.stop(),this.mt&&this.mt.unsubscribe(s.Ut),this.je.stop(),this.ka.disconnect(),(t=this.qt)===null||t===void 0||t.disableOnlineAssets()}clearStates(){this.je.flush(),this.ag.cancel(),this.pushEvents(),this.W.removeQueryParams()}initStates(){this.lg=M.now(),this.Ye.reset(),this.Ws=0,this.W.setQueryParams(this.mb.getRequestParameters())}pushEvents(){X(this.Ue,t=>{var e;return(e=t.flushEvents)===null||e===void 0?void 0:e.call(t)}),this.F.eventsCount()>0&&(this.isStarted?this.cg():this.F.clearEvents())}cg(){if(!this.canSendEvents())return;let t=this.F.getEvents();this.Ma=t[t.length-1].date;let e=this.Ye.getCurrentIndex();this.W.setQueryParams({ri:e.toString(),rst:this.getRecordingStartTimestamp(),let:this.getRecordingLastEventTimestamp()});let i=this.W.getQueryParams();this.Dt.addBatchInProgress(`${i.sn}.${i.pn}.${e}`,this.W.getQueryParams(),t),this.W.send(t),this.Ye.increment(),this.F.clearEvents(),this.Eg&&this.Eg()}addInitialDom(t){this.F.addEventByTimestamp(t),this.mg(t)}gg(t){if(this.Hn&&(t.plainCustomRequestHeaders||t.plainCustomResponseHeaders||t.requestBodyAttributes||t.responseBodyAttributes||t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody)){if(this.Hn.truncate(t),this.ot){this.ot.registerApiErrorToEncrypt(t);return}t.customRequestHeaders="",t.customResponseHeaders="",t.requestBodyAttributes="",t.responseBodyAttributes="",t.queryParameters="",t.requestBody="",t.responseBody=""}this.dg(t)}dg(t){if(this.Ws<s.vb){let e={type:L.API_ERROR,date:M.now(),args:[this.xe.anonymize(t)]};this.Cs(e),this.Ws=this.Ws+1,q.counters.networkRequests.count("collected")}}_b(t){t===ss.ETR_SESSION?this.W.setQueryParams({[s.wb]:s.Sg}):t===ss.ETR_PAGE&&this.W.setQueryParams({[s.Tb]:s.Sg})}clearEvents(){this.F.clearEvents()}onCustomJavaScriptErrorEvent(t){var e;let i=(e=this.As)===null||e===void 0?void 0:e.translate({type:"JSError",timestamp:M.now(),message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename});i&&this.Cs(i)}onCustomErrorEvent(t){var e;let i=(e=this.Rs)===null||e===void 0?void 0:e.translate({type:"CustomError",timestamp:M.now(),message:t.message,attributes:t.attributes});i&&this.Cs(i)}onPageEvent(t){this.vg(t)}onUserIdentifierEvent(t){var e;let i={userIdentifier:t,date:M.now(),keyId:this.f.encryptionPublicKeyId};(e=this.ot)===null||e===void 0||e.registerUserIdentifierToEncrypt(i)}onEventTriggerRecording(t,e){this.isStarted?this.yg({eventName:t,eventType:e}):csArray.prototype.push.call(this.xi,{eventName:t,eventType:e})}yg(t){this._b(t.eventType),this.vg(t.eventName),this.pushEvents()}vg(t){let e={type:L.PAGE_EVENT,date:M.now(),args:[{eventName:csString.prototype.slice.call(t,0,s.bb)}]};this.F.addEvent(e)}triggerUnanonymizationConsentGranted(){let t={date:M.now(),type:L.UNANONYMIZED_CONSENT_GRANTED};this.F.addEvent(t)}triggerUnanonymizationConsentWithdrawn(){let t={date:M.now(),type:L.UNANONYMIZED_CONSENT_WITHDRAWN};this.F.addEvent(t)}triggerRecordingForSessionGranted(){this.Hi("consent-granted")}triggerRecordingForSessionWithdrawn(){this.Hi("consent-withdrawn")}activateOnlineAssetsOnNextPageview(){this.Fn=!0}getStaticResourceManagerStatus(){return this.qt?{isStarted:this.f.useStaticResourceManager&&Vn.isSupported(),onlineAssets:{activated:this.qt.isOnlineAssetsActivated(),enabledOnNextPageview:this.Fn}}:null}resetOnlineAssetsOnPageview(){this.ji=!1,this.Fn=!1}updateOnlineAssetsOnPageview(){this.qt&&this.Fn&&(this.ji=!0,this.Fn=!1)}onRecordingRequestSent(t){this.Eg=t}getRecordingStartTimestamp(){return this.lg.toString()}getRecordingLastEventTimestamp(){return this.Ma.toString()}onOptOut(){X(this.Ue,t=>{var e;return(e=t.releaseResources)===null||e===void 0?void 0:e.call(t)})}Hi(t,e){if(!this.f.emitRecordInfoEvents)return;let i={date:M.now(),type:L.RECORDING_INFO_EVENT,args:e==null?[t]:[t,e]};this.F.addEvent(i)}fg(){return this.F.extractEvents(L.API_ERROR,L.JAVASCRIPT_ERROR,L.CUSTOM_ERROR,L.TEXT_VISIBILITY,L.POINTER_DOWN)}}return s.Ut="RecordingService",s.bb=255,s.vb=20,s.Tb="etrp",s.wb="etrs",s.Sg="1",H([Tt("addInitialDom")],s.prototype,"addInitialDom",null),s})(),zy=(()=>{class s extends Mt{constructor(t,e,i){super(),this.Jt=t,this.Rt=e,this.W=i,this.Ch=!1,this.$n={},this.Ab=n=>{if(n.length!==0)for(let o of n){let{metadata:c,events:l}=o;this.Rb(c.rt)&&this.W.send(l,c)}},window.addEventListener("focus",()=>{this.recover()})}onStart(){this.$n={}}onStop(){}recover(){this.Jt.recover(this.Ab)}addBatchInProgress(t,e,i){this.$n[t]={metadata:{...e},events:i}}removeBatchInProgress(t){delete this.$n[t]}blockSendingLastMessage(){this.Ch=!1}allowSendingLastMessage(){this.Ch=!0}sendLastMessageBeacon(){if(this.Ch){let{ri:t,rst:e,let:i,...n}=this.W.getQueryParams();n.hlm="true",this.Rt.setQueryParams(n),this.Rt.send()}}Rb(t){return!!t&&csString.prototype.indexOf.call(t,V.RECORDING_TEMPORARILY)===-1}saveBatchesInProgress(){csArray.prototype.forEach.call(Object.keys(this.$n),t=>{let{metadata:e,events:i}=this.$n[t];this.Jt.save({key:`${e.sn}.${e.pn}.${e.ri}`,metadata:{...e,datatype:"json"},events:csJSON.stringify(i)})})}save(t){this.Jt.save(t)}}return H([N("RecordingRecovery")],s.prototype,"recover",null),s})(),Gy=(()=>{class s{constructor(){this.Da=1}getCurrentIndex(){return this.Da}increment(){this.Da+=1}reset(){this.Da=1}getRequestParameters(){return{ri:`${this.Da}`}}}return s})(),qy=(()=>{let s;return function(r){r[r.NOT_EXIST=2]="NOT_EXIST"}(s||(s={})),s})(),Wy=8*1024*1024,Yy=(()=>{class s extends Mt{constructor(t,e,i){super(),this.ke=t,this._g=e,this.gt=i,this.Ih={},this.wg=new Set,this.as=!1}initState(){Sc()&&(this.Le=this.gt.getRequestParameters(),this.Cb=`${this._g}/exist?${yi.toQuery(this.Le)}`,this.Ib=`${this._g}/putTag?${yi.toQuery(this.Le)}`,this.Tg=Fs(async()=>{if(this.as){this.Tg();return}this.as=!0;try{await this.Pb()}finally{this.as=!1}},300),this.ke.onSendStaticResource(t=>{this.bg(t)}))}onStart(){}onStop(){}onIframeStaticResource(t){this.bg(t)}bg(t){this.Ag(t.resource.hash,t.resource.data),t.nestedResources&&t.nestedResources.length>0&&csArray.prototype.forEach.call(t.nestedResources,e=>{this.Ag(e.hash,e.data)})}Ag(t,e){this.wg.has(t)||(this.wg.add(t),this.Ih[t]=e,this.Tg())}async Pb(){let t=this.Ih;this.Ih={};let e=await this.Ob(t);if(!e.length)return;let i=this.Nb(e);await Promise.all(csArray.prototype.map.call(i,n=>window.fetch(this.Ib,{method:"POST",body:n})))}async Mb(t){try{let e=Object.keys(t);if(!e.length)return[];let i={projectId:this.Le.pid,filter:qy.NOT_EXIST,hashes:e,touch:!0};return await(await window.fetch(this.Cb,{method:"POST",body:csJSON.stringify(i)})).json()}catch{return[]}}async Ob(t){let e=[],i=await this.Mb(t);return csArray.prototype.forEach.call(i,n=>{let o=t[n];o?csArray.prototype.push.call(e,{hash:n,data:o}):B.warn("SRM: received unknown hash: "+n)}),e}Nb(t){let e=0,i=[new FormData];for(let n of t){let{data:o,hash:c}=n,l=i.length-1;if(e=e+o.size,e<Wy)i[l].append("",o,c);else{let u=new FormData;u.append("",o,c),e=o.size,csArray.prototype.push.call(i,u)}}return i}}return s})(),Xy=2*1e3*1024,Ky=200,Jy=(()=>{class s{constructor(t=[],e=Xy){this.Vt=t,this.Ph=new po(e)}addEvent(t){this.Ph.addString($s(t)),csArray.prototype.push.call(this.Vt,t)}addEventByTimestamp(t){let e=0;for(;e<this.Vt.length&&!(this.Vt[e].date>=t.date);e+=1);csArray.prototype.splice.call(this.Vt,e,0,t)}eventsCount(){return this.Vt.length}clearEvents(){this.Ph.reset(),this.Vt=[]}isFull(){return this.eventsCount()>=Ky}isThresholdReached(){return this.Ph.isThresholdReached()}getEvents(){return this.Vt}extractEvents(...t){let e=[],i=[];return csArray.prototype.forEach.call(this.Vt,n=>{csArray.prototype.indexOf.call(t,n.type)!==-1?csArray.prototype.push.call(e,n):csArray.prototype.push.call(i,n)}),this.Vt=i,e}stringifyEvents(){return $s(this.Vt)}QC(t){t.type===L.INITIAL_DOM&&(window.CSDomSerialized=window.CSDomSerialized?window.CSDomSerialized+1:1)}}return H([Tt("RecordingBatch.addEvent")],s.prototype,"addEvent",null),s})();function Vt(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var Qy=(()=>{class s{constructor(t,e){this.Ot=t,this.M=e,this.Us=[{boundElement:window,type:"hashchange",listener:()=>this.hashChangeListener()},{boundElement:document,type:"visibilitychange",listener:()=>this.visibilityChangeListener()}]}onEvent(t){this.L=t}start(){this.Ei(),this.triggerInitialEvents()}stop(){this.Si()}Ei(){csArray.prototype.forEach.call(this.Us,t=>ft(t))}Si(){csArray.prototype.forEach.call(this.Us,t=>gt(t))}triggerInitialEvents(){this.hashChangeListener()}hashChangeListener(){let t={type:L.HASH_CHANGE,args:[this.M.anonymizePII(this.Ot.href)],date:M.now()};this.L(t)}visibilityChangeListener(){let t={type:L.VISIBILITY_CHANGE,args:[document.visibilityState],date:M.now()};this.L(t)}}return H([N("hashChange")],s.prototype,"hashChangeListener",null),H([N("visibilityChange")],s.prototype,"visibilityChangeListener",null),s})();function Zy(s){if(!R(s))return null;let t=/iP(ad|hone|od).+Version\/(\d+)\..*Safari/i.exec(s);return t?Number(t[2]):null}var tE=!!window.chrome,eE=33,sE=(()=>{class s{constructor(){this.eventType="user",this.Nh=[],this.Hb=[{type:"pointerup",listener:e=>this.pointerUpListener(e),boundElement:document},{type:"pointermove",listener:e=>this.pointerMoveListener(e),boundElement:document},{type:"pointerdown",listener:e=>this.pointerDownListener(e),boundElement:document}],this.Bb=[{type:"touchstart",listener:e=>this.touchStartListener(e),boundElement:document},{type:"touchmove",listener:e=>this.touchMoveListener(e),boundElement:document},{type:"touchend",listener:e=>this.touchEndCancelListener(e),boundElement:document},{type:"touchcancel",listener:e=>this.touchEndCancelListener(e),boundElement:document}],this.La=[{type:"click",listener:e=>this.clickListener(e),boundElement:document},{type:"keyup",listener:e=>this.keyUpListener(e),boundElement:document},{type:"keydown",listener:e=>this.keyDownListener(e),boundElement:document},{type:"copy",listener:e=>this.copyListener(e),boundElement:document},{type:"cut",listener:e=>this.cutListener(e),boundElement:document},{type:"paste",listener:e=>this.pasteListener(e),boundElement:document},{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e)),boundElement:document},{type:"mouseover",listener:e=>this.mouseOverListener(e),boundElement:document}],this.Mh=[{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e))}];let t=Zy(window.navigator.userAgent);(t===null||t&&t>=16)&&csArray.prototype.push.call(this.Mh,{type:"mouseover",listener:e=>this.mouseOverListener(e)}),this.he=new Xs((e,i)=>{switch(i){case"initial":case"added":this.Ei(e);break;case"removed":this.Si(e);break}})}init(){this.Fb(),this.$b(),this.Kc()}onEvent(t){csArray.prototype.push.call(this.Nh,t)}ne(t,e=!1){csArray.prototype.forEach.call(this.Nh,i=>i(t,e))}start(){this.ah(),this.Ei(document),this.he.observe()}stop(){this.Si(document),this.he.disconnect(),this.Nh=[]}$b(){this.zb()&&csArray.prototype.push.call(this.La,...this.Hb)}Fb(){this.Gb()&&csArray.prototype.push.call(this.La,...this.Bb)}Ei(t){lr(t)?csArray.prototype.forEach.call(this.La,e=>ft(e)):csArray.prototype.forEach.call(this.Mh,e=>{let i={type:e.type,listener:e.listener,boundElement:t};ft(i)})}Si(t){lr(t)?csArray.prototype.forEach.call(this.La,e=>gt(e)):csArray.prototype.forEach.call(this.Mh,e=>{let i={type:e.type,listener:e.listener,boundElement:t};gt(i)})}zb(){return"PointerEvent"in window&&typeof window.PointerEvent=="function"}Gb(){return"TouchEvent"in window&&typeof window.TouchEvent=="function"}ah(){this.qb()}qb(){let t=Vs.getScrollContainer()||document,e=rt(t),i=this.Rg(t);if(i.top!==0||i.left!==0){let n={type:L.SCROLL,args:[e,i.left,i.top],date:M.now()};this.ne(n,!0)}}Rg(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}}scrollListener(t){if(x.isMaskedElement(t)||x.isMaskedElementChild(t))return;let e=rt(t),i=this.Rg(t),n={type:L.SCROLL,args:[e,i.left,i.top],date:M.now()};this.ne(n)}mouseOverListener(t){if(x.isMaskedElementChild(t.target))return;let e=rt(t.target),i={type:L.MOUSE_OVER,args:[e],date:M.now()};this.ne(i)}clickListener(t){let e=wt(t);if(x.isMaskedElementChild(e))return;let i=rt(e),n={type:L.CLICK,args:[i],date:M.now()};this.ne(n)}keyUpListener(t){let e=wt(t);if(x.isMaskedElementChild(e))return;let i=rt(e),n=this.U[t.key];if(n===void 0)return;let o={type:L.KEY_UP,args:[i,n],date:M.now()};this.ne(o)}keyDownListener(t){let e=wt(t);if(x.isMaskedElementChild(e))return;let i=rt(e),n=this.U[t.key];if(n===void 0)return;let o={type:L.KEY_DOWN,args:[i,n],date:M.now()};this.ne(o)}copyListener(t){let e=wt(t);if(x.isMaskedElementChild(e))return;let i=rt(e),n={type:L.CLIPBOARD_COMMAND,args:[i,Us.COPY],date:M.now()};this.ne(n)}cutListener(t){let e=wt(t);if(x.isMaskedElementChild(e))return;let i=rt(e),n={type:L.CLIPBOARD_COMMAND,args:[i,Us.CUT],date:M.now()};this.ne(n)}pasteListener(t){let e=wt(t);if(x.isMaskedElementChild(e))return;let i=rt(e),n={type:L.CLIPBOARD_COMMAND,args:[i,Us.PASTE],date:M.now()};this.ne(n)}pointerUpListener(t){let e=wt(t);if(x.isMaskedElementChild(e))return;let i=rt(e),n={type:L.POINTER_UP,args:[t.pointerId,t.pointerType,Vt(t.clientX,1),Vt(t.clientY,1),i,t.button],date:M.now()};this.ne(n)}pointerMoveListener(t){let e={type:L.POINTER_MOVE,args:[t.pointerId,t.pointerType,Vt(t.clientX,1),Vt(t.clientY,1)],date:M.now()};this.ne(e)}pointerDownListener(t){let e=wt(t);if(x.isMaskedElementChild(e))return;let i=rt(e),n={type:L.POINTER_DOWN,args:[t.pointerId,t.pointerType,Vt(t.clientX,1),Vt(t.clientY,1),i,t.button,{pageX:Vt(t.pageX,1),pageY:Vt(t.pageY,1)}],date:M.now()};this.ne(n)}touchStartListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:L.TOUCH_START,args:[n.identifier,Vt(n.clientX,1),Vt(n.clientY,1)],date:M.now()};this.ne(o)}}touchMoveListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:L.TOUCH_MOVE,args:[n.identifier,Vt(n.clientX,1),Vt(n.clientY,1)],date:M.now()};this.ne(o)}}touchEndCancelListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:t.type==="touchend"?L.TOUCH_END:L.TOUCH_CANCEL,args:[n.identifier,Vt(n.clientX,1),Vt(n.clientY,1)],date:M.now()};this.ne(o)}}Kc(){this.U={},this.U[" "]=G.SPACE,this.U.Spacebar=G.SPACE,this.U.Backspace=G.BACKSPACE,this.U.Enter=G.ENTER,this.U.Delete=G.DELETE,this.U.ArrowUp=G.ARROWUP,this.U.ArrowDown=G.ARROWDOWN,this.U.ArrowLeft=G.ARROWLEFT,this.U.ArrowRight=G.ARROWRIGHT,this.U.Up=G.ARROWUP,this.U.Down=G.ARROWDOWN,this.U.Left=G.ARROWLEFT,this.U.Right=G.ARROWRIGHT,this.U.CapsLock=G.CAPSLOCK,this.U.Shift=G.SHIFT,this.U.Tab=G.TAB,this.U.Escape=G.ESCAPE,this.U.Esc=G.ESCAPE,this.U.End=G.END,this.U.Alt=G.ALT,this.U.Control=G.CTRL,this.U.Meta=G.META}}return H([Tt("RecordingPageEvents.start")],s.prototype,"start",null),H([N("scroll")],s.prototype,"scrollListener",null),H([N("mouseOver"),at(),uf()],s.prototype,"mouseOverListener",null),H([N("click"),at()],s.prototype,"clickListener",null),H([N("Event handler type: keyup")],s.prototype,"keyUpListener",null),H([N("Event handler type: keydown")],s.prototype,"keyDownListener",null),H([N("Event handler type: copy")],s.prototype,"copyListener",null),H([N("Event handler type: cut")],s.prototype,"cutListener",null),H([N("Event handler type: paste")],s.prototype,"pasteListener",null),H([N("Event handler type: pointerup"),at()],s.prototype,"pointerUpListener",null),H([N("Event handler type: pointermove"),at(),Rr({wait:eE})],s.prototype,"pointerMoveListener",null),H([N("Event handler type: pointerdown"),at()],s.prototype,"pointerDownListener",null),H([N("Event handler type: touchstart"),at()],s.prototype,"touchStartListener",null),H([N("Event handler type: touchmove"),at()],s.prototype,"touchMoveListener",null),H([N("Event handler type: touchend-cancel"),at()],s.prototype,"touchEndCancelListener",null),s})(),iE=(()=>{class s{constructor(){}onScannedAsset(t){this.Va=t}scanCssString(t){this.kh(di(t))}scanElement(t,e){x.getMaskedElementDetails(t).state!==x.MaskedElementState.NotMasked||e&&x.isMaskedAttribute(t,e)||(Er(t)?this.Wb(t):Xn(t)?this.Yb(t,e):(this.Xb(t,e),this.Kb(t,e),this.Jb(t,e)))}Yb(t,e){var i;if((!e||e==="href")&&t.href){let o={assetId:((i=t.sheet)===null||i===void 0?void 0:i.href)||t.href,assetBasePath:window.location.href,assetRawPath:il(t)};this.Va({type:"stylesheet",asset:o})}}Wb(t){var e;let i=new Set;if(t.textContent)for(let o of di(t.textContent))i.add(o);let n;try{n=(e=t.sheet)===null||e===void 0?void 0:e.cssRules}catch(o){o.name==="SecurityError"||o.name==="InvalidAccessError"||B.error(o.message)}if(n)for(let o=0;o<n.length;o++){let c=n.item(o).cssText;for(let l of di(c))i.add(l)}this.kh(ns(i))}Dh(t){return!this.Qb(t)&&!le(t)&&!Pd(t)}Xb(t,e){if(qu(t)||Gu(t)){if(!e||e==="src"){let i=t.getAttribute("src");if(i&&this.Dh(i)){let n={assetId:t.src,assetRawPath:i,assetBasePath:window.location.href};this.Va({type:"asset",asset:n})}}(!e||e==="srcset")&&t.srcset&&this.Zb(t.srcset)}}Kb(t,e){if(t.nodeType!==1){et.warn(`StaticResourceUrlTracker: Wrong element nodeType: ${t==null?void 0:t.nodeName}/${t.nodeType}`);return}if(t.hasAttribute&&(!e||e==="style")&&t.hasAttribute("style")){let i=t.getAttribute("style");if(typeof i=="string")this.scanCssString(i);else throw new Error("Unexpected style: "+t.outerHTML)}}Zb(t){this.kh(yo(t))}Jb(t,e){if((Ku(t)||Ju(t)||Qu(t))&&(!e||e==="href"||e==="xlink:href")){let i=t.getAttribute("href")||t.getAttribute("xlink:href");if(i&&this.Dh(i)){let n={assetId:es(i),assetRawPath:i,assetBasePath:window.location.href};this.Va({type:"asset",asset:n})}}}kh(t){return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(t,e=>this.Dh(e)),e=>({rawUrl:e,absoluteUrl:es(e)})),e=>{let i={assetId:e.absoluteUrl,assetBasePath:window.location.href,assetRawPath:e.rawUrl};this.Va({type:"asset",asset:i})})}Qb(t){return/^https:\/\/\w+:\w+@/.test(t)}}return s})(),rE=30,nE=0,Ol=(()=>{class s{constructor(t,e=rE,i=nE){this.tA=t,this.eA=e,this.sA=i,this.We=new wi,this.Be=!1,this.xh=0,this.Cg=()=>{for(this.xh=0;this.We.length;){if(this.xh>=this.eA){csSetTimeout(this.Cg,this.sA);return}let n=M.elapsed(),o=this.We.pop();if(!o)break;this.runTask(o);let c=M.elapsed()-n;this.xh+=c}this.Be=!1}}schedule(t,e=!1){if(!this.tA||e){t();return}mt.general.pendingTasks.increase(),this.We.push(t),this.iA()}iA(){this.Be||(this.Be=!0,csSetTimeout(()=>{this.Cg()}))}runTask(t){mt.general.pendingTasks.decrease(),t()}runPendingTasks(){this.We.forEach(t=>{this.runTask(t)}),this.We.clear()}clearQueue(){mt.general.pendingTasks.clear(),mt.mutations.pendingMutations.clear(),this.We.clear()}isEmpty(){return this.We.length===0}}return H([N("TaskScheduler"),Tt("runTask")],s.prototype,"runTask",null),H([Tt("runPendingTasks")],s.prototype,"runPendingTasks",null),s})(),oE=(()=>{class s{constructor(){this.z=!1,this.Ig=new go(t=>t.type==="cssRuleInserted"&&this.rA(t)),this.nA=br(t=>{this.z&&t.length>0&&this.O.schedule(()=>X(t,e=>this.qn.scanElement(e)))}),this.oA=({type:t,asset:e})=>{var i,n,o;t==="stylesheet"&&((i=this.aA)===null||i===void 0||i.call(this,e)),(n=this.cA)===null||n===void 0||n.call(this,e);let c={date:M.now(),type:L.STATIC_RESOURCE_URL,args:[e.assetId]};(o=this.L)===null||o===void 0||o.call(this,c)},this.O=new Ol(!0,30,0),this.Mn=new Rl(t=>this.lA(t)),this.D=new ge(t=>this.To(t)),this.qn=new iE,this.qn.onScannedAsset(this.oA)}onEvent(t){this.L=t}onAsset(t){this.cA=t}onStyleSheetFound(t){this.aA=t}start(){this.z||(this.z=!0,this.Ig.observe(),this.Mn.observe(),this.D.observe())}stop(){this.z&&(this.Ig.disconnect(),this.Mn.disconnect(),this.D.disconnect(),this.z=!1)}rA(t){!t.rule||!this.z||this.qn.scanCssString(t.rule)}lA(t){this.z&&x.getMaskedElementDetails(t).state===x.MaskedElementState.NotMasked&&this.nA.push(t)}To(t){csSetTimeout(()=>{for(let e of t)switch(e.type){case"attributes":this.qn.scanElement(e.target,e.attributeName);break;case"characterData":this.hA(e.target);break;case"childList":}})}hA(t){cr(t)&&csNodeparentNode.apply(t)&&Er(csNodeparentNode.apply(t))&&this.qn.scanCssString(t.data)}}return s})(),aE="csPersisted",Qa="v2/recording",cE=["isRecording"],Nl=["replay:resourceManager:enableForOnlineResource:nextPageviewOnly","cssrm:onlineAssets:activateForNextPageview"],lE=["replay:resourceManager:getStatus","cssrm:getStatus"],hE=(()=>{class s{constructor(t,e,i,n,o,c,l,u,E,p,y,m,S,I,P,v,_,D,O,A,j,it){this.js=t,this.R=e,this.f=i,this.Le=n,this.E=o,this.M=c,this.B=l,this.le=u,this.qe=E,this.mt=p,this.xe=y,this.vt=m,this.S=S,this.Ys=I,this.Pg=P,this.se=v,this.de=_,this.tt=D,this.Hn=O,this.it=A,this.ZC=j,this.ot=it}init(){var t,e;let i=[],n=[];csArray.prototype.push.call(n,new Wm),this.Wn=new Ym(this.it.shouldUseAnonymization(),this.f.whitelistedAttributes,this.M,this.f.anonymizeDigits),this.Bi();let o=new by(aE);this.uA(o);let c=new Gy;this.F=new Jy;let l=new oE;csArray.prototype.push.call(i,l),this.f.useStaticResourceManager&&Vn.isSupported()&&(this.qt=new Vn,this.ke=new Ry,this.Og=new Yy(this.ke,this.f.getStaticResourceManagerUri(),this.Le),this.Pg.addListener(this.Og),csArray.prototype.push.call(n,this.qt));let u=new Si(c,this.Le,{getRequestParameters:()=>({let:this.recordingService.getRecordingLastEventTimestamp()})},{getRequestParameters:()=>({rst:this.recordingService.getRecordingStartTimestamp()})},{getRequestParameters:()=>({rt:csArray.prototype.join.call(this.R.getCollectStates(),",")})}),E=new hl(`${this.f.getRecordingUri()}/${Qa}`);csArray.prototype.push.call(n,this.Wn),csArray.prototype.push.call(n,new ey(this.tt)),csArray.prototype.push.call(n,new sy),this.Fi=new sE,this.Fi.init(),csArray.prototype.push.call(i,this.Fi),this.Dt=new zy(o,E,this.W),csArray.prototype.push.call(i,new Qy(window.location,this.M));let p=new qm,y=new ny,m=new ay,S=new hy(this.ot),I=new dy,P=[y,this.le,p,new Hy(csArray.prototype.filter.call(i,O=>O)),I,new py,new yy,S,m],v=new _y(P,n),_=new jy(v,this.S,this.ke,this.As,this.Rs),D=[p,y,m,S,I];this.recordingService=new $y(this.f,this.F,u,c,this.B,this.R,this.qe,this.mt,this.xe,this.ot,this.W,this.Dt,E,_,i,D,this.qt,this.Hn,this.As,this.Rs),this.Ys.addListener(this.recordingService),this.Pg.addListener(this.recordingService),this.recordingService.init(),this.E.register(cE,()=>this.R.isReplayRecorded()&&!this.se.isUrlExcludedForSessionReplay()),this.E.register(Nl,()=>{this.recordingService.activateOnlineAssetsOnNextPageview(),this.S.emitRecordingContextChange()}),this.E.register(lE,()=>this.recordingService.getStaticResourceManagerStatus()),this.Yn=new Ay(this.S,this.R),this.Ys.addListener(this.Yn),this.js.enableRecordingContext(this.recordingService,this.R,this.Yn),this.Lh()}onAfterNaturalPageView(){var t;this.se.isUrlExcludedForSessionReplay()?this.recordingService.resetOnlineAssetsOnPageview():this.recordingService.updateOnlineAssetsOnPageview(),(t=this.Og)===null||t===void 0||t.initState()}onStartTracking(){this.Dt.recover(),this.Bi(),this.R.isReplayRecorded()&&!this.se.isUrlExcludedForSessionReplay()&&(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Vh())}onArtificialPageViewEnd(){this.R.isReplayRecorded()&&!this.se.isUrlExcludedForSessionReplay()&&!this.R.isTemporarilyRecorded()&&this.Dt.sendLastMessageBeacon(),this.recordingService.clearStates()}onAfterArtificialPageView(){this.Bi(),this.R.isReplayRecorded()&&!this.se.isUrlExcludedForSessionReplay()?(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.recordingService.updateOnlineAssetsOnPageview(),this.pA()):(this.recordingService.resetOnlineAssetsOnPageview(),this.wr())}onBeforeSessionRenewal(){this.recordingService.clearStates(),this.wr()}onOptout(){this.wr(),this.recordingService.onOptOut()}onReplayUnanonymizationConsentGranted(){this.Bi(),this.recordingService.triggerUnanonymizationConsentGranted(),this.S.emitRecordingContextChange()}onReplayUnanonymizationConsentWithdrawn(){this.Bi(),this.recordingService.triggerUnanonymizationConsentWithdrawn(),this.S.emitRecordingContextChange()}onCollectStateChange(t,e){t===V.QUOTA_REACHED||t===V.ANALYTICS_ONLY&&e===$t.ETR_OFF?(this.recordingService.clearEvents(),this.wr()):(this.W.setQueryParams({rt:csArray.prototype.join.call(this.R.getCollectStates(),",")}),this.recordingService.allowSendingEventsFromQuotaService(),this.recordingService.pushEvents(),this.Yn.onCollectStateChange(t,e))}onInitialDomStart(){this.recordingService.blockSendingEventsFromSerialization(),this.Dt.blockSendingLastMessage()}onInitialDomDone(t){this.recordingService.allowSendingEventsFromSerialization(),this.recordingService.addInitialDom(t),this.Dt.allowSendingLastMessage(),this.Fi.start(),this.recordingService.pushEvents(),q.counters.longTasks.count>0&&q.counters.longTasks.flush(),q.counters.tasks.count>0&&q.counters.tasks.flush()}onAfterReplayRecordingConsentGranted(){this.R.isReplayRecorded()&&!this.se.isUrlExcludedForSessionReplay()&&(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Vh(),this.recordingService.triggerRecordingForSessionGranted())}onAfterReplayRecordingConsentWithdrawn(){this.recordingService.isRecording()&&(this.recordingService.triggerRecordingForSessionWithdrawn(),this.recordingService.clearStates(),this.wr())}Lh(){var t,e,i,n;if(!((e=(t=this.f.experimental.sessionReplay)===null||t===void 0?void 0:t.shadowRoot)===null||e===void 0)&&e.filterByHostSelector){let o=(n=(i=this.f.experimental.sessionReplay)===null||i===void 0?void 0:i.shadowRoot)===null||n===void 0?void 0:n.filterByHostSelector;X(o,c=>{It(c)&&ge.setShadowRootFilter(l=>{try{return Gt.call(l.host,c)}catch{return!1}})})}}Vh(){this.recordingService.start(),this.Dt.start(),this.S.emitRecordingContextChange()}wr(){Qp(),this.recordingService.stop(),this.Dt.stop(),this.S.emitRecordingContextChange()}pA(){this.wr(),this.Vh()}uA(t){let e="byteArray";this.W=this.de.create(`${this.f.getRecordingUri()}/${Qa}`,!0,e,t,["rt","v","pid","pn","sn","uu"])}Bi(){var t;let e=this.it.shouldUseAnonymization();this.Wn.setAnonymization(e),(t=this.dA)===null||t===void 0||t.setAnonymization(e)}}return H([Tt("Recording.onStartTracking")],s.prototype,"onStartTracking",null),H([Tt("onInitialDomDone")],s.prototype,"onInitialDomDone",null),s})(),uE=(()=>{class s{constructor(t,e){this.ce=t,this.f=e,this.Ng=!1}enableRecordingContext(t,e,i){this.Ng=!0,this.gr=t,this.R=e,this.Yn=i}getRecordingContext(){var t,e,i;if(!this.Ng)return{isRecording:!1,recordingStartTimestamp:0,etrState:$t.ETR_OFF,etrStatus:Jt.ETR_DISABLED,collectState:V.ANALYTICS_ONLY};let n=this.R.getSession();return{isRecording:this.gr.isRecording(),useAnonymization:this.ce.getSensitiveStatus().useAnonymization,enableOnlineResources:(t=this.gr.getStaticResourceManagerStatus())===null||t===void 0?void 0:t.onlineAssets.activated,enableOnlineResourcesOnNextPageview:(e=this.gr.getStaticResourceManagerStatus())===null||e===void 0?void 0:e.onlineAssets.enabledOnNextPageview,recordingStartTimestamp:parseInt(this.gr.getRecordingStartTimestamp(),10),etrState:this.f.malkaEtrEnabled?$t.ETR_ON:$t.ETR_OFF,etrStatus:this.Yn.getEtrStatus(n),collectState:(i=n==null?void 0:n.collectState)!==null&&i!==void 0?i:V.ANALYTICS_ONLY}}}return s})(),vi=(()=>{class s{static isRecordingSupported(){return"MutationObserver"in window&&"visibilityState"in document}static isAsyncSerializationSupported(){return"Promise"in window&&"findIndex"in csArray.prototype}}return s})(),dE=(()=>{let s;return function(r){r.COMPRESSION_DISABLED="compressionDisabled"}(s||(s={})),s})(),pE=(()=>{class s{constructor(){}static init(t){(!this.Uh||t!==void 0)&&this.initFlags(t)}static initFlags(t=document.cookie){var e;let i=(e=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))===null||e===void 0?void 0:e[1];if(this.Uh=new Map,i){let n=csString.prototype.split.call(i,".");for(let o=0;o<n.length;o++){let[c,l]=csString.prototype.split.call(n[o],"=");this.Uh.set(c,l||"true")}}}static getBoolean(t){let e=this.getString(t);return e!=null&&e!=="false"&&parseInt(e)!==0}static getString(t){var e;return this.init(),(e=this.Uh)===null||e===void 0?void 0:e.get(t)}static isCompressionEnabled(){return!this.getBoolean(dE.COMPRESSION_DISABLED)}static Log(t){return(e,i,n)=>{var o;let c=i.toString(),l=`${(o=e.constructor)===null||o===void 0?void 0:o.name}.${c}`,u=n.value;fE(s.getString("debugLog"),t)&&(n.value=function(...E){return console.log(l,...E),u.bind(this)(...E)})}}}return s})();function fE(s,r){var t;return s==null?!1:s===r||!!(!((t=csString.prototype.match.call(s,new csRegExp("(^|,)("+r+")(,|$)")))===null||t===void 0)&&t.length)}function Za(){function i(a){let d=a.length;for(;--d>=0;)a[d]=0}let n=0,o=1,c=2,l=3,u=258,E=29,p=256,y=p+1+E,m=30,S=19,I=2*y+1,P=15,v=16,_=7,D=256,O=16,A=17,j=18,it=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),dt=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Wt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),kt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),w=512,k=new Array((y+2)*2);i(k);let U=new Array(m*2);i(U);let F=new Array(w);i(F);let lt=new Array(u-l+1);i(lt);let Dt=new Array(E);i(Dt);let Ht=new Array(m);i(Ht);function Me(a,d,f,g,h){this.static_tree=a,this.extra_bits=d,this.extra_base=f,this.elems=g,this.max_length=h,this.has_stree=a&&a.length}let bs,Lt,Bt;function te(a,d){this.dyn_tree=a,this.max_code=0,this.stat_desc=d}let As=a=>a<256?F[a]:F[256+(a>>>7)],me=(a,d)=>{a.pending_buf[a.pending++]=d&255,a.pending_buf[a.pending++]=d>>>8&255},Ot=(a,d,f)=>{a.bi_valid>v-f?(a.bi_buf|=d<<a.bi_valid&65535,me(a,a.bi_buf),a.bi_buf=d>>v-a.bi_valid,a.bi_valid+=f-v):(a.bi_buf|=d<<a.bi_valid&65535,a.bi_valid+=f)},Yt=(a,d,f)=>{Ot(a,f[d*2],f[d*2+1])},Rs=(a,d)=>{let f=0;do f|=a&1,a>>>=1,f<<=1;while(--d>0);return f>>>1},Pr=a=>{a.bi_valid===16?(me(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)},Js=(a,d)=>{let f=d.dyn_tree,g=d.max_code,h=d.stat_desc.static_tree,b=d.stat_desc.has_stree,T=d.stat_desc.extra_bits,C=d.stat_desc.extra_base,Q=d.stat_desc.max_length,$,Ft,Be,ot,hs,Os,Fi=0;for(ot=0;ot<=P;ot++)a.bl_count[ot]=0;for(f[a.heap[a.heap_max]*2+1]=0,$=a.heap_max+1;$<I;$++)Ft=a.heap[$],ot=f[f[Ft*2+1]*2+1]+1,ot>Q&&(ot=Q,Fi++),f[Ft*2+1]=ot,!(Ft>g)&&(a.bl_count[ot]++,hs=0,Ft>=C&&(hs=T[Ft-C]),Os=f[Ft*2],a.opt_len+=Os*(ot+hs),b&&(a.static_len+=Os*(h[Ft*2+1]+hs)));if(Fi!==0){do{for(ot=Q-1;a.bl_count[ot]===0;)ot--;a.bl_count[ot]--,a.bl_count[ot+1]+=2,a.bl_count[Q]--,Fi-=2}while(Fi>0);for(ot=Q;ot!==0;ot--)for(Ft=a.bl_count[ot];Ft!==0;)Be=a.heap[--$],!(Be>g)&&(f[Be*2+1]!==ot&&(a.opt_len+=(ot-f[Be*2+1])*f[Be*2],f[Be*2+1]=ot),Ft--)}},Cs=(a,d,f)=>{let g=new Array(P+1),h=0,b,T;for(b=1;b<=P;b++)g[b]=h=h+f[b-1]<<1;for(T=0;T<=d;T++){let C=a[T*2+1];C!==0&&(a[T*2]=Rs(g[C]++,C))}},Or=()=>{let a,d,f,g,h,b=new Array(P+1);for(f=0,g=0;g<E-1;g++)for(Dt[g]=f,a=0;a<1<<it[g];a++)lt[f++]=g;for(lt[f-1]=g,h=0,g=0;g<16;g++)for(Ht[g]=h,a=0;a<1<<dt[g];a++)F[h++]=g;for(h>>=7;g<m;g++)for(Ht[g]=h<<7,a=0;a<1<<dt[g]-7;a++)F[256+h++]=g;for(d=0;d<=P;d++)b[d]=0;for(a=0;a<=143;)k[a*2+1]=8,a++,b[8]++;for(;a<=255;)k[a*2+1]=9,a++,b[9]++;for(;a<=279;)k[a*2+1]=7,a++,b[7]++;for(;a<=287;)k[a*2+1]=8,a++,b[8]++;for(Cs(k,y+1,b),a=0;a<m;a++)U[a*2+1]=5,U[a*2]=Rs(a,5);bs=new Me(k,it,p+1,y,P),Lt=new Me(U,dt,0,m,P),Bt=new Me(new Array(0),Wt,0,S,_)},Co=a=>{let d;for(d=0;d<y;d++)a.dyn_ltree[d*2]=0;for(d=0;d<m;d++)a.dyn_dtree[d*2]=0;for(d=0;d<S;d++)a.bl_tree[d*2]=0;a.dyn_ltree[D*2]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0},Io=a=>{a.bi_valid>8?me(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0},Xl=(a,d,f,g)=>{Io(a),g&&(me(a,f),me(a,~f)),a.pending_buf.set(a.window.subarray(d,d+f),a.pending),a.pending+=f},Po=(a,d,f,g)=>{let h=d*2,b=f*2;return a[h]<a[b]||a[h]===a[b]&&g[d]<=g[f]},Nr=(a,d,f)=>{let g=a.heap[f],h=f<<1;for(;h<=a.heap_len&&(h<a.heap_len&&Po(d,a.heap[h+1],a.heap[h],a.depth)&&h++,!Po(d,g,a.heap[h],a.depth));)a.heap[f]=a.heap[h],f=h,h<<=1;a.heap[f]=g},Oo=(a,d,f)=>{let g,h,b=0,T,C;if(a.last_lit!==0)do g=a.pending_buf[a.d_buf+b*2]<<8|a.pending_buf[a.d_buf+b*2+1],h=a.pending_buf[a.l_buf+b],b++,g===0?Yt(a,h,d):(T=lt[h],Yt(a,T+p+1,d),C=it[T],C!==0&&(h-=Dt[T],Ot(a,h,C)),g--,T=As(g),Yt(a,T,f),C=dt[T],C!==0&&(g-=Ht[T],Ot(a,g,C)));while(b<a.last_lit);Yt(a,D,d)},Mr=(a,d)=>{let f=d.dyn_tree,g=d.stat_desc.static_tree,h=d.stat_desc.has_stree,b=d.stat_desc.elems,T,C,Q=-1,$;for(a.heap_len=0,a.heap_max=I,T=0;T<b;T++)f[T*2]!==0?(a.heap[++a.heap_len]=Q=T,a.depth[T]=0):f[T*2+1]=0;for(;a.heap_len<2;)$=a.heap[++a.heap_len]=Q<2?++Q:0,f[$*2]=1,a.depth[$]=0,a.opt_len--,h&&(a.static_len-=g[$*2+1]);for(d.max_code=Q,T=a.heap_len>>1;T>=1;T--)Nr(a,f,T);$=b;do T=a.heap[1],a.heap[1]=a.heap[a.heap_len--],Nr(a,f,1),C=a.heap[1],a.heap[--a.heap_max]=T,a.heap[--a.heap_max]=C,f[$*2]=f[T*2]+f[C*2],a.depth[$]=(a.depth[T]>=a.depth[C]?a.depth[T]:a.depth[C])+1,f[T*2+1]=f[C*2+1]=$,a.heap[1]=$++,Nr(a,f,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],Js(a,d),Cs(f,Q,a.bl_count)},No=(a,d,f)=>{let g,h=-1,b,T=d[0*2+1],C=0,Q=7,$=4;for(T===0&&(Q=138,$=3),d[(f+1)*2+1]=65535,g=0;g<=f;g++)b=T,T=d[(g+1)*2+1],!(++C<Q&&b===T)&&(C<$?a.bl_tree[b*2]+=C:b!==0?(b!==h&&a.bl_tree[b*2]++,a.bl_tree[O*2]++):C<=10?a.bl_tree[A*2]++:a.bl_tree[j*2]++,C=0,h=b,T===0?(Q=138,$=3):b===T?(Q=6,$=3):(Q=7,$=4))},Mo=(a,d,f)=>{let g,h=-1,b,T=d[0*2+1],C=0,Q=7,$=4;for(T===0&&(Q=138,$=3),g=0;g<=f;g++)if(b=T,T=d[(g+1)*2+1],!(++C<Q&&b===T)){if(C<$)do Yt(a,b,a.bl_tree);while(--C!==0);else b!==0?(b!==h&&(Yt(a,b,a.bl_tree),C--),Yt(a,O,a.bl_tree),Ot(a,C-3,2)):C<=10?(Yt(a,A,a.bl_tree),Ot(a,C-3,3)):(Yt(a,j,a.bl_tree),Ot(a,C-11,7));C=0,h=b,T===0?(Q=138,$=3):b===T?(Q=6,$=3):(Q=7,$=4)}},Kl=a=>{let d;for(No(a,a.dyn_ltree,a.l_desc.max_code),No(a,a.dyn_dtree,a.d_desc.max_code),Mr(a,a.bl_desc),d=S-1;d>=3&&a.bl_tree[kt[d]*2+1]===0;d--);return a.opt_len+=3*(d+1)+5+5+4,d},Jl=(a,d,f,g)=>{let h;for(Ot(a,d-257,5),Ot(a,f-1,5),Ot(a,g-4,4),h=0;h<g;h++)Ot(a,a.bl_tree[kt[h]*2+1],3);Mo(a,a.dyn_ltree,d-1),Mo(a,a.dyn_dtree,f-1)},Ql=a=>{let d=4093624447,f;for(f=0;f<=31;f++,d>>>=1)if(d&1&&a.dyn_ltree[f*2]!==0)return 0;if(a.dyn_ltree[9*2]!==0||a.dyn_ltree[10*2]!==0||a.dyn_ltree[13*2]!==0)return 1;for(f=32;f<p;f++)if(a.dyn_ltree[f*2]!==0)return 1;return 0},ko=!1,Zl=a=>{ko||(Or(),ko=!0),a.l_desc=new te(a.dyn_ltree,bs),a.d_desc=new te(a.dyn_dtree,Lt),a.bl_desc=new te(a.bl_tree,Bt),a.bi_buf=0,a.bi_valid=0,Co(a)},Do=(a,d,f,g)=>{Ot(a,(n<<1)+(g?1:0),3),Xl(a,d,f,!0)},th=a=>{Ot(a,o<<1,3),Yt(a,D,k),Pr(a)},eh=(a,d,f,g)=>{let h,b,T=0;a.level>0?(a.strm.data_type===2&&(a.strm.data_type=Ql(a)),Mr(a,a.l_desc),Mr(a,a.d_desc),T=Kl(a),h=a.opt_len+3+7>>>3,b=a.static_len+3+7>>>3,b<=h&&(h=b)):h=b=f+5,f+4<=h&&d!==-1?Do(a,d,f,g):a.strategy===4||b===h?(Ot(a,(o<<1)+(g?1:0),3),Oo(a,k,U)):(Ot(a,(c<<1)+(g?1:0),3),Jl(a,a.l_desc.max_code+1,a.d_desc.max_code+1,T+1),Oo(a,a.dyn_ltree,a.dyn_dtree)),Co(a),g&&Io(a)},sh=(a,d,f)=>(a.pending_buf[a.d_buf+a.last_lit*2]=d>>>8&255,a.pending_buf[a.d_buf+a.last_lit*2+1]=d&255,a.pending_buf[a.l_buf+a.last_lit]=f&255,a.last_lit++,d===0?a.dyn_ltree[f*2]++:(a.matches++,d--,a.dyn_ltree[(lt[f]+p+1)*2]++,a.dyn_dtree[As(d)*2]++),a.last_lit===a.lit_bufsize-1);var ih=Zl,rh=Do,nh=eh,oh=sh,ah=th,ch={_tr_init:ih,_tr_stored_block:rh,_tr_flush_block:nh,_tr_tally:oh,_tr_align:ah},xo=(a,d,f,g)=>{let h=a&65535|0,b=a>>>16&65535|0,T=0;for(;f!==0;){T=f>2e3?2e3:f,f-=T;do h=h+d[g++]|0,b=b+h|0;while(--T);h%=65521,b%=65521}return h|b<<16|0};let lh=()=>{let a,d=[];for(var f=0;f<256;f++){a=f;for(var g=0;g<8;g++)a=a&1?3988292384^a>>>1:a>>>1;d[f]=a}return d},hh=new Uint32Array(lh());var ke=(a,d,f,g)=>{let h=hh,b=g+f;a^=-1;for(let T=g;T<b;T++)a=a>>>8^h[(a^d[T])&255];return a^-1},ki={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Lo={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:uh,_tr_stored_block:dh,_tr_flush_block:ph,_tr_tally:De,_tr_align:fh}=ch,{Z_NO_FLUSH:os,Z_PARTIAL_FLUSH:gh,Z_FULL_FLUSH:mh,Z_FINISH:xe,Z_BLOCK:Vo,Z_OK:ne,Z_STREAM_END:Uo,Z_STREAM_ERROR:Xt,Z_DATA_ERROR:yh,Z_BUF_ERROR:kr,Z_DEFAULT_COMPRESSION:Eh,Z_FILTERED:Sh,Z_HUFFMAN_ONLY:Di,Z_RLE:vh,Z_FIXED:_h,Z_DEFAULT_STRATEGY:wh,Z_UNKNOWN:Th,Z_DEFLATED:xi}=Lo,bh=9,Ah=15,Rh=8,Dr=256+1+29,Ch=30,Ih=19,Ph=2*Dr+1,Oh=15,J=3,Le=258,ee=Le+J+1,Nh=32,Li=42,xr=69,Vi=73,Ui=91,ji=103,as=113,Qs=666,vt=1,Zs=2,cs=3,Is=4,Mh=3,Ve=(a,d)=>(a.msg=ki[d],d),jo=a=>(a<<1)-(a>4?9:0),Ue=a=>{let d=a.length;for(;--d>=0;)a[d]=0},je=(a,d,f)=>(d<<a.hash_shift^f)&a.hash_mask,He=a=>{let d=a.state,f=d.pending;f>a.avail_out&&(f=a.avail_out),f!==0&&(a.output.set(d.pending_buf.subarray(d.pending_out,d.pending_out+f),a.next_out),a.next_out+=f,d.pending_out+=f,a.total_out+=f,a.avail_out-=f,d.pending-=f,d.pending===0&&(d.pending_out=0))},bt=(a,d)=>{ph(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,d),a.block_start=a.strstart,He(a.strm)},st=(a,d)=>{a.pending_buf[a.pending++]=d},ti=(a,d)=>{a.pending_buf[a.pending++]=d>>>8&255,a.pending_buf[a.pending++]=d&255},kh=(a,d,f,g)=>{let h=a.avail_in;return h>g&&(h=g),h===0?0:(a.avail_in-=h,d.set(a.input.subarray(a.next_in,a.next_in+h),f),a.state.wrap===1?a.adler=xo(a.adler,d,h,f):a.state.wrap===2&&(a.adler=ke(a.adler,d,h,f)),a.next_in+=h,a.total_in+=h,h)},Ho=(a,d)=>{let f=a.max_chain_length,g=a.strstart,h,b,T=a.prev_length,C=a.nice_match,Q=a.strstart>a.w_size-ee?a.strstart-(a.w_size-ee):0,$=a.window,Ft=a.w_mask,Be=a.prev,ot=a.strstart+Le,hs=$[g+T-1],Os=$[g+T];a.prev_length>=a.good_match&&(f>>=2),C>a.lookahead&&(C=a.lookahead);do if(h=d,!($[h+T]!==Os||$[h+T-1]!==hs||$[h]!==$[g]||$[++h]!==$[g+1])){g+=2,h++;do;while($[++g]===$[++h]&&$[++g]===$[++h]&&$[++g]===$[++h]&&$[++g]===$[++h]&&$[++g]===$[++h]&&$[++g]===$[++h]&&$[++g]===$[++h]&&$[++g]===$[++h]&&g<ot);if(b=Le-(ot-g),g=ot-Le,b>T){if(a.match_start=d,T=b,b>=C)break;hs=$[g+T-1],Os=$[g+T]}}while((d=Be[d&Ft])>Q&&--f!==0);return T<=a.lookahead?T:a.lookahead},ls=a=>{let d=a.w_size,f,g,h,b,T;do{if(b=a.window_size-a.lookahead-a.strstart,a.strstart>=d+(d-ee)){a.window.set(a.window.subarray(d,d+d),0),a.match_start-=d,a.strstart-=d,a.block_start-=d,g=a.hash_size,f=g;do h=a.head[--f],a.head[f]=h>=d?h-d:0;while(--g);g=d,f=g;do h=a.prev[--f],a.prev[f]=h>=d?h-d:0;while(--g);b+=d}if(a.strm.avail_in===0)break;if(g=kh(a.strm,a.window,a.strstart+a.lookahead,b),a.lookahead+=g,a.lookahead+a.insert>=J)for(T=a.strstart-a.insert,a.ins_h=a.window[T],a.ins_h=je(a,a.ins_h,a.window[T+1]);a.insert&&(a.ins_h=je(a,a.ins_h,a.window[T+J-1]),a.prev[T&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=T,T++,a.insert--,!(a.lookahead+a.insert<J)););}while(a.lookahead<ee&&a.strm.avail_in!==0)},Dh=(a,d)=>{let f=65535;for(f>a.pending_buf_size-5&&(f=a.pending_buf_size-5);;){if(a.lookahead<=1){if(ls(a),a.lookahead===0&&d===os)return vt;if(a.lookahead===0)break}a.strstart+=a.lookahead,a.lookahead=0;let g=a.block_start+f;if((a.strstart===0||a.strstart>=g)&&(a.lookahead=a.strstart-g,a.strstart=g,bt(a,!1),a.strm.avail_out===0)||a.strstart-a.block_start>=a.w_size-ee&&(bt(a,!1),a.strm.avail_out===0))return vt}return a.insert=0,d===xe?(bt(a,!0),a.strm.avail_out===0?cs:Is):(a.strstart>a.block_start&&(bt(a,!1),a.strm.avail_out===0),vt)},Lr=(a,d)=>{let f,g;for(;;){if(a.lookahead<ee){if(ls(a),a.lookahead<ee&&d===os)return vt;if(a.lookahead===0)break}if(f=0,a.lookahead>=J&&(a.ins_h=je(a,a.ins_h,a.window[a.strstart+J-1]),f=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),f!==0&&a.strstart-f<=a.w_size-ee&&(a.match_length=Ho(a,f)),a.match_length>=J)if(g=De(a,a.strstart-a.match_start,a.match_length-J),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=J){a.match_length--;do a.strstart++,a.ins_h=je(a,a.ins_h,a.window[a.strstart+J-1]),f=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(--a.match_length!==0);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=je(a,a.ins_h,a.window[a.strstart+1]);else g=De(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(g&&(bt(a,!1),a.strm.avail_out===0))return vt}return a.insert=a.strstart<J-1?a.strstart:J-1,d===xe?(bt(a,!0),a.strm.avail_out===0?cs:Is):a.last_lit&&(bt(a,!1),a.strm.avail_out===0)?vt:Zs},Ps=(a,d)=>{let f,g,h;for(;;){if(a.lookahead<ee){if(ls(a),a.lookahead<ee&&d===os)return vt;if(a.lookahead===0)break}if(f=0,a.lookahead>=J&&(a.ins_h=je(a,a.ins_h,a.window[a.strstart+J-1]),f=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=J-1,f!==0&&a.prev_length<a.max_lazy_match&&a.strstart-f<=a.w_size-ee&&(a.match_length=Ho(a,f),a.match_length<=5&&(a.strategy===Sh||a.match_length===J&&a.strstart-a.match_start>4096)&&(a.match_length=J-1)),a.prev_length>=J&&a.match_length<=a.prev_length){h=a.strstart+a.lookahead-J,g=De(a,a.strstart-1-a.prev_match,a.prev_length-J),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=h&&(a.ins_h=je(a,a.ins_h,a.window[a.strstart+J-1]),f=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(--a.prev_length!==0);if(a.match_available=0,a.match_length=J-1,a.strstart++,g&&(bt(a,!1),a.strm.avail_out===0))return vt}else if(a.match_available){if(g=De(a,0,a.window[a.strstart-1]),g&&bt(a,!1),a.strstart++,a.lookahead--,a.strm.avail_out===0)return vt}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(g=De(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<J-1?a.strstart:J-1,d===xe?(bt(a,!0),a.strm.avail_out===0?cs:Is):a.last_lit&&(bt(a,!1),a.strm.avail_out===0)?vt:Zs},xh=(a,d)=>{let f,g,h,b,T=a.window;for(;;){if(a.lookahead<=Le){if(ls(a),a.lookahead<=Le&&d===os)return vt;if(a.lookahead===0)break}if(a.match_length=0,a.lookahead>=J&&a.strstart>0&&(h=a.strstart-1,g=T[h],g===T[++h]&&g===T[++h]&&g===T[++h])){b=a.strstart+Le;do;while(g===T[++h]&&g===T[++h]&&g===T[++h]&&g===T[++h]&&g===T[++h]&&g===T[++h]&&g===T[++h]&&g===T[++h]&&h<b);a.match_length=Le-(b-h),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=J?(f=De(a,1,a.match_length-J),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(f=De(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),f&&(bt(a,!1),a.strm.avail_out===0))return vt}return a.insert=0,d===xe?(bt(a,!0),a.strm.avail_out===0?cs:Is):a.last_lit&&(bt(a,!1),a.strm.avail_out===0)?vt:Zs},Lh=(a,d)=>{let f;for(;;){if(a.lookahead===0&&(ls(a),a.lookahead===0)){if(d===os)return vt;break}if(a.match_length=0,f=De(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,f&&(bt(a,!1),a.strm.avail_out===0))return vt}return a.insert=0,d===xe?(bt(a,!0),a.strm.avail_out===0?cs:Is):a.last_lit&&(bt(a,!1),a.strm.avail_out===0)?vt:Zs};function oe(a,d,f,g,h){this.good_length=a,this.max_lazy=d,this.nice_length=f,this.max_chain=g,this.func=h}let ei=[new oe(0,0,0,0,Dh),new oe(4,4,8,4,Lr),new oe(4,5,16,8,Lr),new oe(4,6,32,32,Lr),new oe(4,4,16,16,Ps),new oe(8,16,32,32,Ps),new oe(8,16,128,128,Ps),new oe(8,32,128,256,Ps),new oe(32,128,258,1024,Ps),new oe(32,258,258,4096,Ps)],Vh=a=>{a.window_size=2*a.w_size,Ue(a.head),a.max_lazy_match=ei[a.level].max_lazy,a.good_match=ei[a.level].good_length,a.nice_match=ei[a.level].nice_length,a.max_chain_length=ei[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=J-1,a.match_available=0,a.ins_h=0};function Uh(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=xi,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Ph*2),this.dyn_dtree=new Uint16Array((2*Ch+1)*2),this.bl_tree=new Uint16Array((2*Ih+1)*2),Ue(this.dyn_ltree),Ue(this.dyn_dtree),Ue(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Oh+1),this.heap=new Uint16Array(2*Dr+1),Ue(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Dr+1),Ue(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let Bo=a=>{if(!a||!a.state)return Ve(a,Xt);a.total_in=a.total_out=0,a.data_type=Th;let d=a.state;return d.pending=0,d.pending_out=0,d.wrap<0&&(d.wrap=-d.wrap),d.status=d.wrap?Li:as,a.adler=d.wrap===2?0:1,d.last_flush=os,uh(d),ne},Fo=a=>{let d=Bo(a);return d===ne&&Vh(a.state),d},jh=(a,d)=>!a||!a.state||a.state.wrap!==2?Xt:(a.state.gzhead=d,ne),$o=(a,d,f,g,h,b)=>{if(!a)return Xt;let T=1;if(d===Eh&&(d=6),g<0?(T=0,g=-g):g>15&&(T=2,g-=16),h<1||h>bh||f!==xi||g<8||g>15||d<0||d>9||b<0||b>_h)return Ve(a,Xt);g===8&&(g=9);let C=new Uh;return a.state=C,C.strm=a,C.wrap=T,C.gzhead=null,C.w_bits=g,C.w_size=1<<C.w_bits,C.w_mask=C.w_size-1,C.hash_bits=h+7,C.hash_size=1<<C.hash_bits,C.hash_mask=C.hash_size-1,C.hash_shift=~~((C.hash_bits+J-1)/J),C.window=new Uint8Array(C.w_size*2),C.head=new Uint16Array(C.hash_size),C.prev=new Uint16Array(C.w_size),C.lit_bufsize=1<<h+6,C.pending_buf_size=C.lit_bufsize*4,C.pending_buf=new Uint8Array(C.pending_buf_size),C.d_buf=1*C.lit_bufsize,C.l_buf=3*C.lit_bufsize,C.level=d,C.strategy=b,C.method=f,Fo(a)},Hh=(a,d)=>$o(a,d,xi,Ah,Rh,wh),Bh=(a,d)=>{let f,g;if(!a||!a.state||d>Vo||d<0)return a?Ve(a,Xt):Xt;let h=a.state;if(!a.output||!a.input&&a.avail_in!==0||h.status===Qs&&d!==xe)return Ve(a,a.avail_out===0?kr:Xt);h.strm=a;let b=h.last_flush;if(h.last_flush=d,h.status===Li)if(h.wrap===2)a.adler=0,st(h,31),st(h,139),st(h,8),h.gzhead?(st(h,(h.gzhead.text?1:0)+(h.gzhead.hcrc?2:0)+(h.gzhead.extra?4:0)+(h.gzhead.name?8:0)+(h.gzhead.comment?16:0)),st(h,h.gzhead.time&255),st(h,h.gzhead.time>>8&255),st(h,h.gzhead.time>>16&255),st(h,h.gzhead.time>>24&255),st(h,h.level===9?2:h.strategy>=Di||h.level<2?4:0),st(h,h.gzhead.os&255),h.gzhead.extra&&h.gzhead.extra.length&&(st(h,h.gzhead.extra.length&255),st(h,h.gzhead.extra.length>>8&255)),h.gzhead.hcrc&&(a.adler=ke(a.adler,h.pending_buf,h.pending,0)),h.gzindex=0,h.status=xr):(st(h,0),st(h,0),st(h,0),st(h,0),st(h,0),st(h,h.level===9?2:h.strategy>=Di||h.level<2?4:0),st(h,Mh),h.status=as);else{let T=xi+(h.w_bits-8<<4)<<8,C=-1;h.strategy>=Di||h.level<2?C=0:h.level<6?C=1:h.level===6?C=2:C=3,T|=C<<6,h.strstart!==0&&(T|=Nh),T+=31-T%31,h.status=as,ti(h,T),h.strstart!==0&&(ti(h,a.adler>>>16),ti(h,a.adler&65535)),a.adler=1}if(h.status===xr)if(h.gzhead.extra){for(f=h.pending;h.gzindex<(h.gzhead.extra.length&65535)&&!(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>f&&(a.adler=ke(a.adler,h.pending_buf,h.pending-f,f)),He(a),f=h.pending,h.pending===h.pending_buf_size));)st(h,h.gzhead.extra[h.gzindex]&255),h.gzindex++;h.gzhead.hcrc&&h.pending>f&&(a.adler=ke(a.adler,h.pending_buf,h.pending-f,f)),h.gzindex===h.gzhead.extra.length&&(h.gzindex=0,h.status=Vi)}else h.status=Vi;if(h.status===Vi)if(h.gzhead.name){f=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>f&&(a.adler=ke(a.adler,h.pending_buf,h.pending-f,f)),He(a),f=h.pending,h.pending===h.pending_buf_size)){g=1;break}h.gzindex<h.gzhead.name.length?g=h.gzhead.name.charCodeAt(h.gzindex++)&255:g=0,st(h,g)}while(g!==0);h.gzhead.hcrc&&h.pending>f&&(a.adler=ke(a.adler,h.pending_buf,h.pending-f,f)),g===0&&(h.gzindex=0,h.status=Ui)}else h.status=Ui;if(h.status===Ui)if(h.gzhead.comment){f=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>f&&(a.adler=ke(a.adler,h.pending_buf,h.pending-f,f)),He(a),f=h.pending,h.pending===h.pending_buf_size)){g=1;break}h.gzindex<h.gzhead.comment.length?g=h.gzhead.comment.charCodeAt(h.gzindex++)&255:g=0,st(h,g)}while(g!==0);h.gzhead.hcrc&&h.pending>f&&(a.adler=ke(a.adler,h.pending_buf,h.pending-f,f)),g===0&&(h.status=ji)}else h.status=ji;if(h.status===ji&&(h.gzhead.hcrc?(h.pending+2>h.pending_buf_size&&He(a),h.pending+2<=h.pending_buf_size&&(st(h,a.adler&255),st(h,a.adler>>8&255),a.adler=0,h.status=as)):h.status=as),h.pending!==0){if(He(a),a.avail_out===0)return h.last_flush=-1,ne}else if(a.avail_in===0&&jo(d)<=jo(b)&&d!==xe)return Ve(a,kr);if(h.status===Qs&&a.avail_in!==0)return Ve(a,kr);if(a.avail_in!==0||h.lookahead!==0||d!==os&&h.status!==Qs){let T=h.strategy===Di?Lh(h,d):h.strategy===vh?xh(h,d):ei[h.level].func(h,d);if((T===cs||T===Is)&&(h.status=Qs),T===vt||T===cs)return a.avail_out===0&&(h.last_flush=-1),ne;if(T===Zs&&(d===gh?fh(h):d!==Vo&&(dh(h,0,0,!1),d===mh&&(Ue(h.head),h.lookahead===0&&(h.strstart=0,h.block_start=0,h.insert=0))),He(a),a.avail_out===0))return h.last_flush=-1,ne}return d!==xe?ne:h.wrap<=0?Uo:(h.wrap===2?(st(h,a.adler&255),st(h,a.adler>>8&255),st(h,a.adler>>16&255),st(h,a.adler>>24&255),st(h,a.total_in&255),st(h,a.total_in>>8&255),st(h,a.total_in>>16&255),st(h,a.total_in>>24&255)):(ti(h,a.adler>>>16),ti(h,a.adler&65535)),He(a),h.wrap>0&&(h.wrap=-h.wrap),h.pending!==0?ne:Uo)},Fh=a=>{if(!a||!a.state)return Xt;let d=a.state.status;return d!==Li&&d!==xr&&d!==Vi&&d!==Ui&&d!==ji&&d!==as&&d!==Qs?Ve(a,Xt):(a.state=null,d===as?Ve(a,yh):ne)},$h=(a,d)=>{let f=d.length;if(!a||!a.state)return Xt;let g=a.state,h=g.wrap;if(h===2||h===1&&g.status!==Li||g.lookahead)return Xt;if(h===1&&(a.adler=xo(a.adler,d,f,0)),g.wrap=0,f>=g.w_size){h===0&&(Ue(g.head),g.strstart=0,g.block_start=0,g.insert=0);let Q=new Uint8Array(g.w_size);Q.set(d.subarray(f-g.w_size,f),0),d=Q,f=g.w_size}let b=a.avail_in,T=a.next_in,C=a.input;for(a.avail_in=f,a.next_in=0,a.input=d,ls(g);g.lookahead>=J;){let Q=g.strstart,$=g.lookahead-(J-1);do g.ins_h=je(g,g.ins_h,g.window[Q+J-1]),g.prev[Q&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=Q,Q++;while(--$);g.strstart=Q,g.lookahead=J-1,ls(g)}return g.strstart+=g.lookahead,g.block_start=g.strstart,g.insert=g.lookahead,g.lookahead=0,g.match_length=g.prev_length=J-1,g.match_available=0,a.next_in=T,a.input=C,a.avail_in=b,g.wrap=h,ne};var zh=Hh,Gh=$o,qh=Fo,Wh=Bo,Yh=jh,Xh=Bh,Kh=Fh,Jh=$h,Qh="pako deflate (from Nodeca project)",si={deflateInit:zh,deflateInit2:Gh,deflateReset:qh,deflateResetKeep:Wh,deflateSetHeader:Yh,deflate:Xh,deflateEnd:Kh,deflateSetDictionary:Jh,deflateInfo:Qh};let Zh=(a,d)=>Object.prototype.hasOwnProperty.call(a,d);var tu=function(a){let d=Array.prototype.slice.call(arguments,1);for(;d.length;){let f=d.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(let g in f)Zh(f,g)&&(a[g]=f[g])}}return a},eu=a=>{let d=0;for(let g=0,h=a.length;g<h;g++)d+=a[g].length;let f=new Uint8Array(d);for(let g=0,h=0,b=a.length;g<b;g++){let T=a[g];f.set(T,h),h+=T.length}return f},zo={assign:tu,flattenChunks:eu};let Go=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Go=!1}let ii=new Uint8Array(256);for(let a=0;a<256;a++)ii[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;ii[254]=ii[254]=1;var su=a=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(a);let d,f,g,h,b,T=a.length,C=0;for(h=0;h<T;h++)f=a.charCodeAt(h),(f&64512)===55296&&h+1<T&&(g=a.charCodeAt(h+1),(g&64512)===56320&&(f=65536+(f-55296<<10)+(g-56320),h++)),C+=f<128?1:f<2048?2:f<65536?3:4;for(d=new Uint8Array(C),b=0,h=0;b<C;h++)f=a.charCodeAt(h),(f&64512)===55296&&h+1<T&&(g=a.charCodeAt(h+1),(g&64512)===56320&&(f=65536+(f-55296<<10)+(g-56320),h++)),f<128?d[b++]=f:f<2048?(d[b++]=192|f>>>6,d[b++]=128|f&63):f<65536?(d[b++]=224|f>>>12,d[b++]=128|f>>>6&63,d[b++]=128|f&63):(d[b++]=240|f>>>18,d[b++]=128|f>>>12&63,d[b++]=128|f>>>6&63,d[b++]=128|f&63);return d};let qo=(a,d=a.length)=>{if(d<65534&&a.subarray&&Go)return String.fromCharCode.apply(null,a.length===d?a:a.subarray(0,d));let f="";for(let g=0;g<d;g++)f+=String.fromCharCode(a[g]);return f};var iu=(a,d)=>{let f=d||a.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(a.subarray(0,d));let g,h,b=new Array(f*2);for(h=0,g=0;g<f;){let T=a[g++];if(T<128){b[h++]=T;continue}let C=ii[T];if(C>4){b[h++]=65533,g+=C-1;continue}for(T&=C===2?31:C===3?15:7;C>1&&g<f;)T=T<<6|a[g++]&63,C--;if(C>1){b[h++]=65533;continue}T<65536?b[h++]=T:(T-=65536,b[h++]=55296|T>>10&1023,b[h++]=56320|T&1023)}return qo(b,h)},ru=(a,d)=>{d=d||a.length,d>a.length&&(d=a.length);let f=d-1;for(;f>=0&&(a[f]&192)===128;)f--;return f<0||f===0?d:f+ii[a[f]]>d?f:d},Wo={string2buf:su,buf2string:iu,utf8border:ru};function nu(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var ou=nu;let Yo=Object.prototype.toString,{Z_NO_FLUSH:au,Z_SYNC_FLUSH:cu,Z_FULL_FLUSH:lu,Z_FINISH:hu,Z_OK:Hi,Z_STREAM_END:uu,Z_DEFAULT_COMPRESSION:du,Z_DEFAULT_STRATEGY:pu,Z_DEFLATED:fu}=Lo;function Bi(a){this.options=zo.assign({level:du,method:fu,chunkSize:16384,windowBits:15,memLevel:8,strategy:pu},a||{});let d=this.options;d.raw&&d.windowBits>0?d.windowBits=-d.windowBits:d.gzip&&d.windowBits>0&&d.windowBits<16&&(d.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ou,this.strm.avail_out=0;let f=si.deflateInit2(this.strm,d.level,d.method,d.windowBits,d.memLevel,d.strategy);if(f!==Hi)throw new Error(ki[f]);if(d.header&&si.deflateSetHeader(this.strm,d.header),d.dictionary){let g;if(typeof d.dictionary=="string"?g=Wo.string2buf(d.dictionary):Yo.call(d.dictionary)==="[object ArrayBuffer]"?g=new Uint8Array(d.dictionary):g=d.dictionary,f=si.deflateSetDictionary(this.strm,g),f!==Hi)throw new Error(ki[f]);this._dict_set=!0}}Bi.prototype.push=function(a,d){let f=this.strm,g=this.options.chunkSize,h,b;if(this.ended)return!1;for(d===~~d?b=d:b=d===!0?hu:au,typeof a=="string"?f.input=Wo.string2buf(a):Yo.call(a)==="[object ArrayBuffer]"?f.input=new Uint8Array(a):f.input=a,f.next_in=0,f.avail_in=f.input.length;;){if(f.avail_out===0&&(f.output=new Uint8Array(g),f.next_out=0,f.avail_out=g),(b===cu||b===lu)&&f.avail_out<=6){this.onData(f.output.subarray(0,f.next_out)),f.avail_out=0;continue}if(h=si.deflate(f,b),h===uu)return f.next_out>0&&this.onData(f.output.subarray(0,f.next_out)),h=si.deflateEnd(this.strm),this.onEnd(h),this.ended=!0,h===Hi;if(f.avail_out===0){this.onData(f.output);continue}if(b>0&&f.next_out>0){this.onData(f.output.subarray(0,f.next_out)),f.avail_out=0;continue}if(f.avail_in===0)break}return!0},Bi.prototype.onData=function(a){this.chunks.push(a)},Bi.prototype.onEnd=function(a){a===Hi&&(this.result=zo.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function gu(a,d){d=d||{};let f=new Bi(d);if(f.push(a,!0),f.err)throw f.msg||ki[f.err];return f.result}function mu(a,d){return d=d||{},d.gzip=!0,gu(a,d)}return(a,d,f)=>{let g=mu(a);return d==="base64"?g=btoa(qo(g)):g=g.buffer,f&&f(g),g}}var gE=(()=>{class s extends $c{constructor(t){super(t),this.algorithm=wr.GZIP,this.Mg=Za(),this.fA=(i,n,o)=>{let c=this.Mg(i,n);o(c)},this.compress=tc(),typeof CompressionStream!="undefined"&&tE||(this.compress=this.fA,this.getCompressorSourceCode=()=>Za.toString())}compressSync(t,e){return this.Mg(t,e)}getCompressorSourceCode(){return tc.toString()}}return s})();function tc(){let s=r=>new Promise(t=>{let e=new FileReader;e.onload=i=>t(i.target.result.split(",")[1]),e.readAsDataURL(new Blob([r]))});return(r,t,e)=>{let i=new Response(r).body.pipeThrough(new CompressionStream("gzip")),n=new Response(i).arrayBuffer();if(t==="base64"){n.then(o=>s(o)).then(o=>e(o));return}n.then(o=>e(o))}}var mE=(()=>{class s extends $c{constructor(){super(...arguments),this.algorithm=wr.UNCOMPRESSED}compress(t,e,i){i(this.compressSync(t,e))}compressSync(t,e){return t}getCompressorSourceCode(){return function(){return(t,e,i)=>i(t)}.toString()}}return s})(),Ml=(()=>{class s{static create(t,e=!0){return this.instance?this.instance:e&&!pE.isCompressionEnabled()?new mE(t):this.instance=new gE(t)}}return s})(),kl=["setEncryptionSelectors"],So=["setPIISelectors"],Dl=["setCapturedElementsSelector"],yE=(()=>{class s{constructor(t,e,i,n,o,c,l){this.S=t,this.E=e,this.lt=i,this.ve=n,this.Bt=o,this.ot=c,this.Tr=l}init(){var t,e;this.Tr&&this.ot&&((t=this.Tr)===null||t===void 0||t.addSelector((e=this.ot)===null||e===void 0?void 0:e.getEncryptionSelectors())),this.ht()}onStartTracking(t){this.ve.start(),this.S.emitSensitiveStatusChange()}onBeforeArtificialPageView(){this.ve.stop(),this.S.emitSensitiveStatusChange()}onAfterArtificialPageView(){this.ve.start(),this.S.emitSensitiveStatusChange()}onBeforeSessionRenewal(){this.ve.stop(),this.S.emitSensitiveStatusChange()}onOptout(){this.ve.stop(),this.S.emitSensitiveStatusChange()}onReplayUnanonymizationConsentGranted(){this.S.emitSensitiveStatusChange()}onReplayUnanonymizationConsentWithdrawn(){this.S.emitSensitiveStatusChange()}ht(){this.E.register(So,t=>{this.lt.setMaskedElementSettingsFromCommand(t),this.S.emitSensitiveStatusChange()}),this.E.register(Dl,t=>{this.Bt.setWhitelistedElementsSelector(t),this.S.emitSensitiveStatusChange()}),this.E.register(kl,t=>{var e,i;(e=this.ot)===null||e===void 0||e.setEncryptionSelectors(t),(i=this.Tr)===null||i===void 0||i.addSelector(t)})}}return s})();var EE=(()=>{class s extends Mt{constructor(t,e,i,n,o,c){super(),this.le=t,this.lt=e,this.Bt=i,this.Tr=n,this.br=o,this.it=c}onStart(){var t,e,i;this.Bt.start(),this.le.setMaskedElementSettings(this.lt.getMaskedElementSettings((t=this.it)===null||t===void 0?void 0:t.shouldMaskNonTextElements())),this.le.startIdentifier(),(e=this.Tr)===null||e===void 0||e.start(),(i=this.br)===null||i===void 0||i.start()}onStop(){var t,e;this.Bt.stop(),this.le.stopIdentifier(),(t=this.Tr)===null||t===void 0||t.stop(),(e=this.br)===null||e===void 0||e.stop()}}return s})(),SE=(()=>{class s{constructor(t,e,i,n,o){this.it=t,this.lt=e,this.ve=i,this.Bt=n,this.ot=o}getSensitiveStatus(){var t,e;return{started:this.ve.isStarted,useAnonymization:this.it.shouldUseAnonymization(),capturedElementSelector:this.Bt.getWhitelistedElementsSelector(),maskedElementSettings:this.lt.getMaskedElementSettings((t=this.it)===null||t===void 0?void 0:t.shouldMaskNonTextElements()),encryptionSelectors:(e=this.ot)===null||e===void 0?void 0:e.getEncryptionSelectors()}}getElementSensitiveStatus(t){let e=this.ve.isStarted,i=this.it.shouldUseAnonymization();return e?x.isMaskedElement(t)||x.isMaskedElementChild(t)?Xe.MASKED:rf.shouldEncrypt(t)?Xe.ENCRYPTED:Je.isEditableNode(t)?Xe.ANONYMIZED:i?Te.isWhitelistedElement(t)?Xe.CAPTURED:Xe.ANONYMIZED:Xe.CAPTURED:Xe.ANONYMIZED}}return s})(),vE=(()=>{class s{constructor(t){this.B=t}onAfterVisitorRenewal(){this.B.renewSession()}}return s})(),ec=(()=>{let s;return function(r){function t(p,y){for(let m of p)if(i(m,y))return!0;return!1}r.isUrlMatching=t;function e(p,y){if(R(y)){for(let m of p)if(i(m,y))return!0}else if(ir(y)){for(let m of p)if(i(m,csString(y)))return!0}return!1}r.isMatching=e;function i(p,y){let m=n(p,y);return p.negate?!m:m}function n(p,y){switch(p.rule_type==="date"&&(p.match_operation==="less_than"||p.match_operation==="greater_than")&&(y=(new csDate(y).valueOf()/1e3).toFixed(0)),p.match_operation){case"exact":switch(p.rule_type){case"string":return R(p.pattern)?csString.prototype.toLowerCase.call(y)===csString.prototype.toLowerCase.call(p.pattern):!1;case"boolean":return y===p.pattern||y===csString(p.pattern);case"number":return ut(y)?Number(y)===Number(p.pattern):!1;default:return y===p.pattern}case"starts_with":return R(p.pattern)?csString.prototype.indexOf.call(y,p.pattern)===0:!1;case"ends_with":return R(p.pattern)?Ws(y,p.pattern):!1;case"contains":return R(p.pattern)?csString.prototype.indexOf.call(y,p.pattern)!==-1:!1;case"regex":if(!R(p.pattern))return!1;try{return new csRegExp(p.pattern).test(y)}catch(m){return B.warn(`targeting.matchOperation.regex invalid ${m==null?void 0:m.message}`),!1}case"simple":return R(p.pattern)?E(y)===E(p.pattern):!1;case"greater_than":return Number(y)>Number(p.pattern);case"less_than":return Number(y)<Number(p.pattern);case"exact_date":{let m=Number(p.pattern);if(!pt(m))return!1;let S=new csDate(m*1e3);return new csDate(y).toDateString()===S.toDateString()}case"exact_days_ago":return o(p,y);case"more_than_days_ago":return c(p,y);case"less_than_days_ago":return l(p,y);case"unknown":return u(y);default:return B.warn(`targeting.matchOperation.regex not managed operation ${p.match_operation}`),!1}}function o(p,y){let m=new csDate,S=m.setDate(m.getDate()-Number(p.pattern)),I=new csDate(S);return new csDate(y).toDateString()===I.toDateString()}function c(p,y){let m=Number(p.pattern);if(!pt(m))return!1;let S=Number(m)+1,I=new csDate,P=new csDate(I);return P.setDate(I.getDate()-S),new csDate(y).getTime()<=P.getTime()}function l(p,y){let m=Number(p.pattern);if(!pt(m))return!1;if(m===0)return o(p,y);let S=new csDate,I=new csDate(S);return I.setDate(S.getDate()-m),new csDate(y).getTime()>=I.getTime()}function u(p){return ut(p)?R(p)?csString.prototype.trim.call(p)==="":ir(p)?p===!0:pt(p)?p!==0:!1:!0}function E(p){let y=Pt(p,"http://")||Pt(p,"https://")?p:`https://${p}`,m=Fc(y);return m!==null?csString.prototype.replace.call(m.host,/^www./,""):p}}(s||(s={})),s})(),_E=(()=>{class s{constructor(){this.Dg=[],this.xg=[]}setTargetingRules(t){for(let e of t)e.component==="url"?csArray.prototype.push.call(this.Dg,e):e.component==="trigger"&&csArray.prototype.push.call(this.xg,e)}matchUrl(t){return ec.isUrlMatching(this.Dg,t)}matchTrigger(t){return ec.isMatching(this.xg,t)}}return s})(),wE=(()=>{class s extends Mt{constructor(t,e,i){super(),this.Ua=t,this.Hh=e,this.A=i}init(){this.Bh=new _E,this.Ua&&this.Bh.setTargetingRules(this.Ua)}onStart(){}checkInitialUrlTargetingRules(){let t=this.A.getAnonymizedUrl();this.Fh(t,"url")&&this.Hh()}onStop(){}onTargetingRulesArtificialPageview(t){this.isStarted&&this.Fh(t,"url")&&this.Hh()}onExternalEvent(t){this.isStarted&&this.Fh(t.name,"trigger")&&this.Hh()}Fh(t,e){var i,n;return e==="url"&&R(t)&&(!((i=this.Bh)===null||i===void 0)&&i.matchUrl(t))?!0:!!(e==="trigger"&&(!((n=this.Bh)===null||n===void 0)&&n.matchTrigger(t)))}}return s})(),TE=(()=>{class s{constructor(t,e,i,n,o,c){this.Ua=t,this.vA=e,this.S=i,this._t=n,this.J=o,this.A=c}init(){this.Kn=new wE(this.Ua,this.vA,this.A),this.J.addListener(this.Kn),this.Kn.init()}start(){this.Kn.start()}stop(){this.Kn.stop()}checkInitialUrlTargetingRules(){this.Kn.checkInitialUrlTargetingRules()}emitTargetingCollectState(){let t=this._t.getInitialCollectState();t===V.ANALYTICS_ONLY?this.S.emitCollectStateChange(V.ANALYTICS_ONLY_RULES_TARGETING,$t.ETR_OFF):t===V.RECORDING_GLOBAL_SAMPLING&&this.S.emitCollectStateChange(V.RECORDING_RULES_TARGETING,$t.ETR_OFF)}}return s})(),bE=["networkRequest:maskUrls"];var xl=":";function sc(s){let r=[],t=AE(s),e=csString.prototype.split.call(t,"/");for(let i of e)Pt(i,xl)?csArray.prototype.push.call(r,{key:i,value:`CS_ANONYMIZED_${csString.prototype.toUpperCase.call(csString.prototype.slice.call(i,1))}`}):csArray.prototype.push.call(r,{key:i,value:null});return r}function AE(s){let r=s;return Pt(s,"/")&&(r=csString.prototype.substring.call(r,1)),Ws(s,"/")&&(r=csString.prototype.slice.call(r,0,-1)),r}var RE=(()=>{class s{constructor(){this.Vg=new Set,this.Ug=[],this.$h=new Set,this.zh=[]}addUrlMaskingPattern(t){if(this.Vg.has(t))return;this.Vg.add(t);let e=sc(t);csArray.prototype.push.call(this.Ug,e)}getUrlMaskingPatterns(){return this.Ug}resetPartialUrlMaskingPatterns(){this.$h.clear(),this.zh=[]}addPartialUrlMaskingPattern(t){if(this.$h.has(t))return;this.$h.add(t);let e=sc(t);csArray.prototype.push.call(this.zh,e)}getPartialUrlMaskingPatterns(){return this.zh}}return s})(),CE=(()=>{class s extends Mt{onStart(){this._A()}onStop(){}register(t,e){let i=(...n)=>{try{e(...n)}catch(o){B.warn(`Misused Heap Command: ${t}; Args: ${csJSON.stringify(n)}; Error: ${Pe(o)?o.stack:o}`)}};window.heap=window.heap||[],window.heap[t]=i}_A(){var t,e;!((t=window.heapReadyCb)===null||t===void 0)&&t.length?this.wA():!((e=window.heap)===null||e===void 0)&&e.length&&this.TA()}wA(){csArray.prototype.forEach.call(window.heapReadyCb,({name:t,fn:e})=>{window.heap[t]&&e()}),window.heapReadyCb.length=0}TA(){window.heap.forEach(([t,...e])=>{window.heap[t]&&window.heap[t](...e)}),window.heap.length=0}}return s})(),IE=(()=>{class s{constructor(t,e,i){this.f=t,this.I=e,this.R=i,this.es=M.now()}resetStartTime(){this.es=M.now()}getSessionData(){let{projectId:t}=this.f,e=this.I.getVisitor();e==null&&B.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{id:i,visitsCount:n}=e!=null?e:{},o=this.R.getSession();o===null&&B.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{pageNumber:c}=o!=null?o:{};return{projectId:t,userId:i,sessionNumber:n,pageNumber:c,relativeTimestamp:M.now()-this.es}}}return s})(),PE=["clearSession"],OE=["extendSession"];var NE=["getSessionData"],ME=["session:start:newVisitor"],kE=["session:clear:visitor"],DE=(()=>{class s{constructor(t,e,i,n){this.f=t,this.I=e,this.R=i,this.E=n}init(){this.Gh=new IE(this.f,this.I,this.R),this.E.register(PE,()=>this.R.removeSession()),this.E.register(OE,()=>this.R.extendSessionPeriodically(),{disableApplyPending:!0}),this.E.register(NE,()=>this.Gh.getSessionData(),{disableApplyPending:!0}),this.E.register(ME,()=>this.I.renewVisitor()),this.E.register(kE,()=>{this.I.resetVisitor()},{disableApplyImmediate:!0})}onBeforeNaturalPageView(){this.I.createOrUpdateVisitor(),this.R.createOrUpdateSession()}onBeforeArtificialPageView(){this.I.createOrUpdateVisitor(),this.R.createOrUpdateSession()}onAfterNaturalPageView(){this.Gh.resetStartTime()}onAfterArtificialPageView(){this.Gh.resetStartTime()}onOptout(){this.I.removeVisitor(),this.R.removeSession()}onCollectStateChange(t){this.R.updateCollectState(t)}}return s})(),xE=(()=>{class s{constructor(t,e,i,n,o,c,l,u,E,p,y,m,S,I,P,v,_,D,O,A,j,it,dt,Wt,kt,w,k,U,F,lt,Dt,Ht,Me,bs){this.gt=t,this.ja=e,this.fe=i,this.I=n,this.R=o,this.B=c,this.Li=l,this.S=u,this.E=E,this.qh=p,this.f=y,this.Wh=m,this.ei=S,this.Jn=I,this.Tt=P,this.M=v,this.Q=_,this.tt=D,this.A=O,this.bA=A,this.J=j,this.St=it,this.Et=dt,this.jg=Wt,this.se=kt,this.AA=w,this.O=k,this.de=U,this.N=F,this.At=lt,this._t=Dt,this.lt=Ht,this.Ee=Me,this.Je=bs,this.RA=(Lt=!1)=>{let Bt=this.R.getSession();Bt===null?(this.Ar=new TE(this.f.recordTargetingRules,this.Hg,this.S,this._t,this.J,this.A),this.Ar.init(),this.Ar.start()):(Bt.collectState===V.RECORDING_RULES_TARGETING||Bt.collectState===V.ANALYTICS_ONLY_RULES_TARGETING)&&this.Hg(Lt)},this.Hg=(Lt=!1)=>{this.Rr.onLoad(()=>{var Bt,te;(Bt=this.Ar)===null||Bt===void 0||Bt.emitTargetingCollectState(),(te=this.Ar)===null||te===void 0||te.stop(),this.S.emitStartTracking(Lt)}),this.Ha(Lt)},this.Ha=(Lt=!1)=>{this.ei.isActive()||(this.lt.init(),this.Yh.start(Lt),this.Rr.start())},this.CA=()=>{this.S.emitBeforeSessionRenewal(),this.Cr(!0),this.S.emitAfterSessionRenewal()},this.IA=()=>{this.S.emitBeforeSessionRenewal(),this._t.refreshQuota(Lt=>{Lt!==V.QUOTA_REACHED&&(this.Cr(!0),this.S.emitAfterSessionRenewal())})}}start(){if(this.Wh.init(),this.ei.init(),this.ei.isActive())return;let t,e,i,n,o,c,l,u,E,p,y,m,S,I,P,v,_,D,O;this.O.schedule(()=>{this.f.isCsCrosswritingHeap()&&(this.ar=new CE),P=new vE(this.B),m=new vf(this.Q),S=new tf(()=>{}),v=new ef,O=new sf;let A=new EE(S,this.lt,v,D,O,this.Xh());I=new SE(this.Xh(),this.lt,A,v,_);let j=new yE(this.S,this.E,this.lt,A,v,_,D);j.init(),this.S.addListener(j),t=new Vg(this.f,this.ja,this.I,this.Q,m,this.E,this.B,new Ef(B),this.St,this.de,this.J,I,this.ar),e=new Gg(this.E,this.R,this.f,this.gt,this.fe,this.M),y=new uE(I,this.f);let it=null,dt=new wm;i=new pm(this.I,this.R,this.E,this.St,it,this.f,dt,y),n=new Jg(this.f,this.ja,this.I,this.E,this.M,this.B,this.A),this.f.isCsCrosswritingHeap()&&(this.Ee||(this.Ee=new wl),this.Bg=new _m(this.Ee,this.E),this.S.addListener(this.Bg),this.Bg.init());let Wt;this.f.isCsCrosswritingHeap()&&(this.Fg=new Af(this.E,this.Je),this.S.addListener(this.Fg),this.Fg.init(),this.$g=new xf(this.E,this.f,this.I,this.B),this.S.addListener(this.$g),this.$g.init()),this.Yh=new Nm(this.f,this.E,this.S,this.ja,this.I,this.R,this.Li,this.Tt,this.Et,this.A,this.se,dt,this.J,this.Ee,Wt),this.zg=new DE(this.f,this.I,this.R,this.E),l=new ym(this.f,this.E,this.fe,this.ja,this.J),u=new fm(this.E),E=new wf,this.Rr=new eg}),this.O.schedule(()=>{this.Jn.init()}),this.O.schedule(()=>{i.init()}),this.O.schedule(()=>{e.init()}),this.O.schedule(()=>{n.init()}),this.O.schedule(()=>{this.jg.init()}),this.O.schedule(()=>{this.Yh.init()}),this.O.schedule(()=>{this.zg.init()}),this.O.schedule(()=>{l.init()}),this.O.schedule(()=>{this.bA.init()}),this.O.schedule(()=>{u.init()}),this.O.schedule(()=>{E.init()}),this.O.schedule(()=>{this.AA.init()}),this.O.schedule(()=>{this.S.addListener(this.zg),this.S.addListener(this.qh),this.S.addListener(t),this.S.addListener(this.Jn),this.S.addListener(i),this.S.addListener(n),this.S.addListener(this.jg),this.S.addListener(this.Yh),this.S.addListener(l),this.S.addListener(e),this.S.addListener(E),this.S.addListener(P)}),vi.isRecordingSupported()&&this.O.schedule(()=>{let A=new hE(y,this.R,this.f,this.gt,this.E,this.M,this.B,S,this.qe,this.mt,this.xe,this.vt,this.S,this.J,this.St,this.se,this.de,this.tt,this.Hn,this.Xh(),this.cr,_);A.init(),this.S.addListener(A),i.setRecordingService(A.recordingService)}),this.O.schedule(()=>{var A;let j,it}),this.O.schedule(()=>{t.init()}),this.O.schedule(()=>{this.f.isQuotaEnabled()?this.B.onSessionExpired(()=>{this.IA()}):this.B.onSessionExpired(()=>{this.CA()}),this.Cr()})}Cr(t=!1){var e,i,n;if(this.f.hasTargetingRules()){this.RA(t),this.E.start(),(e=this.ar)===null||e===void 0||e.start(),this.Ar&&this.Ar.checkInitialUrlTargetingRules();return}this.E.start(),(i=this.ar)===null||i===void 0||i.start(),this.Rr.onLoad(()=>{this.S.emitStartTracking(t)}),(!tl(this.f)||t)&&this.Ha(t)}Xh(){if(this.it)return this.it;let t=new Jc;return this.it=new cf(this.f,this.A,t,this.Tt),this.it.init(),this.it.shouldUseAnonymization()&&q.counters.pageAnonymisation.count("anonymized-on-start"),this.it}}return s})(),LE=(()=>{class s{constructor(t,e,i,n,o,c,l,u){this.f=t,this.I=e,this.Ke=i,this.Gg=n,this.PA=o,this.OA=c,this.NA=l,this.Kh=u}compute(t){var e,i;this.f.crossDomainTracking&&!this.f.cookielessTrackingEnabled?this.f.crossDomainSingleIframeTracking?(e=this.NA)===null||e===void 0||e.start(()=>this.Jh(t)):(i=this.OA)===null||i===void 0||i.applyUpToDate(()=>this.Jh(t)):this.Jh(t)}Jh(t){this.PA.handle(),this.Gg.clear(),this.MA()?(this.Gg.restoreClearedVisitor(),t(!0)):(this.Ke.exclude(this.f),t(!1))}MA(){let t=Es.boolean(this.f.sampleRate);return this.Kh.isForceIncluded()||!this.Ke.isExcluded()&&this.I.doesVisitorExist()||!this.Ke.isExcluded()&&t}}return s})(),VE=(()=>{class s{constructor(t,e,i,n){this.f=t,this.ut=e,this.S=i,this.R=n,this.kA=10*1e3}createOrUpdateVisitor(){var t;let e=this.getVisitor();e===null&&(e=this.DA(),(t=this.R)===null||t===void 0||t.removeSession()),this.xA(e),this.setVisitor(e)}DA(){return{id:tg.generate(),visitsCount:0,appliedTrackingDraw:this.f.lastTrackingDraw,creationTimestamp:Qo(),lastVisitTimestamp:0,hitTimestamp:0,expires:M.now()+this.f.visitorCookieTimeout,allowSubdomains:this.f.allowSubdomains,identityPrint:null}}xA(t){let e=Qo();this.R&&!this.R.doesSessionExist()&&(t.visitsCount+=1,t.lastVisitTimestamp=e),t.hitTimestamp=e,t.appliedTrackingDraw=this.f.lastTrackingDraw,this.qg=t.visitsCount}getRequestParameters(){let t=this.getVisitor();return t?{uu:t.id,sn:`${t.visitsCount}`,hd:`${t.hitTimestamp}`}:{}}getVisitor(){return this.ut.get()}setVisitor(t){this.ut.set(t)}doesVisitorExist(){return this.ut.get()!==null}resetVisitor(){this.Wg(),this.S.emitAfterVisitorCleared()}removeVisitor(){this.ut.remove()}hasAllowSubdomainsChanged(){let t=this.getVisitor();return t?t.allowSubdomains!==this.f.allowSubdomains:!1}handleSubdomainChange(){this.ut.handleSubdomainChange()}isSessionRenewed(){let t=this.getVisitor();return t===null||this.qg===void 0?!1:t.visitsCount!==this.qg}LA(){return!K(this.Yg)||M.now()-this.Yg>this.kA}renewVisitor(){this.LA()?(this.Yg=M.now(),this.Wg(),this.S.emitAfterVisitorRenewal()):B.warn("session:start:newVisitor is trying to renew visitor under time limit")}Wg(){this.S.emitBeforeVisitorRenewal(),this.removeVisitor()}}return s})(),se="_cs_s",mr=18e5,nn=".",UE=13,Xi=(()=>{let s;return function(r){r[r.NOT_FOUND=0]="NOT_FOUND",r[r.EXPIRED=1]="EXPIRED",r[r.FOUND=2]="FOUND"}(s||(s={})),s})(),jE=(()=>{class s{constructor(t,e,i){this.f=t,this.N=e,this.X=i,this.ie=null,this.Qh=!1}get(t){let e=this.getRawSession(t);return this.isValid(e)?Yc(e):null}getRawSession(t){if(t){let E=this.Zh();return bn(E)}let{sessionString:e,status:i}=this.VA(),n=bn(e);if(i!==Xi.EXPIRED)return n;if(this.f.cookielessTrackingEnabled)return null;let o=this.Zh();if(!o)return null;let c=csString.prototype.split.call(o,nn);if(!s.Xg(c))return o;let l=c[c.length-1],u=parseInt(l,10);return isNaN(u)||this.UA(u),n}onCookieToSet(t){this.gi=t}onCookieToRemove(t){this.mi=t}set(t,e=mr){var i;let n=M.now()+e,o=Dp(t);o+=`${nn}${n}`,this.jA(o,n),this.f.cookielessTrackingEnabled?this.X.setItem(se,o):(this.N.set(se,o,e),(i=this.gi)===null||i===void 0||i.call(this,se,o,e))}remove(){var t;this.f.cookielessTrackingEnabled?this.X.removeItem(se):(this.N.delete(se),(t=this.mi)===null||t===void 0||t.call(this,se)),this.HA()}handleSubdomainChange(){if(this.f.cookielessTrackingEnabled)return;let t=this.get(!0);t&&(this.f.allowSubdomains?this.N.delete(se,_r.CURRENT_DOMAIN):this.N.delete(se,this.N.getRootDomain()),this.set(t))}isValid(t){return t!==null&&io(t)}jA(t,e){this.ie={sessionString:t,expires:e}}VA(){return this.ie?this.ie&&M.now()<=this.ie.expires?{sessionString:this.ie.sessionString,status:Xi.FOUND}:{sessionString:this.ie.sessionString,status:Xi.EXPIRED}:{sessionString:this.Zh(),status:Xi.NOT_FOUND}}HA(){this.ie=null}UA(t){this.ie&&(this.ie.expires=t,this.Qh=!0)}isCacheRefreshed(){return this.Qh}resetCacheRefreshed(){this.Qh=!1}Zh(){if(this.f.cookielessTrackingEnabled){let e=this.X.getItem(se);return!e||this.Kg(e)?null:e}let t=this.N.get(se);return!t||this.Kg(t)?null:t}Kg(t){let e=csString.prototype.split.call(t,nn);if(!s.Xg(e))return!1;let i=parseInt(e[e.length-1],10);return!isNaN(i)&&M.now()>i}static Xg(t){return t[t.length-1].length===UE}}return s})(),vo=60*1e3,HE=60*vo,BE=4*HE-vo,ks=(()=>{let s;return function(r){r[r.NO=0]="NO",r[r.WITHDRAWN=1]="WITHDRAWN",r[r.GRANTED=2]="GRANTED"}(s||(s={})),s})(),FE=(()=>{class s{constructor(t,e,i,n,o){this.De=t,this._t=e,this.S=i,this.BA=n,this.FA=o,this.Qn=null,this.tu=0,this.Zn=ks.NO}setDynamicVariablesService(t){this.$A=t}createOrUpdateSession(){this.eu(),this.zA=M.now(),this.tu=0;let t=this.Jg();t===null?(t=this.GA(),this.Ba(t),this.S.emitSessionCreated()):(t=this._t.sanitizeSessionCollectState(t),this.qA(t),t.collectState=this._t.getEligibleCollectState(t)),this.setSession(t)}grantReplayRecording(t){t.collectState=this._t.getInitialCollectState(),t.collectState=this._t.computeInitialCollectStateFromRecordingConsentGranted(t),this.setSession(t)}grantReplayRecordingBeforeSessionStart(){this.Zn=ks.GRANTED}withdrawnReplayRecording(t){t.collectState=this._t.getRecordingConsentWithdrawn(),this.setSession(t)}withdrawnReplayRecordingBeforeSessionStart(){this.Zn=ks.WITHDRAWN}Ba(t){this.Zn===ks.WITHDRAWN?(t.collectState=this._t.getRecordingConsentWithdrawn(),this.setSession(t)):this.Zn===ks.GRANTED?t.collectState=this._t.computeInitialCollectStateFromRecordingConsentGranted(t):t.collectState=this._t.computeInitialCollectState(t),this.Zn=ks.NO}GA(){return{pageNumber:1,collectState:this._t.getInitialCollectState(),replayConsent:this.BA?Tn.NOT_EXPRESSED:Tn.UNNECESSARY,etrStatus:Jt.ETR_NOT_SAVED_SESSION}}qA(t){t.pageNumber+=1}isReplayRecorded(){let t=this.getSession();return!!t&&this._t.isReplayRecorded(t)}isTemporarilyRecorded(){let t=this.getSession();return(t==null?void 0:t.collectState)===V.RECORDING_TEMPORARILY}getRequestParameters(){let t={},e=this.getSession();return e!==null&&(t.pn=`${e.pageNumber}`),t}getSession(){return this.De.get()}Jg(){return this.De.get(!0)}doesSessionExist(){return this.De.get()!==null}setSession(t){this.De.set(t),this.S.emitSessionRefreshed()}refreshSession(){let t=this.Jg();t&&this.setSession(t)}removeSession(){this.De.remove(),this.S.emitSessionRemoved()}getCollectStates(){let t=this.getSession(),e=[];return t&&(t.collectState!==V.ANALYTICS_ONLY&&csArray.prototype.push.call(e,t.collectState===V.RECORDING_RULES_TARGETING?V.RECORDING_GLOBAL_SAMPLING:t.collectState),this.FA&&csArray.prototype.push.call(e,V.RECORDING_ETR_SAMPLING)),e}updateCollectState(t){let e=this.getSession();e!==null&&(e.collectState=t,this.setSession(e))}hasValidSession(){let t=this.De.getRawSession();return this.De.isValid(t)}handleSubdomainChange(){this.De.handleSubdomainChange()}pollCacheRefreshEvent(t=!0){let e=this.De.isCacheRefreshed();return e&&t&&this.De.resetCacheRefreshed(),e}extendSessionPeriodically(){this.Qn||this.Qg()}extendSession(){let t=this.getSession();return t===null?(B.warn("extendSession is trying to extend an expired session"),this.eu(),!1):(this.setSession(t),!0)}Qg(){if(this.WA()){this.eu();return}this.extendSession()&&(this.YA(),this.KA())}KA(){this.Qn=window.csSetTimeout(()=>{this.Qg()},mr-vo)}WA(){return BE-(M.now()+mr-this.zA)<0}eu(){this.Qn&&(window.csClearTimeout(this.Qn),this.Qn=null)}YA(){this.tu+=1,this.$A.trackDynamicVariable("session_expiry_update",this.tu)}}return s})(),$E=(()=>{class s{constructor(t,e,i){this.f=t,this.I=e,this.Ke=i}clear(){this.JA()&&(this.Zg=this.I.getVisitor(),this.I.removeVisitor()),this.QA()&&this.Ke.removeExclusion()}JA(){return this.I.doesVisitorExist()&&this.I.getVisitor().appliedTrackingDraw!==this.f.lastTrackingDraw}QA(){return this.Ke.getAppliedTrackingDraw()!==this.f.lastTrackingDraw}restoreClearedVisitor(){this.Zg&&this.I.setVisitor(this.Zg)}}return s})(),zE=(()=>{class s{constructor(t,e,i){this.I=t,this.R=e,this.ZA=i}handle(){this.I.hasAllowSubdomainsChanged()&&(this.I.handleSubdomainChange(),this.R.handleSubdomainChange(),this.ZA.handleSubdomainChange())}}return s})(),Ye="_cs_c",ds=(()=>{let s;return function(r){r[r.NOT_REQUIRED=0]="NOT_REQUIRED",r[r.NOT_EXPRESSED=1]="NOT_EXPRESSED",r[r.GRANTED=2]="GRANTED",r[r.WITHDRAWN=3]="WITHDRAWN"}(s||(s={})),s})(),GE=(()=>{class s{constructor(t,e,i){this.f=t,this.N=e,this.At=i}get(){let t;return this.f.cookielessTrackingEnabled?t=this.At.getItem(Ye):t=this.N.get(Ye),t===null?t:Number(t)}set(t){this.f.cookielessTrackingEnabled?this.At.setItem(Ye,csString(t)):this.N.set(Ye,csString(t),zn)}remove(){this.f.cookielessTrackingEnabled?this.At.removeItem(Ye):this.N.delete(Ye)}handleSubdomainChange(){this.f.cookielessTrackingEnabled||(this.f.allowSubdomains?this.N.delete(Ye,_r.CURRENT_DOMAIN):this.N.delete(Ye,this.N.getRootDomain()))}}return s})(),qE=(()=>{class s{constructor(t,e,i){this.f=t,this.R=e,this.S=i}grantReplayConsent(){if(!ts.isReplayConsentNeeded(this.f))return;let t=this.R.getSession();if(!t){this.R.grantReplayRecordingBeforeSessionStart();return}ts.isRecordingBlockedByConsent(t)&&(this.R.grantReplayRecording(t),this.S.emitAfterReplayRecordingConsentGranted())}withdrawReplayConsent(){if(!ts.isReplayConsentNeeded(this.f))return;let t=this.R.getSession();if(!t){this.R.withdrawnReplayRecordingBeforeSessionStart();return}ts.isRecordingWithDrawn(t)||(this.R.withdrawnReplayRecording(t),this.S.emitAfterReplayRecordingConsentWithdrawn())}}return s})(),WE=["replay:consent:unanonymized:granted","trackConsentGranted"],YE=["replay:consent:unanonymized:withdrawn","trackConsentWithdrawn"],XE=["replay:consent:startForSession:granted"],KE=["replay:consent:startForSession:withdrawn"],JE=(()=>{class s{constructor(t,e,i,n,o){this.f=t,this.E=e,this.Tt=i,this.R=n,this.S=o}init(){this.tm=new qE(this.f,this.R,this.S),this.Tt.setInitialConsent(),this.ht()}ht(){this.E.register(WE,()=>{this.Tt.grantReplayAnonymizationConsent()}),this.E.register(YE,()=>{this.Tt.withdrawReplayAnonymizationConsent()}),this.E.register(XE,()=>{this.tm.grantReplayConsent()}),this.E.register(KE,()=>{this.tm.withdrawReplayConsent()})}onOptout(){this.Tt.removeAllConsents()}onBeforeVisitorRenewal(){this.Tt.removeAllConsents()}onAfterVisitorRenewal(){this.Tt.setInitialConsent()}onAfterVisitorCleared(){this.Tt.setInitialConsent()}}return s})(),QE=(()=>{class s{constructor(t,e,i){this.f=t,this.ut=e,this.S=i}setInitialConsent(){let t=this.ut.get();(t===null||this.hasConsentRequiredChanged(t))&&this.setDefaultReplayAnonymization()}hasConsentRequiredChanged(t){let e=this.f.consentRequired;return e&&t===ds.NOT_REQUIRED||!e&&t!==ds.NOT_REQUIRED}handleSubdomainChange(){this.ut.handleSubdomainChange()}setDefaultReplayAnonymization(){let t=this.f.consentRequired?ds.NOT_EXPRESSED:ds.NOT_REQUIRED;this.ut.set(t)}grantReplayAnonymizationConsent(){this.f.consentRequired&&(this.ut.set(ds.GRANTED),this.S.emitReplayUnanonymizationConsentGranted())}withdrawReplayAnonymizationConsent(){this.f.consentRequired&&(this.ut.set(ds.WITHDRAWN),this.S.emitReplayUnanonymizationConsentWithdrawn())}removeAllConsents(){this.ut.remove()}isReplayUnanonymizedAllowedByConsent(){return!this.f.consentRequired||this.ut.get()===ds.GRANTED}getRequestParameters(){return{uc:`${this.ut.get()}`}}}return s})(),ZE=(()=>{class s{constructor(t,e,i,n,o,c,l){this.S=t,this.E=e,this.qh=i,this.Wh=n,this.ei=o,this.tR=c,this.Jn=l}start(){this.S.addListener(this.tR),this.S.addListener(this.Jn),this.S.addListener(this.qh),this.Jn.init(),this.Wh.init(),this.ei.init(),!this.ei.isActive()&&this.E.start()}}return s})(),tS=(()=>{class s{constructor(t,e){this.Ot=t,this.ut=e}exclude(t){this.ut.set(csString(t.lastTrackingDraw))}removeExclusion(){this.ut.remove()}isExcluded(){return this.eR()||this.sR()}eR(){return this.getAppliedTrackingDraw()!==0}getAppliedTrackingDraw(){return this.ut.get()}sR(){return csString.prototype.indexOf.call(this.Ot.href,_e)>0}}return s})(),eS=(()=>{class s{constructor(t){this.ki=t}onOptout(){this.ki.removeExclusion()}}return s})(),on=(()=>{let s;return function(r){r.SessionReplay="SR",r.None=""}(s||(s={})),s})(),sS=".^",Ll=".*",iS=(()=>{class s{constructor(t){this.A=t,this.su=new csRegExp(`${sS}`)}setExcludeUrlForSessionReplay(t){try{this.su=new csRegExp(t)}catch{B.warn(`excludeURLforReplay - invalid regex '${t}'`),this.su=new csRegExp(`${Ll}`)}}em(){return this.su.test(this.A.getAnonymizedUrl())?on.SessionReplay:on.None}isUrlExcludedForSessionReplay(){return this.em()===on.SessionReplay}getRequestParameters(){return{ex:this.em()}}}return s})(),Vl=["excludeURLforReplay"],rS=(()=>{class s{constructor(t,e){this.ki=t,this.E=e}init(){this.E.register(Vl,t=>{if(R(t))this.ki.setExcludeUrlForSessionReplay(t);else throw new Error("Command misuse: excludeURLforReplay")})}}return s})(),an="_cs_inc",nS=(()=>{class s{constructor(t,e){this.Ot=t,this.N=e}isForceIncluded(){return this.iR()||this.rR()}isForceReplayRecorded(){return this.nR(V.RECORDING_GLOBAL_SAMPLING)}iR(){return this.N.get(an)!==null}nR(t){return this.N.get(an)===t}rR(){return csString.prototype.indexOf.call(this.Ot.href,an)>0}}return s})(),ai="_cs_optout",oS=(()=>{class s{constructor(t,e,i){this.f=t,this.N=e,this.At=i}get(){return this.f.cookielessTrackingEnabled?this.At.getItem(ai):this.N.get(ai)}set(t){this.f.cookielessTrackingEnabled?this.At.setItem(ai,t):this.N.set(ai,t,zn)}}return s})(),ic="1",aS=(()=>{class s{constructor(t,e,i){this.S=t,this.Ot=e,this.ut=i}init(){!this.isActive()&&this.oR()&&this.activate()}isActive(){return this.ut.get()===ic}activate(){this.S.emitOptout(),this.ut.set(ic)}oR(){return csString.prototype.indexOf.call(this.Ot.href,ai)>0}}return s})(),cS=["optout"];var lS=(()=>{class s{constructor(t,e){this.E=t,this.ei=e}init(){this.E.register(cS,()=>{this.ei.activate()})}}return s})();var hS=(()=>{class s{constructor(t,e){this.E=t,this.St=e}init(){this.St.addListener(this.E)}onOptout(){this.E.stop()}onBeforeSessionRenewal(){this.E.stop()}}return s})();var uS=(()=>{let s;return function(r){r.UXA="_uxa",r.WVT="cs_wvt"}(s||(s={})),s})(),dS=(()=>{class s extends Mt{constructor(t){super(),this.iu=t,this.ls={}}register(t,e,i){for(let n of t){let o=(...c)=>{try{let l=e(...c);return q.counters.commandApplied.count(n),l}catch(l){q.counters.commandMisuse.count(n),B.warn(`Misused Command: ${n}; Args: ${csJSON.stringify(c)}; Error: ${Pe(l)?l.stack:l}`)}};this.ls[n]={callback:o,configuration:i},this.ls}}onStart(){this.cR(),this.lR()}onStop(){for(let t of this.iu)window[t]=[]}applyFromIntegration(t,e,i){this.sm(t,e,`Commands.apply.from.integration: ${i}`),q.counters.commandsFromIntegrations.count(t)}applyFromImplementation(t,e,i){this.sm(t,e,`Commands.apply.from.implementation: ${i}`),q.counters.commandsFromCSTC.count(t)}onIframeCommands(t){for(let e of t.commands)this.hR(e.name,e.params,t.iframePath),q.counters.commandsFromIframe.count(e.name)}sm(t,e,i){if(!this.isStarted){window._uxa.push([t,...e]);return}B.tryToExecute(i,()=>{if(this.ls[t])return this.ls[t].callback(...e)})()}hR(t,e,i){B.tryToExecute(`Commands.apply.from.iframe: ${i}`,()=>{if(this.ls[t])return this.ls[t].callback(...e)})()}cR(){for(let t of this.iu)window[t].forEach(([e,...i])=>this.im(e,i,!1))}lR(){for(let t of this.iu)window[t]={push:([e,...i])=>this.im(e,i,!0)}}im(t,e,i){var n,o;if(this.ls[t]){if(((n=this.ls[t].configuration)===null||n===void 0?void 0:n.disableApplyPending)&&!i||((o=this.ls[t].configuration)===null||o===void 0?void 0:o.disableApplyImmediate)&&i)return;try{return this.ls[t].callback(...e)}catch(l){q.counters.commandError.count(t),B.error(`Command ${t} failed - params: ${csJSON.stringify(e)}`,l)}}}}return s})();var rc=(()=>{class s{constructor(t,e,i,n,o){this.f=t,this.I=e,this.R=i,this.pm=n,this.ni=o}getRequestParameters(){var t;let e={...eo(),...this.f.getRequestParameters()},i=this.R.getSession();i&&(e.pn=`${i.pageNumber}`);let n=this.I.getVisitor();if(n&&(e.sn=`${n.visitsCount}`,e.uu=`${n.id}`),!((t=this.pm)===null||t===void 0)&&t.hasSubProjectId()&&(e.subProjectID=`${this.pm.getSubProjectId()}`),this.mR(e),window.heap&&!this.f.isCsCrosswritingHeap())try{e.happid=window.heap.appid,window.heap.getSessionId&&(e.hsid=window.heap.getSessionId()),window.heap.getUserId?e.huu=window.heap.getUserId():window.heap.userId&&(e.huu=window.heap.userId),window.heap.getPageviewMetadata&&(e.hpvid=window.heap.getPageviewMetadata().pageviewId)}catch{delete e.happid,delete e.hsid,delete e.huu,delete e.hpvid}return e}mR(t){if(!this.ni)return;let e=this.ni.getSharedContext();e&&(t.happid=e.happid,t.t=e.pageTitle,t.fvt=csString(e.firstViewTime),t.fvurl=e.firstViewUrl,e.previousViewUrl&&(t.pvurl=e.previousViewUrl),t.url=e.currentViewUrl,e.sessionReferrer&&(t.fpvurl=e.sessionReferrer),t.sw=csString(e.screenWidth),t.sh=csString(e.screenHeight),t.cvt=csString(e.currentViewTime),e.encryptedIdentity&&(t.i=e.encryptedIdentity),e.cvarp&&(t.cvarp=e.cvarp))}}return s})(),pS=(()=>{class s{constructor(t,e){this.E=t,this.us=e}init(){this.E.register(["debugEvents"],t=>{typeof t=="boolean"&&this.us.updateDynamicFields("emitDebugEvents",t)})}}return s})();function nc(s,r,t){if(!K(r)&&!K(t))return s.href;let e=K(r)?Ul(r):s.pathname,i=K(t)?jl(t):s.search;return`${s.protocol}//${s.host}${e}${i}`}function Ul(s){return Pt(s,"/")?s:`/${s}`}function jl(s){return Pt(s,"?")||s===""?s:`?${s}`}var cn=(()=>{let s;return function(r){r[r.page=1]="page",r[r.onNextPageviewOnly=2]="onNextPageviewOnly"}(s||(s={})),s})(),fS=(()=>{class s{constructor(t,e){this.Ot=t,this.tt=e,this.yR=10}overridePath(t,e){if(t===""){this.Ir=void 0;return}let i=this.fm(e);i&&(this.ou=i),this.Ir=e?this.gm(t,e):t}overrideQuery(t,e){let i=this.fm(e);i&&(this.au=i),this.eo=e?this.gm(t,e):t}computeOverriddenUrl(t){return this.ER(t)?this.getAnonymizedUrl():t}SR(t){return(typeof t=="string"||typeof t=="number")&&t in cn}ER(t){let e=this.Ro(this.Ot.href);return this.Ro(t)===e}Ro(t){return Fd(t,"/")?csString.prototype.slice.call(t,0,-1):t}fm(t){return K(t==null?void 0:t.lifespan)&&this.SR(t==null?void 0:t.lifespan)?t==null?void 0:t.lifespan:null}vR(){return this.ou&&this.ou in cn}_R(){return this.au&&this.au in cn}cleanupOverrideLifespan(){this.vR()&&(this.Ir=void 0,this.ou=void 0),this._R()&&(this.eo=void 0,this.au=void 0)}getAnonymizedUrl(){let t=nc(this.Ot,this.Ir,this.eo);return this.tt.anonymizeUrl(t)}getUrl(){return nc(this.Ot,this.Ir,this.eo)}getAnonymizedPathAndQuery(){let t=K(this.Ir)?Ul(this.Ir):this.Ot.pathname,e=K(this.eo)?jl(this.eo):this.Ot.search;return this.tt.anonymizeUrl(t+e)}getUrlProtocol(){return this.Ot.protocol}getRequestParameters(){return{url:this.getAnonymizedUrl()}}gm(t,e){return this.wR(e)?this.TR(t):this.bR(e)?this.AR(t):t}bR(t){return!!t.decodeURI}AR(t){return this.mm(t,1,!1)}wR(t){return!!t.decodeURIDeep}TR(t){return this.mm(t,this.yR,!0)}mm(t,e,i){let n=t;for(let o=0;o<e;o++)try{let c=window.decodeURI(n);if(c===n)return n;n=c}catch{return n}return i&&B.warn(`decodeURIDeep limit reached: ${n}`),n}}return s})(),_o=(()=>{class s{constructor(){this.listeners=[]}addListener(t){csArray.prototype.push.call(this.listeners,t)}}return s})(),gS=(()=>{class s extends _o{emitPageEvent(t){for(let e of this.listeners)e.onPageEvent&&e.onPageEvent(t)}emitEventTriggerRecording(t,e){for(let i of this.listeners)i.onEventTriggerRecording&&i.onEventTriggerRecording(t,e)}emitCustomJavaScriptErrorEvent(t){for(let e of this.listeners)e.onCustomJavaScriptErrorEvent&&e.onCustomJavaScriptErrorEvent(t)}emitCustomErrorEvent(t){for(let e of this.listeners)e.onCustomErrorEvent&&e.onCustomErrorEvent(t)}emitUserIdentifierEvent(t){for(let e of this.listeners)e.onUserIdentifierEvent&&e.onUserIdentifierEvent(t)}emitExternalEvent(t){for(let e of this.listeners)e.onExternalEvent&&e.onExternalEvent({type:z.EXTERNAL_EVENT,name:t,ts:0})}emitTargetingRulesArtificialPageview(t){for(let e of this.listeners)e.onTargetingRulesArtificialPageview&&e.onTargetingRulesArtificialPageview(t)}}return s})(),pi="|iframe|",mS=(()=>{class s extends _o{constructor(t,e,i,n){super(),this.RR=t,this.CR=e,this.IR=i,this.PR=n}emitIframeEvent(t,e,i){if(this.NR(e)&&t===null){B.error(`iframeEventEmitter received event ${e} with null iframe, content:${csJSON.stringify(i)}`);return}switch(e){case Rt.ChildLogMessage:this.MR(i);break;case Rt.AnalysisEvent:{let n=i,o=this.RR.transformEvent(t,n);o.isUserEvent?this.kR(o.event):this.DR(o.event);break}case Rt.RecordingEvent:{let n=i,o=this.PR.transformEvents(t,n);if(o.events.length===0)return;o.containsUserEvent?this.xR(o.events):this.LR(o.events);break}case Rt.JavascriptError:this.VR(i);break;case Rt.ApiError:this.UR(i);break;case Rt.DetailedApiError:this.jR(i);break;case Rt.CustomError:this.HR(i);break;case Rt.EmerchandisingMessage:{let n=this.IR.transformEvent(t,i);this.BR(n);break}case Rt.Commands:{let n=this.CR.transformEvent(t,i);this.FR(n);break}case Rt.IntegrationCallback:this.$R(i);break;case Rt.StaticResource:this.zR(i);break;case Rt.TrackingContextRequestMessage:this.GR(i);break;default:B.error(`Parent received unknown data type from iframe : ${csJSON.stringify(i)}`)}}NR(t){let e=[Rt.AnalysisEvent,Rt.RecordingEvent,Rt.EmerchandisingMessage,Rt.Commands];return csArray.prototype.indexOf.call(e,t)!==-1}MR(t){let{message:e,errorCode:i,level:n}=t;switch(n){case ht.debug:B.debug(e,i);break;case ht.warn:B.warn(e,!0,i);break;case ht.implementation:B.implementation(e,i);break;case ht.error:B.error(e,i);break;case ht.critical:B.critical(e,i);break}}kR(t){for(let e of this.listeners)e.onIframeAnalysisUserEvent&&e.onIframeAnalysisUserEvent(t)}DR(t){for(let e of this.listeners)e.onIframeAnalysisBrowserEvent&&e.onIframeAnalysisBrowserEvent(t)}xR(t){for(let e of this.listeners)e.onIframeRecordingUserEvent&&e.onIframeRecordingUserEvent(t)}LR(t){for(let e of this.listeners)e.onIframeRecordingBrowserEvent&&e.onIframeRecordingBrowserEvent(t)}VR(t){for(let e of this.listeners)e.onIframeJavascriptError&&e.onIframeJavascriptError(t)}UR(t){for(let e of this.listeners)e.onIframeApiError&&e.onIframeApiError(t)}jR(t){for(let e of this.listeners)e.onIframeDetailedApiError&&e.onIframeDetailedApiError(t)}BR(t){for(let e of this.listeners)e.onIframeEmerchandisingMessage&&e.onIframeEmerchandisingMessage(t)}FR(t){for(let e of this.listeners)e.onIframeCommands&&e.onIframeCommands(t)}$R(t){for(let e of this.listeners)e.onIframeIntegrationCallback&&e.onIframeIntegrationCallback(t)}zR(t){for(let e of this.listeners)e.onIframeStaticResource&&e.onIframeStaticResource(t)}GR(t){for(let e of this.listeners)e.onTrackingContextRequestCallback&&e.onTrackingContextRequestCallback(t)}HR(t){for(let e of this.listeners)e.onIframeCustomError&&e.onIframeCustomError(t)}}return s})(),yS=(()=>{class s{setItem(t,e){window.localStorage.setItem(t,e)}getItem(t){return window.localStorage.getItem(t)}removeItem(t){window.localStorage.removeItem(t)}}return s})(),wo=["setCustomVariable"],ES=(()=>{class s{constructor(t,e){this.E=t,this.Et=e}init(){this.E.register(wo,(t,e,i,n)=>{this.Et.set(t,e,i,n)})}onAfterArtificialPageView(){this.Et.deleteNextPageOnlyCustomVariables()}onAfterNaturalPageView(){this.Et.deleteNextPageOnlyCustomVariables()}onOptout(){this.Et.removeCustomVariablesSession()}onBeforeVisitorRenewal(){this.Et.removeCustomVariablesSession(),this.Et.removeCustomVariablesPage()}}return s})(),oc=512,ac=255,ln={SESSION:["visit",2],PAGE:["page",3],NEXT_PAGE_ONLY:["nextPageOnly",4]},SS=(()=>{class s{constructor(t,e){this.M=t,this.ut=e,this.Wt={},this.He={}}set(t,e,i,n){let o,c;if((pt(t)||R(t))&&Number(t)>0&&ut(e)&&ut(i)&&!ue(e)&&!ue(i)&&this.qR(n)){let l=this.M.anonymizePII(csString(e)),u=this.M.anonymizePII(csString(i));if(o=[csString.prototype.slice.call(l,0,oc),csString.prototype.slice.call(u,0,ac)],c=i!=="",!K(n)||csArray.prototype.indexOf.call(ln.SESSION,n)>=0){let E=this.getCustomVariablesSession();c?E[t]=o:delete E[t],this.setCustomVariableSession(E)}(!K(n)||csArray.prototype.indexOf.call(ln.PAGE,n)>=0)&&(c?this.Wt[t]=o:delete this.Wt[t]),K(n)&&csArray.prototype.indexOf.call(ln.NEXT_PAGE_ONLY,n)>=0&&(c?this.He[t]=o:delete this.He[t])}else throw new Error(`Command misuse: ${wo[0]}`)}getCustomVariablesSession(){let t=this.ut.get();if(!t)return{};let e=window.csJSON.parse(t);return e!==null&&ys(e)?e:{}}setCustomVariableSession(t){this.ut.set(window.csJSON.stringify(t))}removeCustomVariablesSession(){this.ut.remove()}removeCustomVariablesPage(){this.Wt={}}getRequestParameters(){let t=this.getCustomVariablesSession();for(let i in this.He)this.He.hasOwnProperty(i)&&(this.Wt[i]=this.He[i]);for(let i in this.Wt)this.Wt.hasOwnProperty(i)&&(t[i]=this.Wt[i]);if(window.csJSON.stringify(t).length<=2)return{};let e={cvars:this.ym(t)};return this.hasCustomVariablesPage()&&(e.cvarp=this.getCustomVariablesPage()),e}deleteNextPageOnlyCustomVariables(){if(Object.keys(this.He).length>0)for(let t in this.He)this.He[t]===this.Wt[t]&&(delete this.Wt[t],delete this.He[t])}hasCustomVariablesPage(){return this.Wt&&!pn(this.Wt)}getCustomVariablesPage(){return this.ym(this.Wt)}Em(t){for(let e in t)if(t.hasOwnProperty(e)){let i=parseInt(e,10),n=t[e],o=n[0],c=n[1];(!Su(i,1,20)||o.length>oc||c.length>ac)&&delete t[e]}}ym(t){this.Em(t);let e=pn(t)?[]:t;return window.csJSON.stringify(e)}qR(t){return!K(t)||R(t)||pt(t)}getAllValidCustomVars(){let t=this.getCustomVariablesSession();for(let e in this.He)this.He.hasOwnProperty(e)&&(this.Wt[e]=this.He[e]);for(let e in this.Wt)this.Wt.hasOwnProperty(e)&&(t[e]=this.Wt[e]);return this.Em(t),t}}return s})(),ae="_cs_id",vS=(()=>{class s{constructor(t,e,i){this.f=t,this.N=e,this.X=i}onCookieToSet(t){this.gi=t}onCookieToRemove(t){this.mi=t}get(){let t;return this.f.cookielessTrackingEnabled?t=this.X.getItem(ae):t=this.N.get(ae),t?(Pp(t)||B.warn(`Invalid visitor string: ${t}`),Cp(t)):null}set(t){var e;let i=Ip(t);if(this.f.cookielessTrackingEnabled)this.X.setItem(ae,i);else{let n=new csDate(t.expires);this.N.set(ae,i,n),(e=this.gi)===null||e===void 0||e.call(this,ae,i,n)}}remove(){var t;this.f.cookielessTrackingEnabled?this.X.removeItem(ae):(this.N.delete(ae),(t=this.mi)===null||t===void 0||t.call(this,ae))}handleSubdomainChange(){if(this.f.cookielessTrackingEnabled)return;let t=this.get();t&&(t.allowSubdomains=this.f.allowSubdomains,this.f.allowSubdomains?this.N.delete(ae,_r.CURRENT_DOMAIN):this.N.delete(ae,this.N.getRootDomain()),this.set(t))}}return s})(),_S=["class","data-com.agilebits.onepassword.initial-value","data-com.onepassword.iv","data-ember-action","data-initial-value","data-previous-value","data-react-checksum","data-reactid","id","maxlength","onclick","onsubmit","style"],wS=1024,TS=1024,bS=(()=>{class s{constructor(t,e){this.pt=t,this.f=e}getEventTargetPathAndHierarchy(t,e){let i=wt(t),n={isNodeSensitive(o){return x.isMaskedElement(o)||x.isMaskedElementChild(o)},isAttributeSensitive(o,c){return x.isMaskedAttribute(o,c)},allWhitelistedAttributes:Lc(this.f.whitelistedAttributes),attributeIgnoreTokens:_S,useAnonymization:e,attrMaxLength:TS,hierarchyMaxLength:wS};return this.pt.getElementPathAndHierarchy(i,n,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules})}getEventTargetPath(t){let e=wt(t);return this.pt.getElementPath(e,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules})}getEventTargetPathAndTargetLink(t){let e=wt(t),{path:i,firstAnchorParent:n}=this.pt.getElementPathAndFirstAnchorParent(e,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules}),o=this.WR(n)?n.href:"";return{path:i,targetLink:o}}hasValidEventTarget(t){let e=wt(t);return this.pt.isValidElement(e)}getElementPath(t){return this.pt.getElementPath(t,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules})}WR(t){var e;return t!==null&&t.hasAttribute("href")&&!_n((e=t.getAttribute("href"))!==null&&e!==void 0?e:"","#")}}return s})(),AS=(()=>{class s{constructor(t,e){this.Q=t,this.YR=e}transformEvent(t,e){this.XR(t,e.event);let i=this.Q.getElementPath(t);return this.KR(i,e.event),e}XR(t,e){if(ng(e)){let i=t.getBoundingClientRect();e.x=Math.round(i.left+e.x+yt.windowOffsetX()),e.y=Math.round(i.top+e.y+yt.windowOffsetY())}}KR(t,e){cl(e)&&(e.tgt=`${t}${pi}${e.tgt}`),ig(e)&&(e.tgtHM=`${t}${pi}${e.tgtHM}`,this.YR||(e.tgtHMH=yl(e.tgtHM))),rg(e)&&(e.tgtLk=`${t}${pi}${e.tgtLk}`)}}return s})(),RS=(()=>{class s{constructor(t){this.Q=t}transformEvent(t,e){let i=this.Q.getElementPath(t);return{iframePath:e.iframePath?`${i}${pi}${e.iframePath}`:i,commands:e.commands}}}return s})(),CS=(()=>{class s{constructor(t){this.Q=t}transformEvent(t,e){if(e.products.length===0)return e;let i=this.Q.getElementPath(t),n=csArray.prototype.map.call(e.products,o=>({...o,targetPath:`${i}${pi}${o.targetPath}`}));return{...e,products:n}}}return s})(),IS=(()=>{class s{constructor(){this.JR={clientX:2,clientY:3},this.QR={clientX:1,clientY:2},this.ZR=[L.POINTER_DOWN,L.POINTER_MOVE,L.POINTER_UP],this.t0=[L.TOUCH_START,L.TOUCH_MOVE,L.TOUCH_END]}transformEvents(t,e){if(!nt.isConnected(t))return e.events=csArray.prototype.filter.call(e.events,c=>c.type!==L.VISIBILITY_CHANGE),e.events.length===0||(B.warn(`IframeRecordingEventsTransformer received event ${Rt.RecordingEvent}
        from disconnected iframe, content:${csJSON.stringify(e.events)}`),e.events=[]),e;let i=rt(t),n=null;csArray.prototype.some.call(e.events,c=>this.Sm(c)||this.vm(c))&&(n=t.getBoundingClientRect());for(let c of e.events)this.Sm(c)?this.e0(n,c):this.vm(c)&&this.s0(n,c),c.context=c.context&&c.context.length>0?`${i}/${c.context}`:`${i}`;return e}s0(t,e){this._m(this.QR,t,e)}e0(t,e){this._m(this.JR,t,e)}_m(t,e,i){i.args&&(i.args[t.clientX]=Math.round(e.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(e.top+i.args[t.clientY]))}Sm(t){return csArray.prototype.indexOf.call(this.ZR,t.type)!==-1}vm(t){return csArray.prototype.indexOf.call(this.t0,t.type)!==-1}}return s})(),PS=(()=>{class s{constructor(t){this.lu=t}start(){this.lu.onEvent(t=>this.K(t)),this.lu.start()}stop(){this.lu.stop()}K(t){let e=`Content Security Policy error. Violated directive: ${t.violatedDirective} - Source file: ${t.sourceFile}`;B.warn(e)}}return s})(),OS=(()=>{class s{constructor(){this.$t={boundElement:document,type:"securitypolicyviolation",listener:t=>this.securityPolicyViolationListener(t)}}start(){ft(this.$t)}stop(){gt(this.$t)}onEvent(t){this.L=t}i0(t){if(!t)return!1;let e=t.disposition;return R(t.sourceFile)&&csArray.prototype.some.call(s.r0,i=>csString.prototype.indexOf.call(t.sourceFile,i)>0)&&e!=="report"}securityPolicyViolationListener(t){this.i0(t)&&this.L({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})}}return s.r0=["contentsquare","cdnssl.clicktale.net"],H([N("Event handler type: securitypolicyviolation")],s.prototype,"securityPolicyViolationListener",null),s})(),NS=(()=>{class s{init(){this.wm=new PS(new OS),this.wm.start()}onOptout(){this.wm.stop()}}return s})();var cc=1/0,{toString:MS}=Object.prototype;function kS(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":MS.call(s)}var To=s=>typeof s=="symbol"||typeof s=="object"&&s!=null&&kS(s)==="[object Symbol]";function Hl(s){if(typeof s=="string"||To(s))return s;let r=`${s}`;return typeof s=="number"?r==="0"&&1/s===-cc?"-0":r:s instanceof Number&&r==="0"&&1/s.valueOf()===-cc?"-0":r}var DS=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xS=/^\w*$/;function LS(s,r){return csArray.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||To(s)?!0:xS.test(s)||!DS.test(s)||r!=null&&s in Object(r)}function bo(s,r){if(typeof s!="function"||r!=null&&typeof r!="function")throw new TypeError("Expected a function");let t=function(...e){let i=r?r.apply(this,e):e[0],{cache:n}=t;if(n.has(i))return n.get(i);let o=s.apply(this,e);return t.cache=n.set(i,o)||n,o};return t.cache=new(bo.Cache||Map),t}bo.Cache=Map;var VS=500;function US(s){let r=bo(s,t=>{let{cache:e}=r;return e.size===VS&&e.clear(),t});return r}var jS=46,HS=/\\(\\)?/g,BS=csRegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),Bl=US(s=>{let r=[];return csString.prototype.charCodeAt.call(s,0)===jS&&csArray.prototype.push.call(r,""),csString.prototype.replace.call(s,BS,(t,e,i,n)=>{let o=t;return i?o=csString.prototype.replace.call(n,HS,"$1"):e&&(o=csString.prototype.trim.call(e)),csArray.prototype.push.call(r,o),t}),r});function FS(s,r){return csArray.isArray(s)?s:LS(s,r)?[s]:Bl(s)}function $S(s,r){let t=FS(r,s),e=s,i=0,{length:n}=t;for(;e!=null&&i<n;){let o=Hl(t[i]);e=e[o],i+=1}return i&&i===n?e:void 0}function zS(s){return"iterable"in s}function Fl(s){return K(s.iterable)?R(s.iterable)||s.iterable===null:!0}function $l(s,r,t){let e=s==null?void 0:$S(s,r);return e===void 0?t:e}var GS=/\b__p \+= '';/g,qS=/\b(__p \+=) '' \+/g,WS=/(__e\(.*?\)|\b__t\)) \+\n'';/g,YS=/['\n\r\u2028\u2029\\]/g,zl=/[&<>"']/g,XS=csRegExp(zl.source),KS=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ki=/($^)/,JS={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},QS=/[()=,{}[\]/\s]/,ZS=/<%-([\s\S]+?)%>/g,tv=/<%([\s\S]+?)%>/g,Gl=/<%=([\s\S]+?)%>/g,{hasOwnProperty:lc}=Object.prototype,ev="Invalid `variable` option passed into `_.template`";function sv(s){return`\\${JS[s]}`}var iv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},rv={escape:ZS,evaluate:tv,interpolate:Gl,variable:"",imports:{_:{template:sr,escape(s){return s&&XS.test(s)?csString.prototype.replace.call(s,zl,r=>iv[r]):s!=null?s:""}}}};function sr(s,r){let t={...rv,...r},e=Object.keys(t.imports||{}),i=csArray.prototype.map.call(e,S=>t==null?void 0:t.imports[S]),n,o,c=0,l=t.interpolate||Ki,u="__p += '",E=csRegExp(`${(t.escape||Ki).source}|${l.source}|${(l===Gl?KS:Ki).source}|${(t.evaluate||Ki).source}|$`,"g"),p=`//# sourceURL=${lc.call(t,"sourceURL")?csString.prototype.replace.call(`${t.sourceURL}`,/\s/g," "):void 0}
`;s==null||csString.prototype.replace.call(s,E,(S,I,P,v,_,D)=>{let O=P||v;return u+=csString.prototype.replace.call(csString.prototype.slice.call(s,c,D),YS,sv),I&&(n=!0,u+=`' +
__e(${I}) +
'`),_&&(o=!0,u+=`';
${_};
__p += '`),O&&(u+=`' +
((__t = (${O})) == null ? '' : __t) +
'`),c=D+S.length,S}),u+=`';
`;let y=lc.call(t,"variable")&&t.variable;if(!y)u=`with (obj) {
${u}
}
`;else if(QS.test(y))throw new Error(ev);u=csString.prototype.replace.call(csString.prototype.replace.call(o?csString.prototype.replace.call(u,GS,""):u,qS,"$1"),WS,"$1;"),u=`function(${y||"obj"}) {
${y?"":`obj || (obj = {});
`}var __t, __p = ''${n?", __e = _.escape":""}${o?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`}${u}return __p
}`;let m;try{m=Function(...e,`${p}return ${u}`)(...i)}catch(S){m=S}if(m.source=u,m instanceof Error)throw m;return m}var nv=/^(\s*("(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')\s*,?)+$/,ov=/<%[\s\S]+?%>|<%-[\s\S]+?%>|<%=[\s\S]+?%>|\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/,av=/^document\.querySelector\(("(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')\)\.(textContent|value)$/;function hc(s){if(!nv.test(s)||ov.test(s))throw new Error("whitelisted function is wrongly used")}var uc={"window.location.hash.replace(":(s,r)=>{let t=csString.prototype.substring.call(s,29,s.length-1);return hc(t),sr(`\${${s}}`)(r)},"window.sessionStorage.getItem(":(s,r)=>{let t=csString.prototype.substring.call(s,30,s.length-1);return hc(t),sr(`\${${s}}`)(r)},"document.querySelector(":(s,r)=>{if(av.test(s))return sr(`\${${s}}`)(r)},"new Date().getTime()":(s,r)=>new csDate().getTime().toString()};function cv(s){let r=Ae(Object.keys(uc),t=>Pt(s,t));if(r)return uc[r]}function lv(s){return Pt(s,"'")&&Ws(s,"'")}var hv=/\$\{([\s\S]+?)\}/g,uv=s=>(r,t,e)=>{let i="";return csArray.prototype.forEach.call(csString.prototype.split.call(t,"+"),n=>{let o=csString.prototype.trim.call(n),c=$l(s,o);if(c===void 0)if(lv(o))c=csString.prototype.substring.call(o,1,o.length-1);else{let l=cv(o);if(l&&(c=l(o,s)),c===void 0)throw new Error("undefined not allowed")}i+=c}),i};function qs(s,r){try{return csString.prototype.replace.call(s,hv,uv(r))}catch{return null}}function jn(s,r){let t={};for(let e of Object.keys(s)){let i=s[e];if(R(i)){let n=qs(i,r);if(n===null)return null;t[e]=n}else t[e]=i}return t}function Hn(s,r){let t=csArray.prototype.join.call(csArray.prototype.filter.call(csArray.prototype.map.call(csString.prototype.split.call(s,","),e=>qs(e,r)),e=>e!==null&&It(e)),",");return It(t)?t:null}function dv(s){return csArray.isArray(s)?csArray.prototype.map.call(s,Hl):To(s)?[s]:csArray.from(Bl(s))}function pv(s,r){try{let e=/^values\(([a-zA-Z0-9_$[\].]+)\)\[\?([a-zA-Z0-9_$]+)\]$/.exec(s);if(!e)return null;let i=e[1],n=e[2],o=$l(r,dv(i));if(typeof o!="object"||o===null)return null;let c=[];return csArray.prototype.forEach.call(Object.keys(o),l=>{let u=o[l];typeof u=="object"&&u!==null&&!csArray.isArray(u)&&n in u&&csArray.prototype.push.call(c,u)}),c}catch{return null}}function fv(s,r){let e=/^\[([0-9]+):([0-9+])\]$/.exec(s);if(!e)return null;let i=parseInt(e[1],10),n=parseInt(e[2],10);return n<=i||n>r.length?null:csArray.prototype.slice.call(r,i,n)}function gv(s,r){let t=csString.prototype.split.call(s,"|");if(t.length>2)return null;let e=pv(csString.prototype.trim.call(t[0]),r);return t.length===2?e===null?null:fv(csString.prototype.trim.call(t[1]),e):e}var hn=(()=>{let s;return function(r){r.AND="AND",r.OR="OR"}(s||(s={})),s})(),ie=(()=>{let s;return function(r){r.STARTS_WITH="startsWith",r.EQUALS="equals",r.NOT_EQUALS="notEquals",r.CONTAINS="contains",r.NOT_CONTAINS="notContains",r.MATCHES="matches",r.NOT_MATCHES="notMatches",r.EXIST="exist",r.NOT_EXIST="notExist"}(s||(s={})),s})();function ql(s,r){return mv(s.operator,vv(s.args,r))}function mv(s,r){switch(s){case ie.EXIST:case ie.NOT_EXIST:return yv(s,r);default:return Ev(s,r)}}function yv(s,r){let[t]=r;if(!It(t))return!1;switch(s){case ie.EXIST:return window.csquerySelector[document.nodeType].call(document,t)!==null;case ie.NOT_EXIST:return window.csquerySelector[document.nodeType].call(document,t)===null;default:return!1}}function Ev(s,r){let[t,e]=r;if(!(s in hn)&&!(R(t)&&R(e)))return!1;switch(s){case hn.AND:return!!csArray.prototype.reduce.call(r,(n,o)=>n&&o);case hn.OR:return!!csArray.prototype.reduce.call(r,(n,o)=>n||o);case ie.STARTS_WITH:return Pt(t,e);case ie.EQUALS:return t===e;case ie.NOT_EQUALS:return t!==e;case ie.CONTAINS:return csString.prototype.indexOf.call(t,e)>-1;case ie.NOT_CONTAINS:return csString.prototype.indexOf.call(t,e)===-1;case ie.MATCHES:{let n=dc(e);return n!==null&&n.test(t)}case ie.NOT_MATCHES:{let n=dc(e);return n!==null&&!n.test(t)}default:return!1}}function Sv(s){return!!(s&&s.operator&&s.args)}function vv(s,r){return csArray.prototype.map.call(s,t=>Sv(t)?ql(t,r):R(t)?qs(t,r):t)}function dc(s){let r=/^\/(.*)\/([gimy]*)$/.exec(s),t=null;if(r){let[,e,i]=r;try{t=new csRegExp(e,i)}catch{}}else try{t=new csRegExp(s)}catch{}return t}function Ao(s){switch(s){case"no decoding":return null;case"decode once":return{decodeURI:!0};case"decode multiple times":return{decodeURIDeep:!0};default:return null}}function Ro(s){switch(s==null?void 0:s[0]){case"on next pageview only":return{lifespan:"onNextPageviewOnly"};default:return null}}var St=(()=>{class s{constructor(t,e){this.commandsService=t,this.args=e}}return s})(),Mi=(()=>{class s extends St{}return s})(),Wl=(()=>{class s extends St{validateArgs(t){if(W(t)){let e=K(t.path)?R(t.path):!0,i=K(t.decodeURI)?R(t.decodeURI):!0,n=K(t.lifespan)?csArray.isArray(t.lifespan):!0;return e&&i&&n}return!1}execute(t){if(!t.path)this.so([]);else{let e=[t.path],i=Ao(t.decodeURI),n=Ro(t.lifespan),o={...i,...n};Object.keys(o).length&&e.push(o),this.so(e)}}so(t){this.commandsService.applyFromImplementation(Tl[0],t,"ArtificialPageviewTemplate")}}return s})(),_v=(()=>{class s extends Mi{validateArgs(t){return W(t)?R(t.message)&&csArray.isArray(t.attributes):!1}execute(t,e){let i=qs(t.message,e);if(!i)return;let n={};for(let o of t.attributes){let c=qs(o.value,e);c!==null&&(n[o.key]=c)}this.commandsService.applyFromImplementation(jg[0],[i,n],"CustomErrorTemplate")}}return s})(),wv=(()=>{class s extends St{validateArgs(t){if(W(t)){let e=Fl(t),i=csArray.isArray(t.scope)?bc(t.scope,n=>R(n)):!0;return e&&i&&pt(t.index)&&R(t.name)&&R(t.value)}return!1}execute(t){this.commandsService.applyFromImplementation(wo[0],[t.index,t.name,t.value,t.scope[0]],"CustomVariableTemplate")}}return s})(),Tv=(()=>{class s extends St{validateArgs(t){return W(t)?R(t.selector):!1}execute(t){this.commandsService.applyFromImplementation(kl[0],[t.selector],"DataCsEncryptTemplate")}}return s})(),bv="data-cs-override-id",Av=(()=>{class s extends St{validateArgs(t){if(W(t)){let e=ut(t.value)?R(t.value):!0;return R(t.selector)&&e}return!1}execute(t){var e;if(!It(t.selector))return;let i=window.csquerySelector[document.nodeType].call(document,t.selector);i&&i.setAttribute(bv,(e=t.value)!==null&&e!==void 0?e:"")}}return s})(),Rv=20,Cv=(()=>{class s extends Mi{validateArgs(t){return W(t)?Fl(t)&&R(t.key)&&R(t.value)&&R(t.type):!1}execute(t,e){let i=jn(t,e);i!==null?this.so(i):this.o0(t,e)()}o0(t,e){return()=>{let i=0,n=window.csSetInterval(()=>{i+=1;let o=jn(t,e);if(o!==null){window.csClearInterval(n),n=void 0,i=0,this.so(o);return}i>=Rv&&(window.csClearInterval(n),n=void 0,i=0)},100)}}so(t){let e=t.value;if(t.type==="Integer"){let i=Number.parseInt(t.value,10);Number.isNaN(i)||(e=i)}this.commandsService.applyFromImplementation(lo[0],[{key:t.key,value:e}],"DynamicVariableTemplate")}}return s})(),Iv=(()=>{class s extends St{validateArgs(t){return W(t)?R(t.transactionId)&&pt(t.revenue)&&R(t.currency)&&R(t.name)&&R(t.sku)&&R(t.category)&&pt(t.price)&&pt(t.quantity):!1}execute(t){this.a0({id:t.transactionId,revenue:t.revenue,currency:t.currency}),this.c0({id:t.transactionId,name:t.name,sku:t.sku,category:t.category,price:t.price,quantity:t.quantity}),this.$a()}a0(t){this.commandsService.applyFromImplementation(ho[0],[t],"EcTransactionAllTemplate")}c0(t){this.commandsService.applyFromImplementation(Ir[0],[t],"EcTransactionAllTemplate")}$a(){this.commandsService.applyFromImplementation(uo[0],[],"EcTransactionAllTemplate")}}return s})(),Pv=(()=>{class s extends St{validateArgs(t){return W(t)?R(t.id)&&pt(t.revenue)&&R(t.currency):!1}execute(t){this.commandsService.applyFromImplementation(ho[0],[t],"EcTransactionCreateTemplate")}}return s})(),Ov=(()=>{class s extends St{validateArgs(t){return W(t)?R(t.id)&&R(t.name)&&R(t.sku)&&R(t.category)&&pt(t.price)&&pt(t.quantity):!1}execute(t){this.commandsService.applyFromImplementation(Ir[0],[t],"EcTransactionItemsAddTemplate")}}return s})(),Nv=(()=>{class s extends St{validateArgs(t){return!!W(t)}execute(){this.commandsService.applyFromImplementation(uo[0],[],"EcTransactionSendTemplate")}}return s})(),Mv=(()=>{class s extends Mi{validateArgs(t){return W(t)?ut(t)&&R(t.selector):!1}execute(t,e){if(!ut(t)||!R(t==null?void 0:t.selector))return;let i=Hn(t.selector,e);i!==null&&this.commandsService.applyFromImplementation(Dl[0],[i],"ElementUnmaskingTemplate")}}return s})(),kv=(()=>{class s extends St{validateArgs(t){return W(t)?R(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(Pi[0],[`@ETP@${t.eventName}`],"EventTriggerRecordingPageTemplate")}}return s})(),Dv=(()=>{class s extends St{validateArgs(t){return W(t)?R(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(Pi[0],[`@ETS@${t.eventName}`],"EventTriggerRecordingSessionTemplate")}}return s})(),xv=(()=>{class s extends St{validateArgs(t){return W(t)?R(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(fo[0],[t.eventName],"PageEventTemplate")}}return s})(),Lv=(()=>{class s extends Mi{validateArgs(t){if(W(t)){let e=csArray.isArray(t.cssSelectors),i=csArray.isArray(t.attributes);return e&&i}return!1}execute(t,e){let i=csArray.prototype.filter.call(csArray.prototype.map.call(t.cssSelectors,c=>Hn(c,e)),c=>!!c),n=csArray.prototype.filter.call(csArray.prototype.map.call(t.attributes,c=>{let l=qs(c.attrName,e),u=Hn(c.selector,e);return{attrName:l,selector:u}}),c=>!!c.attrName&&!!c.selector),o={PIISelectors:[...i],Attributes:[...n]};this.commandsService.applyFromImplementation(So[0],[o],"PIIMaskingTemplate")}}return s})(),Vv=(()=>{class s extends St{validateArgs(t){return W(t)?R(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(Pi[0],[`${t.eventName}`],"RecordingEventTriggerTemplate")}}return s})(),Uv=(()=>{class s extends St{validateArgs(t){return W(t)?R(t.path):!1}execute(t){let e=[t.path],i=Ao(t.decodeURI),n=Ro(t.lifespan),o={...i,...n};Object.keys(o).length&&e.push(o),this.commandsService.applyFromImplementation(xn[0],e,"SetPathTemplate")}}return s})(),jv=(()=>{class s extends St{validateArgs(t){return W(t)?R(t.query):!1}execute(t){let e=[t.query],i=Ao(t.decodeURI),n=Ro(t.lifespan),o={...i,...n};Object.keys(o).length&&e.push(o),this.commandsService.applyFromImplementation(Ln[0],e,"SetQueryTemplate")}}return s})(),Hv=(()=>{class s extends St{validateArgs(t){return!!W(t)}execute(){this.commandsService.applyFromImplementation(Nl[0],[],"SrmOnlineAssetsTemplate")}}return s})(),Bv=(()=>{class s extends St{validateArgs(t){return W(t)?R(t.status)&&R(t.selector):!1}execute(t){if(!It(t.selector))return;let e=window.csquerySelector[document.nodeType].call(document,t.selector);e&&this.commandsService.applyFromImplementation(co[0],[t.status,e],"SubmitTemplate")}}return s})(),qt=(()=>{class s{onEvent(t){this.onEventCallback=t}constructor(t,e,i){this.commandsService=t,this.condition=i,this.isStarted=!1,this.Tm=!1,this.args=e}start(){this.Tm||(this.onInit(),this.Tm=!0),this.isStarted||(this.onStart(),this.isStarted=!0)}stop(){this.isStarted&&(this.onStop(),this.isStarted=!1)}}return H([N()],s.prototype,"start",null),H([N()],s.prototype,"stop",null),s})(),pc="once per pageview",Fv="always",$v=(()=>{class s extends qt{constructor(){super(...arguments),this.yt=!0}validateArgs(t){if(W(t)){let e=R(t.selector),i=t.frequency?t.frequency===pc||t.frequency===Fv:!0;return e&&i}return!1}onInit(){if(!It(this.args.selector)){this.yt=!1;return}this.io=this.args.frequency?this.args.frequency===pc:!0,this.G=new re((t,e)=>this.w(t,e))}onStart(){this.yt&&this.G.observe(this.args.selector)}onStop(){this.yt&&(this.G.processPendingMutations(),this.G.disconnect())}w(t,e){e==="added"&&(this.io?(this.stop(),this.onEventCallback({element:t[0]})):new Set(t).forEach(i=>this.onEventCallback({element:i})))}}return s})(),zv=(()=>{class s extends qt{constructor(){super(...arguments),this.yt=!0,this.bm=!1}validateArgs(t){return W(t)?R(t.selector):!1}onInit(){if(!It(this.args.selector)){this.yt=!1;return}this.G=new re((t,e)=>{this.w(t,e)})}onStart(){this.yt&&(this.G.observe(this.args.selector),this.bm=!0)}onStop(){this.yt&&(this.G.processPendingMutations(),this.G.disconnect())}w(t,e){this.bm?e==="added"&&new Set(t).forEach(i=>this.onEventCallback({element:i})):this.onEventCallback({element:t[0]})}}return s})(),Gv=(()=>{class s extends qt{constructor(){super(...arguments),this.yt=!0}validateArgs(t){return W(t)?R(t.selector):!1}onInit(){if(!It(this.args.selector)){this.yt=!1;return}this.j=new re(t=>this.l0(t)),this.D=new ge(t=>this.h0(t))}onStart(){this.yt&&(this.za=csSymbol("MatchingElement"),this.j.observe(this.args.selector),this.D.observe())}onStop(){this.yt&&(this.j.processPendingMutations(),this.j.disconnect(),this.D.disconnect())}l0(t){new Set(t).forEach(e=>this.u0(e))}h0(t){let e=Wn(t,n=>n.removedNodes),i=[];for(let n of e)csArray.prototype.push.call(i,...this.d0(n));new Set(i).forEach(n=>this.onEventCallback({element:n}))}u0(t){t[this.za]=!0}d0(t){let e=[];return Zt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{i[this.za]&&(nt.isConnected(i)?Gt.call(i,this.args.selector)||delete i[this.za]:delete i[this.za],csArray.prototype.push.call(e,i))}),e}}return s})(),qv=(()=>{class s{static readyStateChangeListener(t){csArray.prototype.forEach.call(ns(s.callbacks),e=>e(t))}static gh(t){s.callbacks.has(t)||(s.callbacks.add(t),s.callbacks.size===1&&ft(s.eventHandler,!1))}static mh(t){s.callbacks.delete(t),s.callbacks.size===0&&gt(s.eventHandler,!1)}constructor(t){this.w=t}observe(){s.gh(this.w)}disconnect(){s.mh(this.w)}}return s.callbacks=new Set,s.eventHandler={boundElement:tt.document,type:"readystatechange",listener:s.readyStateChangeListener},Z([N("readyStateChangeListener"),at()],s,"readyStateChangeListener",null),s})(),Wv=(()=>{class s extends qt{constructor(){super(...arguments),this.du={state:"Any"}}validateArgs(t){var e;return W(t)&&R(t.state)||(B.implementation(`PageStateTrigger has wrong argument: ${(e=this.args)===null||e===void 0?void 0:e.state}, fallback to default config.`),this.args=this.du),!0}onInit(){this.Pt=this.args.state.toLowerCase(),this.G=new qv(()=>{this.Am(this.Pt,document.readyState)&&(this.onEventCallback(),this.G.disconnect())})}onStart(){this.Am(this.Pt,document.readyState)?this.onEventCallback():this.G.observe()}onStop(){this.G.disconnect()}Am(t,e){let i=s.Rm[e];return s.Rm[t]<=i}}return s.Rm={complete:3,interactive:2,loading:1,any:0},s})(),Yv=(()=>{class s extends qt{validateArgs(t){return!!W(t)}p0(){this.isStarted&&this.onEventCallback()}onInit(){this.commandsService.applyFromImplementation(_l[0],[()=>this.p0()],"AfterPageViewTrigger")}onStart(){}onStop(){}}return s})(),Xv=(()=>{class s extends qt{constructor(){super(...arguments),this.pu=!1,this.yt=!0,this.Xs=!0,this.oi={boundElement:document,type:"click",listener:t=>{if(this.pu){this.pu=!1;return}this.onClickOrTap(t)}},this.f0=(t,e)=>{t.type===_t.TAP&&(this.pu=!0,this.onClickOrTap(e))}}validateArgs(t){return W(t)?R(t.selector):!1}onClickOrTap({target:t}){if(ut(t)&&Ie(t)){let e=Gs(t,this.args.selector);e&&this.onEventCallback({element:e})}}onInit(){if(!It(this.args.selector)){this.yt=!1;return}this.Ln=new Cl(this.f0)}onStart(){var t;this.yt&&(ft(this.oi,this.Xs),(t=this.Ln)===null||t===void 0||t.observe())}onStop(){var t;this.yt&&(gt(this.oi,this.Xs),(t=this.Ln)===null||t===void 0||t.disconnect())}}return H([N("onClickOrTap"),at()],s.prototype,"onClickOrTap",null),s})(),Kv=(()=>{class s{static g0(){var t,e,i,n;if("history"in window){let o=Object.getOwnPropertyDescriptors(history);if(!((t=o.pushState)===null||t===void 0)&&t.writable&&(!((e=o.replaceState)===null||e===void 0)&&e.writable))return history}if(History.prototype){let o=Object.getOwnPropertyDescriptors(History.prototype);if(!((i=o.pushState)===null||i===void 0)&&i.writable&&(!((n=o.replaceState)===null||n===void 0)&&n.writable))return History.prototype}et.warn("Unable to override pushState, replaceState",!0,"HistoryChangeObserver")}static Yc(){let t=s.g0();s.ro===null&&ue(t==null?void 0:t.pushState)&&(s.ro=we({target:t,methodName:"pushState",hook:({args:e})=>{s.Cm("pushstate",e)}})),s.no===null&&ue(t==null?void 0:t.replaceState)&&(s.no=we({target:t,methodName:"replaceState",hook:({args:e})=>{s.Cm("replacestate",e)}}))}static jr(t){var e,i;s.Te.add(t),s.Te.size===1&&((s.ro===null||s.no===null)&&s.Yc(),(e=s.ro)===null||e===void 0||e.activate(),(i=s.no)===null||i===void 0||i.activate(),ft(s.Im),ft(s.Pm))}static Br(t){var e,i;s.Te.delete(t),s.Te.size===0&&((e=s.ro)===null||e===void 0||e.deactivate(),(i=s.no)===null||i===void 0||i.deactivate(),gt(s.Im),gt(s.Pm))}static Cm(t,e){let i={type:t,state:e[0]};R(e[2])&&(i.url=e[2]),s.Sr(i)}static popstateListener(t){s.Sr({type:"popstate",state:t.state})}static hashchangeListener(t){s.Sr({type:"hashchange",state:null,url:t.newURL})}static Sr(t){csArray.prototype.forEach.call(ns(s.Te),e=>{e(t)})}constructor(t){this.w=t}observe(){s.jr(this.w)}disconnect(){s.Br(this.w)}}return s.ro=null,s.no=null,s.Im={boundElement:tt,type:"popstate",listener:r=>s.popstateListener(r)},s.Pm={boundElement:tt,type:"hashchange",listener:r=>s.hashchangeListener(r)},s.Te=new Set,Z([N("popstateListener"),at()],s,"popstateListener",null),Z([N("hashchangeListener"),at()],s,"hashchangeListener",null),s})(),Jv=(()=>{class s extends qt{validateArgs(t){if(W(t)){let e=R(t.useDebounce),i=t.useDebounce==="yes"?pt(t==null?void 0:t.window):!0,n=R(t.listeners);return e&&i&&n}return!1}onInit(){this.args.useDebounce==="yes"?this.Zt=Fs(()=>{this.onEventCallback()},this.args.window):this.Zt=this.onEventCallback,this.G=new Kv(t=>this.m0(t))}Om(){return window.location.href}m0(t){let e=t.type==="replacestate"&&this.args.listeners.indexOf("replaceState")===-1,i=t.type==="hashchange"&&this.args.listeners.indexOf("hashchange")===-1;if(e||i)return;let n=this.Om();this.Nm!==n&&(this.Nm=n,this.Zt())}onStart(){this.Nm=this.Om(),this.G.observe()}onStop(){this.G.disconnect()}}return s})(),Qv=(()=>{class s extends qt{constructor(){super(...arguments),this.yt=!0,this.Xs=!0,this.oi={boundElement:document,type:"submit",listener:t=>this.submitListener(t)}}validateArgs(t){return W(t)?R(t.selector):!1}submitListener({target:t}){ut(t)&&Ie(t)&&Gt.call(t,this.args.selector)&&this.onEventCallback({element:t})}onInit(){It(this.args.selector)||(this.yt=!1)}onStart(){this.yt&&ft(this.oi,this.Xs)}onStop(){this.yt&&gt(this.oi,this.Xs)}}return H([N("submitListener"),at()],s.prototype,"submitListener",null),s})(),Zv=(()=>{class s extends qt{constructor(){super(...arguments),this.yt=!0,this.Mm={boundElement:document,type:"mouseover",listener:t=>this.mouseoverListener(t)},this.km={boundElement:document,type:"mouseleave",listener:t=>this.mouseleaveListener(t)}}validateArgs(t){return W(t)?R(t.selector):!1}onInit(){It(this.args.selector)||(this.yt=!1)}mouseleaveListener({target:t}){ut(t)&&Ie(t)&&t[this.Ga]&&delete t[this.Ga]}mouseoverListener({target:t}){if(ut(t)&&Ie(t)){let e=Gs(t,this.args.selector);e!==null&&!e[this.Ga]&&(e[this.Ga]=!0,this.onEventCallback({element:e}))}}onStart(){this.yt&&(this.Ga=csSymbol("Hovered"),ft(this.km,!0),ft(this.Mm,!0))}onStop(){this.yt&&(gt(this.Mm),gt(this.km))}}return H([N("mouseleaveListener"),at()],s.prototype,"mouseleaveListener",null),H([N("mouseoverListener"),at()],s.prototype,"mouseoverListener",null),s})(),t_=(()=>{class s extends qt{constructor(){super(...arguments),this.oi={boundElement:window,type:"hashchange",listener:t=>this.hashChangedListener(t)}}validateArgs(t){return!!W(t)}hashChangedListener(t){t.newURL&&t.newURL===t.oldURL||this.onEventCallback()}onInit(){}onStart(){ft(this.oi)}onStop(){gt(this.oi)}}return H([N("hashChangedListener"),at()],s.prototype,"hashChangedListener",null),s})(),e_=(()=>{class s extends qt{constructor(){super(...arguments),this.qa=!0}validateArgs(t){return W(t)?R(t.selector):!1}onInit(){if(!It(this.args.selector)||!gr.isSupported()){this.qa=!1;return}this.Ct=new gr({delay:0,trackOnce:!0,reobserve:!0}),this.j=new re(t=>this.fu(t),{closest:!0})}fu(t){for(let e of t)this.Ct.observe(e)}gu(t,e){if(this.isStarted&&e===ui.VisibleInViewPort){let i=Gs(t,this.args.selector);i&&(this.onEventCallback({element:i}),this.stop(),this.qa=!1)}}onStart(){this.qa&&(this.Ct.start((t,e)=>this.gu(t,e)),this.j.observe(this.args.selector))}onStop(){this.qa&&(this.Ct.stop(),this.j.disconnect())}}return s})(),s_=(()=>{class s extends St{validateArgs(t){return W(t)?R(t.url):!1}execute(t){this.commandsService.applyFromImplementation(Ug[0],[t.url],"ApiErrorsMaskUrlTemplate")}}return s})(),i_=(()=>{class s extends St{validateArgs(t){return W(t)?R(t.maskingPattern):!1}execute(t){this.commandsService.applyFromImplementation(bE[0],[t.maskingPattern],"NetworkRequestMaskUrlTemplate")}}return s})(),fc="once per pageview",r_="always",n_=(()=>{class s extends qt{constructor(){super(...arguments),this.mu=!1,this.Ge=!1,this.io=!0}validateArgs(t){if(W(t)){let e=R(t.selector),i=t.frequency?t.frequency===fc||t.frequency===r_:!0;return e&&i}return!1}onInit(){gr.isSupported()&&(this.Ge=!0,this.io=this.args.frequency?this.args.frequency===fc:!0,this.j=new re((t,e)=>{if(e==="initial")for(let i of t)nt.isVisibleInViewportInForeground(i)&&(i[this.yu]=!0);this.fu(t)},{closest:!0}),this.Ct=new gr({delay:0,trackOnce:!1,reobserve:!0,allowSameMatch:!0}))}onStart(){!this.Ge||this.isStarted||(this.yu=csSymbol("skipElement"),this.mu=!1,this.Ct.start((t,e)=>this.gu(t,e)),this.j.observe(this.args.selector))}onStop(){!this.Ge||!this.isStarted||(this.j.disconnect(),this.Ct.stop())}gu(t,e){if(this.isStarted&&e===ui.VisibleInViewPort){let i=t.closest(this.args.selector);if(i){if(i[this.yu]){delete i[this.yu];return}this.io&&this.stop(),(!this.io||!this.mu)&&(this.mu=!0,this.onEventCallback({element:i}))}}}fu(t){for(let e of t)this.Ct.observe(e)}}return s})(),Bn=(()=>{class s extends qt{constructor(){super(...arguments),this.du={pageviewTypes:["natural","artificial"]}}validateArgs(t){var e;return W(t)&&ys(t)&&csArray.isArray(t.pageviewTypes)&&bc(t.pageviewTypes,n=>R(n))||(B.implementation(`BeforePageViewTrigger has wrong argument: ${(e=this.args)===null||e===void 0?void 0:e.pageviewTypes}, fallback to default config.`),this.args=this.du),!0}onInit(){this.y0=this.args.pageviewTypes}onPageView(t){this.isStarted&&csArray.prototype.indexOf.call(this.y0,t)!==-1&&this.onEventCallback()}onStart(){}onStop(){}}return s})(),o_=(()=>{class s extends St{constructor(){super(...arguments),this.Eu=!1}validateArgs(t){return W(t)&&R(t.type)&&R(t.urls)&&(t.type==="allow"||t.type==="block")&&csString.prototype.trim.call(t.urls).length>0?(this.Eu=!1,!0):(B.implementation(`BlockAllowListForSRTemplate has wrong argument: ${t}, fallback to default config.`),this.Eu=!0,!0)}execute(t){let e="";this.Eu?e=Ll:e=this.E0(t.urls,t.type),this.commandsService.applyFromImplementation(Vl[0],[e],"BlockAllowListForSRTemplate")}E0(t,e){let i=e==="allow"?"?!":"";return i+=csArray.prototype.join.call(csArray.prototype.map.call(csString.prototype.split.call(t,","),n=>`.*${csString.prototype.trim.call(n)}`),"|"),`^(${i}).*?`}}return s})(),a_=(()=>{class s{constructor(t){this.E=t,this.S0={ApiErrorsMaskUrl:s_,NetworkRequestMaskUrls:i_,ArtificialPageview:Wl,BlockAllowListForSr:o_,CustomError:_v,CustomVariable:wv,DataCsEncrypt:Tv,DataCsOverride:Av,DynamicVariable:Cv,EcTransactionAll:Iv,EcTransactionCreate:Pv,EcTransactionItemsAdd:Ov,EcTransactionSend:Nv,ElementUnmasking:Mv,EventTriggerRecordingPage:kv,EventTriggerRecordingSession:Dv,PageEvent:xv,PiiMasking:Lv,RecordingEventTrigger:Vv,SetPath:Uv,SetQuery:jv,SrmOnlineAssets:Hv,Submit:Bv},this.Pr={AfterPageView:Yv,ElementAdded:$v,ElementBecomesVisible:n_,ElementExist:zv,ElementRemoved:Gv,ElementVisibility:e_,ElementClick:Xv,FormSubmit:Qv,HashChange:t_,HistoryChange:Jv,Mouseover:Zv,PageState:Wv,BeforePageView:Bn}}v0(t){let e=this.S0[t.name];return e?new e(this.E,t.args):(B.error(`Implementations: template ${t.name} does not exist`),null)}_0(t){let e=this.Pr[t.name];return e?new e(this.E,t.args,t.condition):(B.error(`Implementations: trigger ${t.name} does not exist`),null)}parse(t){let e=[];for(let{triggers:i,template:n}of t){let o=this.v0(n);if(!o)continue;if(!o.validateArgs(o.args)){B.implementation(`${n.name} has wrong argument.`);continue}for(let l of i){let u=this._0(l);if(!u)continue;if(!u.validateArgs(u.args)){B.implementation(`${l.name} has wrong argument.`);continue}csArray.prototype.push.call(e,{name:`${l.name}_${n.name}`,trigger:u,template:o})}}return e}}return s})(),c_=(()=>{class s{constructor(t,e,i){this.w0=t,this.O=i,this.Ne={window,document,location,cookies:{}},this.Pr=new Set,this.T0=new a_(e)}init(){Object.defineProperty(this.Ne,"cookies",{get:()=>this.b0()});let t=this.T0.parse(this.w0);for(let{name:e,trigger:i,template:n}of t)i instanceof Bn&&n instanceof Wl||(this.Pr.add(i),i.onEvent(o=>{this.onTriggerEvent(o,n),q.counters.CSTCSnippetUsed.count(e)}))}start(t=!1){this.Pr.forEach(e=>{e.condition&&!ql(e.condition,this.Ne)||(t?this.O.schedule(()=>{e.start()}):e.start())})}stop(){this.Pr.forEach(t=>{t.stop()})}onBeforePageView(t){this.Pr.forEach(e=>{if(e instanceof Bn){e.onPageView(t);return}})}onTriggerEvent(t,e){let i=this.A0(t),n={...this.Ne,...i},o=[];if(zS(e.args)&&R(e.args.iterable)&&e.args.iterable.length>0){let c=gv(e.args.iterable,n);if(ut(c)){let l=csArray.prototype.map.call(c,u=>({...n,$:u}));csArray.prototype.push.call(o,...l)}}else csArray.prototype.push.call(o,n);if(e instanceof Mi){for(let c of o)e.execute(e.args,c);return}for(let c of o){let l=jn(e.args,c);l&&e.execute(l)}}b0(){let t;try{t=document.cookie}catch{t=""}return csArray.prototype.reduce.call(csString.prototype.split.call(t,"; "),(e,i)=>{let[n,o]=csString.prototype.split.call(i,"=");return o!==void 0&&(e[n]=o),e},{})}A0(t){let e={...t};for(let i in e)ct(e[i])&&(x.isMaskedElement(e[i])||x.isMaskedElementChild(e[i]))&&delete e[i];return e}}return H([Tt("implementationsService.start")],s.prototype,"start",null),H([N()],s.prototype,"onTriggerEvent",null),s})(),l_=(()=>{class s{constructor(t,e,i){this.Is=new c_(t,e,i)}init(){this.Is.init()}onInitTracking(){this.Is.start(!0)}onOptout(){this.Is.stop()}onBeforeSessionRenewal(){this.Is.stop(),this.Is.start()}onBeforeArtificialPageView(){this.Is.stop(),this.Is.start(),this.Is.onBeforePageView("artificial")}onBeforeNaturalPageView(){this.Is.onBeforePageView("natural")}}return s})(),Yl=(()=>{class s{constructor(t){this.configuration=t}}return s})(),h_=(()=>{class s extends Yl{constructor(t,e,i){super(t),this.configuration=t,this.oo=e,this.S=i,this.R0=V.RECORDING_GLOBAL_SAMPLING}refreshQuota(t){this.Dm=t,this.ao=void 0,this.C0()}init(t){this.I0();let e=Et.get(se);e!==null&&io(e)?t(this.canCollect(xp(e))):this.refreshQuota(i=>{t(i!==V.QUOTA_REACHED)})}sanitizeSessionCollectState(t){return t}canCollect(t){return t!==null&&t.collectState!==V.QUOTA_REACHED}computeInitialCollectState(t){return this.ao?(this.S.emitCollectStateChange(this.ao,this.configuration.malkaEtrEnabled?$t.ETR_ON:$t.ETR_OFF),this.ao):(B.warn("Quota file error computeInitialCollectState() called before quota answered"),V.QUOTA_REACHED)}getEligibleCollectState(t){return t.collectState===V.QUOTA_REACHED?V.QUOTA_REACHED:!vi.isRecordingSupported()&&this.isReplayRecorded(t)?V.ANALYTICS_ONLY:t.collectState===V.RECORDING_RULES_TARGETING?V.RECORDING_RULES_TARGETING:t.collectState===V.ANALYTICS_ONLY_RULES_TARGETING?V.ANALYTICS_ONLY_RULES_TARGETING:t.collectState===V.RECORDING_GLOBAL_SAMPLING?V.RECORDING_GLOBAL_SAMPLING:V.ANALYTICS_ONLY}isReplayRecorded(t){return t.collectState===V.RECORDING_GLOBAL_SAMPLING||t.collectState===V.RECORDING_RULES_TARGETING}getInitialCollectState(){return this.ao||V.QUOTA_REACHED}computeInitialCollectStateFromRecordingConsentGranted(t){return V.ANALYTICS_ONLY}co(t){this.ao=t,this.Dm&&this.Dm(t)}I0(){this.oo.onError(t=>this.quotaServiceErrorHandler(`HTTP:${t.status} - fetching quota file for pid: ${this.configuration.projectId}`)),this.oo.onTimeout(()=>this.quotaServiceErrorHandler("timeout")),this.oo.onLoad(t=>this.quotaFileHandler(t))}C0(){this.oo.isInProgress()||this.oo.send()}quotaFileHandler(t){var e;if(!(!((e=t==null?void 0:t.quotas)===null||e===void 0)&&e.length)){this.quotaServiceErrorHandler("Quota types missing from config file");return}this.P0(t)}quotaServiceErrorHandler(t){let e=`Quota error - ${t}`;B.warn(e),this.co(this.R0)}P0(t){let e=!1,i=!1;for(let n of t.quotas)n.quotaType==="ANALYTICS"&&n.value?e=!0:n.quotaType==="RECORDING"&&n.value&&Es.boolean(Math.round(n.value*100))&&(i=!0);!e&&i?this.quotaServiceErrorHandler(`Quota types impossible: replay without analytics - ${csJSON.stringify(t)}`):e&&i?vi.isRecordingSupported()?this.co(V.RECORDING_GLOBAL_SAMPLING):this.co(V.ANALYTICS_ONLY):e&&!i?this.co(V.ANALYTICS_ONLY):this.co(V.QUOTA_REACHED)}getRecordingConsentWithdrawn(){return V.ANALYTICS_ONLY}}return H([N("Quota File: quotaFileHandler")],s.prototype,"quotaFileHandler",null),H([N("Quota File: onerror")],s.prototype,"quotaServiceErrorHandler",null),s})(),u_=(()=>{class s extends Yl{constructor(t,e,i,n,o){super(t),this.configuration=t,this.S=e,this.Kh=i,this.A=n,this.Su=o,this.vu=!1}refreshQuota(){}canCollect(t){return!0}init(){this.configuration.malkaUrlEnabled&&this.configuration.hasRecordingUrlRules()&&(this.vu=!0,this.Su.setRegexRules(this.configuration.recordingUrlRules))}sanitizeSessionCollectState(t){return(t.collectState===V.QUOTA_REACHED||t.collectState===V.RECORDING_RULES_TARGETING||t.collectState===V.RECORDING_TEMPORARILY)&&(t.collectState=V.ANALYTICS_ONLY),t}computeInitialCollectState(){return ts.isReplayConsentNeeded(this.configuration)?V.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED:this.Ba()}computeInitialCollectStateFromRecordingConsentGranted(){return this.Ba()}Ba(){if(!vi.isRecordingSupported())return V.ANALYTICS_ONLY;let t=V.ANALYTICS_ONLY,e=$t.ETR_OFF;return Es.percentage()<this.configuration.replayRecordingRate||this.Kh.isForceReplayRecorded()?t=V.RECORDING_GLOBAL_SAMPLING:this.vu&&this.Su.evaluateUrl(this.A.getAnonymizedUrl())&&(t=V.RECORDING_URL_SAMPLING),this.configuration.malkaEtrEnabled&&(e=$t.ETR_ON),this.S.emitCollectStateChange(t,e),t}getEligibleCollectState(t){if(!vi.isRecordingSupported())return V.ANALYTICS_ONLY;if(ts.isRecordingBlockedByConsent(t))return t.collectState===V.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?V.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN:V.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED;if(t.collectState===V.RECORDING_GLOBAL_SAMPLING)return V.RECORDING_GLOBAL_SAMPLING;let e=this.configuration.malkaEtrEnabled?$t.ETR_ON:$t.ETR_OFF;return this.vu&&this.Su.evaluateUrl(this.A.getAnonymizedUrl())?(this.S.emitCollectStateChange(V.RECORDING_URL_SAMPLING,e),V.RECORDING_URL_SAMPLING):(this.S.emitCollectStateChange(V.ANALYTICS_ONLY,e),V.ANALYTICS_ONLY)}isReplayRecorded(t){return ts.isRecordingBlockedByConsent(t)?!1:t.collectState===V.RECORDING_TEMPORARILY||t.collectState===V.RECORDING_GLOBAL_SAMPLING||t.collectState===V.RECORDING_URL_SAMPLING||this.configuration.malkaEtrEnabled}getInitialCollectState(){return V.ANALYTICS_ONLY}getRecordingConsentWithdrawn(){return V.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}}return s})();function d_(){let s="[data-cs-mask]",r="#c1_card_info_id",t=".ctHidden",e=["[data-heap-redact-text]","[heap-ignore]","[data-heap-ignore]","[data-heap-redact-attributes]"],i=["[data-hj-suppress]",".data-hj-suppress","[data-hj-masked]"];return[s,r,t,...e,...i]}function p_(){return[{selector:".ctHidden,input:not([type=button]):not([type=submit])",attrName:"value"}]}var f_=(()=>{class s{constructor(){this.O0={PIISelectors:["picture","img","video","audio"],Attributes:[]},this.gs={elementSelector:"",attrSelector:"",attrSelectors:[]};let t={PIISelectors:d_(),Attributes:p_()};this.gs=x.getComputedSelectorSettings(t,this.gs)}init(){this.N0()}setMaskedElementSettingsFromCommand(t){if(t=x.sanitizeSelectorUserInput(t),!x.isSelectorUserInput(t))throw new Error(`Command misuse: ${So[0]}`);this._u(t)}setMaskedElementSettingsFromParent(t){let e={PIISelectors:csString.prototype.split.call(t.elementSelector,","),Attributes:t.attrSelectors};this._u(e)}getMaskedElementSettings(t){return t?this.xm(this.O0):this.gs}N0(){var t,e,i,n,o,c;let l={PIISelectors:[],Attributes:[]};((i=(e=(t=window==null?void 0:window.ClickTaleSettings)===null||t===void 0?void 0:t.DOM)===null||e===void 0?void 0:e.PII)===null||i===void 0?void 0:i.Text)instanceof Array&&l.PIISelectors.push(...window.ClickTaleSettings.DOM.PII.Text),((c=(o=(n=window==null?void 0:window.ClickTaleSettings)===null||n===void 0?void 0:n.DOM)===null||o===void 0?void 0:o.PII)===null||c===void 0?void 0:c.Attributes)instanceof Array&&window.ClickTaleSettings.DOM.PII.Attributes.forEach(u=>{R(u.attr)&&R(u.rule)&&l.Attributes.push({selector:u.rule,attrName:u.attr})}),this._u(l)}_u(t){this.gs=this.xm(t)}xm(t){return x.getComputedSelectorSettings(t,this.gs)}}return s})();var g_=(()=>{class s{constructor(t,e){this.tt=t,this.vt=e,this.wu=!1}getRequestParameters(){return{dr:this.get()}}addUrlMaskingPattern(t){this.vt.addUrlMaskingPattern(t)}enableRemoveQueryString(){this.wu=!0}disableRemoveQueryString(){this.wu=!1}get(){let t=this.wu?this.tt.removeQueryString(this.Lm()):this.Lm();return this.tt.anonymizeUrl(t,{maskingPatterns:this.vt.getUrlMaskingPatterns()})}Lm(){let t="";try{t=window.top.document.referrer}catch{if(window.parent)try{t=window.parent.document.referrer}catch{t=""}}return t===""&&(t=document.referrer),typeof t!="string"&&(t=""),t}}return s})(),m_=60*1e3,y_=30*1e3,E_=(()=>{class s{constructor(t,e){this.R=t,this.I=e,this.Tu=!1,this.M0=Ar(()=>this.R.refreshSession(),y_)}onSessionExpired(t){this.k0=t}isSessionValid(){return this.Tu?!0:!(!this.R.hasValidSession()||this.R.pollCacheRefreshEvent()&&this.I.isSessionRenewed())}isCurrentPageviewValid(){let t=this.R.hasValidSession();return this.R.pollCacheRefreshEvent(!1)?!this.I.isSessionRenewed():t}refreshSession(){this.isSessionValid()?this.M0():this.D0()&&(this.Vm=M.now(),this.renewSession())}renewSession(){this.Tu=!0,this.k0(),this.Tu=!1}D0(){return!K(this.Vm)||M.now()-this.Vm>m_}}return s})(),S_=["undefined","anonymous","true","false","not_authenticated","NaN","NA","Na","unique_identifier","0","",'""',"[object Object]","{{ customer.email }}","{{ email }}"],v_=[/^email$/i,/^none$/i,/^unknown$/i,/^guest$/i,/^null$/i],__=255,w_="%-idtt_Salt!",T_="spki",gc="RSA-OAEP",un="SHA-256",mc=318,b_=(()=>{class s extends Mt{constructor(t,e,i,n,o,c){super(),this.Bs=t,this.jc=e,this.I=i,this.B=n,this.Ps=o,this.bu=c,this.nt=null,this.Au=null,this.Ru=null,this.Um=!1,this.Cu=null,this.Iu=null,this.Pu=null,this.Wa=null,this.Ou=null,Gn()&&(this.Um=!0,this.Cu=new TextEncoder,e.setRequestParametersProviders({getRequestParameters:()=>{var l;return(l=this.Iu)!==null&&l!==void 0?l:{}}}),e.after(()=>{this.Iu=null}))}onStart(){var t,e;let i=(t=this.I.getVisitor())===null||t===void 0?void 0:t.id,n=(e=this.Ps.get()==null?void 0:csString.prototype.split.call(this.Ps.get(),"."))===null||e===void 0?void 0:e[0];if(i!==n&&this.Ps.remove(),this.bu?!this.Ou&&is.isSupported()&&(this.Ou=Promise.all([this.jm(this.bu).then(this.x0.bind(this)),this.L0(this.bu)])):et.warn("identify: missing encryption key",!0,"identify"),this.nt!==null){let{identity:o,sendHashedIdentity:c}=this.nt;this.nt=null,this.identify(o,c)}}onStop(){}async identify(t,e){if(!this.Um)return;if(!this.Bs){et.error("missing heap env id","identify");return}if(!this.isStarted){this.nt={identity:t,sendHashedIdentity:e};return}if(this.V0(t))return;let i=zt.truncate(t,__),n=this.I.getVisitor();if(!n){et.warn("identify: visitor not found",!0,"identify");return}if(await this.U0(i,n.identityPrint)){if(this.I.renewVisitor(),n=this.I.getVisitor(),!n){et.warn("identify: visitor not found",!0,"identify");return}}else this.B.refreshSession();await Promise.all([this.j0(i,e,this.Bs,n.id),this.H0(i,n),this.B0(i,n)])}resetIdentity(){this.nt!==null&&(this.nt=null),this.getIdentity()&&this.I.renewVisitor(),this.Ps.get()&&this.Ps.remove()}getIdentity(){let t=this.I.getVisitor();return!t||!t.identityPrint?null:t.identityPrint}getEncryptedIdentityAndKey(){let t=this.Ps.get();if(!t)return null;let e=csString.prototype.split.call(t,".");return e.length!==3?null:`${e[1]}.${e[2]}`}async U0(t,e){return e?await this.Hm(t)!==e:!1}async H0(t,e){e.identityPrint=await this.Hm(t),this.I.setVisitor(e)}async Hm(t){var e;if(((e=this.Au)===null||e===void 0?void 0:e.identity)===t)return this.Au.identityPrint;let i=await this.jm(t),n=zt.truncate(i,12);return this.Au={identity:t,identityPrint:n},n}async jm(t){return ta(un,this.Cu.encode(w_+t))}async x0(t){this.Wa=zt.truncate(t,16);let e=this.Ps.get();if(!e)return;let i=csString.prototype.split.call(e,".");i.length===3&&i[2]!==this.Wa&&this.Ps.remove()}async L0(t){try{this.Pu=await is.crypto.importKey(T_,$n(t),{name:gc,hash:un},!1,["encrypt"])}catch{et.error(`fail to import encryption key '${t}'`,"IdentityService")}}async F0(t){if(!this.Pu)return null;let e=yr(t);e.byteLength>mc&&(et.error("arrayBuffer too long","encryptIdentity"),e=e.slice(0,mc));try{let i=await is.crypto.encrypt({name:gc},this.Pu,e);return wu(i)}catch{return null}}async B0(t,e){if(await this.Ou,!this.Wa)return;let i=await this.$0(t);i&&this.Ps.set(`${e.id}.${i}.${this.Wa}`)}async $0(t){var e;if(((e=this.Ru)===null||e===void 0?void 0:e.identity)===t)return this.Ru.encryptedIdentity;let i=await this.F0(t);return i?(this.Ru={identity:t,encryptedIdentity:i},i):null}async j0(t,e,i,n){let o=e?await ta(un,this.Cu.encode(t)):t,c=csString(await el(n));this.Iu={a:i,u:c,st:M.now().toString(),b:"web",i:o,v:"1",s:"1"},this.jc.send()}V0(t){for(let e of S_)if(t===e)return!0;for(let e of v_)if(e.test(t))return!0;return!1}}return s})(),js="_cs_s_ctx",A_=800,R_=(()=>{class s{constructor(t){this.N=t}set(t,e=mr){let i=csJSON.stringify(t);this.N.set(js,i,e)}remove(){this.N.delete(js)}get(){let t=this.N.get(js);return t===null?null:csJSON.parse(t)}}return s})(),C_=(()=>{class s{constructor(t,e,i,n,o,c,l){this.Bs=t,this.$i=e,this.Li=i,this.A=n,this.Et=o,this.Je=c,this.Ee=l}createSessionContext(){var t;let e=(t=this.Nu)!==null&&t!==void 0?t:this.Li.get(),i=this.truncateString(this.A.getAnonymizedUrl()),n={firstViewTime:M.now(),firstViewUrl:i,sessionReferrer:this.truncateString(e),currentViewUrl:i};this.$i.set(n)}removeSessionContext(){this.$i.remove()}refreshSessionContext(){let t=this.$i.get();t!==null&&this.$i.set(t)}getSharedContext(){var t,e,i,n,o;let c=this.$i.get();if(c===null)return null;let l={pageTitle:this.Ee.getPageTitle(),happid:this.Bs,firstViewTime:(t=c.firstViewTime)!==null&&t!==void 0?t:0,firstViewUrl:(e=c.firstViewUrl)!==null&&e!==void 0?e:"",sessionReferrer:(i=c.sessionReferrer)!==null&&i!==void 0?i:this.Li.get(),previousViewUrl:(n=this.Nu)!==null&&n!==void 0?n:"",currentViewTime:M.now(),currentViewUrl:(o=c.currentViewUrl)!==null&&o!==void 0?o:"",screenWidth:yt.screenWidth(),screenHeight:yt.screenHeight()};this.Et.hasCustomVariablesPage()&&(l.cvarp=this.Et.getCustomVariablesPage());let u=this.Je.getEncryptedIdentityAndKey();return u&&(l.encryptedIdentity=u),l}updateSharedContextPaths(t,e){let i=this.$i.get(),n=i!=null?i:{},o=t!=null?t:n.currentViewUrl;this.Nu=this.truncateString(o),n.currentViewUrl=this.truncateString(e),this.$i.set(n)}getPreviousViewUrl(){return this.Nu}truncateString(t){return t&&zt.truncate(t,A_)}}return s})(),I_=(()=>{class s{constructor(t){this.ni=t}onSessionCreated(){this.ni.createSessionContext()}onSessionRemoved(){this.ni.removeSessionContext()}onSessionRefreshed(){this.ni.refreshSessionContext()}onBeforeNaturalPageView(t){this.ni.updateSharedContextPaths(null,t)}onBeforeArtificialPageView(t,e){this.ni.updateSharedContextPaths(t,e)}}return s})(),P_=(()=>{class s{constructor(t){this.X=t}set(t){let e=csJSON.stringify(t);this.X.setItem(js,e)}remove(){this.X.removeItem(js)}get(){let t=this.X.getItem(js);return t===null?null:csJSON.parse(t)}}return s})(),Hs="_cs_i",O_=(()=>{class s{constructor(t){this.X=t}set(t){this.X.setItem(Hs,t)}remove(){this.X.removeItem(Hs)}get(){return this.X.getItem(Hs)}}return s})(),N_=2592e5,M_=(()=>{class s{constructor(t){this.N=t}set(t,e=N_){this.N.set(Hs,t,e,!0)}remove(){this.N.delete(Hs)}get(){return this.N.get(Hs)}}return s})();var k_=/\b((?:profile|user|last|first|primary|primary(?:[/_+-]|%20)?last)(?:[/_+-]|%20)?(?:name)[/=])[^#;?&/]+/gi,D_="$1CS_ANONYMIZED_NAME",x_=(()=>{class s{constructor(t){this.M=t}anonymizeUrl(t,e={}){let i=e.maskingPatterns||[],n=e.partialMaskingPatterns||[],o=this.M.anonymizePII(t);if(o=this.M.anonymizeJwt(o),e.maskNames){let u=o;o=this.un(o),o!==u&&(q.counters.redactedPII.count("name"),q.counters.redactedPII.count("name-in-url"))}let c=this.G0(o,i);if(c!==o)return q.counters.redactedPII.count("url"),c;let l=this.q0(o,n);return l!==o&&q.counters.redactedPII.count("url"),l}removeQueryString(t){let{path:e,queryString:i}=this.Mu(t);return i!==""?`${e}?`:e}Mu(t){let e=csString.prototype.indexOf.call(t,"?"),i,n="";return e!==-1?(i=csString.prototype.slice.call(t,0,e),n=csString.prototype.slice.call(t,e,t.length)):i=t,{path:i,queryString:n}}G0(t,e){if(e.length===0)return t;let{path:i,queryString:n}=this.Mu(t),o=csString.prototype.split.call(i,"/");for(let c of e){let l=this.W0(o,c);if(l!==null)return`${l}${n}`}return t}W0(t,e){if(t.length<e.length)return null;let i=[];for(let n=0;n<t.length;n++){let o=t[n];if(n>=e.length){csArray.prototype.push.call(i,o);continue}let c=e[n].key;if(this.$m(c)){let l=e[n].value;csArray.prototype.push.call(i,l);continue}if(o===c){csArray.prototype.push.call(i,o);continue}return null}return csArray.prototype.join.call(i,"/")}q0(t,e){if(e.length===0)return t;let{path:i,queryString:n}=this.Mu(t),o=csString.prototype.split.call(i,"/");for(let c of e)o=this.Y0(o,c);return`${csArray.prototype.join.call(o,"/")}${n}`}Y0(t,e){let i=[],n=0,c=t[0]==="http:"||t[0]==="https:"?2:0;for(let l=0;l<t.length;l++){let u=t[l],E=e[n].key;if(this.$m(E)&&l>=c){let p=e[n].value;csArray.prototype.push.call(i,u.length>0?p:""),n++,n===e.length&&(n=0);continue}if(u===E){csArray.prototype.push.call(i,u),n++,n===e.length&&(n=0);continue}for(let p=0;p<n;p++){let y=l-n+p;i[y]=t[y]}n=0,csArray.prototype.push.call(i,u)}for(let l=0;l<n;l++){let u=t.length-n+l;i[u]=t[u]}return i}$m(t){return Pt(t,xl)}un(t){return csString.prototype.replace.call(t,k_,D_)}}return s})(),L_=(()=>{class s{constructor(t,e,i,n,o,c){this.f=t,this.pi=e,this.ps=i,this.O=n,this.S=o,this.X=c}initWithQuota(){if(!this.f.collectionEnabled){this.zm();return}let t=new Rn(this.f.getSettingsFileUri(),"",{type:"json",cacheMinutes:15});this._t=new h_(this.f,t,this.S),this._t.init(e=>{e?this.init():this.zm()})}X0(){this.O.schedule(()=>{this.M=new Ai,this.tt=new x_(this.M),this.A=new fS(window.location,this.tt),this.N=new _r(this.f,this.A,this.pi),this.N.init(),this.At=new yS,this.E=new dS([uS.UXA]),this.J=new gS,this.lt=new f_,this.Tt=new QE(this.f,new GE(this.f,this.N,this.At),this.S)})}zm(){}init(){is.isSupported()&&is.setDigestSalt(this.f.projectId.toString());let t,e,i,n,o,c,l,u,E,p,y,m,S,I,P,v,_,D,O,A,j,it,dt,Wt,kt,w,k;this.X0(),this.O.schedule(()=>{y=new nS(window.location,this.N),new NS().init(),m=Ml.create(B.warn),p=new zc(m),this._t===void 0&&(this._t=new u_(this.f,this.S,y,this.A,new Jc),this._t.init())}),this.O.schedule(()=>{t=new jE(this.f,this.N,this.X),e=new FE(t,this._t,this.S,this.f.replayConsentRequiredForSession,this.f.malkaEtrEnabled),i=new vS(this.f,this.N,this.X),n=new VE(this.f,i,this.S,e),this.ps.setContext(n,e)}),this.O.schedule(()=>{c=new zE(n,e,this.Tt),l=new Vp(this.f,this.N,this.X),u=new tS(window.location,l),E=new eS(u),P=new $E(this.f,n,u),kt=new bS(Ce,this.f),A=new AS(kt,this.f.isChild),j=new RS(kt),it=new CS(kt),dt=new IS,Wt=new mS(A,j,it,dt),v=new hS(this.E,Wt),_=new iS(this.A),D=new rS(_,this.E);let U=new Up(this.f,this.N,this.X);w=new SS(this.M,U),O=new ES(this.E,w);let F=new Ap(n,e,u,w,this.f)}),this.O.schedule(()=>{let U=new LE(this.f,n,u,P,c,S,o,y);this.f.implementations&&(k=new l_(this.f.implementations,this.E,this.O),k.init(),this.S.addListener(k)),U.compute(F=>{this.O.schedule(()=>{v.init();let lt=new JE(this.f,this.E,this.Tt,e,this.S),Dt=new oS(this.f,this.N,this.At),Ht=new aS(this.S,window.location,Dt),Me=new lS(this.E,Ht),bs=new pS(this.E,this.f),Lt=new g_(this.tt,new RE),Bt=new E_(e,n),te,As,me;if(this.f.isCsCrosswritingHeap()){let Rs="api/identify_v3",Pr=new Rn(this.f.getPaProxyDomainUri(),Rs),Js;this.f.cookielessTrackingEnabled?Js=new O_(this.X):Js=new M_(this.N),te=new b_(this.f.getHeapEnvId(),Pr,n,Bt,Js,this.f.identityEncryptionKey),me=new wl;let Cs;this.f.cookielessTrackingEnabled?Cs=new P_(this.X):Cs=new R_(this.N),As=new C_(this.f.getHeapEnvId(),Cs,Lt,this.A,w,te,me);let Or=new I_(As);this.S.addListener(Or)}let Ot=new rc(this.f,n,e,I),Yt=new rc(this.f,n,e,I,As);F?(this.S.emitInitTracking(),new xE(Ot,Yt,m,n,e,Bt,Lt,this.S,this.E,v,this.f,Me,Ht,lt,this.Tt,this.M,kt,this.tt,this.A,bs,this.J,Wt,w,O,_,D,this.O,p,this.N,this.At,this._t,this.lt,me,te).start()):new ZE(this.S,this.E,v,Me,Ht,E,lt).start()})})})}}return s})(),gs=(()=>{let s;return function(r){let t="{domain}/tag/tag.bundle.js?v={version}",e,i={loadBundle(_){let D=_.source,O=_.data;if(c(O)){let A=()=>{let j=n(t,O);y(j,()=>D.postMessage("csBundleLoaded",_.origin))};e=O.token,v(i.loadBundle),l(_.origin)&&A()}}};function n(_,D){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(_,"{version}",D.version),"{token}",D.token),"{domain}",D.domain)}function o(){return e}r.getToken=o;function c(_){return _&&_.type==="csBundleInjection"&&l(_.domain)&&E(_.version)&&u(_.token)}r.isAuthorizedIncomingMessage=c,r.hjDomainRegex=/^https?:\/\/[a-zA-Z0-9\.\-]+\.hotjar\.com$/;function l(_){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com|csq\.io)$/.test(_)||r.hjDomainRegex.test(_)}r.isAuthorizedDomain=l;function u(_){return/^[a-zA-Z0-9]+$/.test(_)}r.isAuthorizedToken=u;function E(_){return/^[a-zA-Z0-9\.]+$/.test(_)}r.isAuthorizedTagVersion=E;function p(){let _=window.opener||window.parent;return window!==_&&window.addEventListener}r.isActivable=p;function y(_,D){let O=document.createElement("script");O.type="text/javascript",O.async=!0,O.src=_,O.onload=D,O.charset="utf-8",document.head.appendChild(O)}r.addScript=y;function m(_){let D=document.createElement("link");D.rel="stylesheet",D.href=_,document.head.appendChild(D)}r.addStyle=m;function S(_){return`${_}?cb=${new csDate().getTime()}`}r.addCacheBusting=S;function I(){P(i.loadBundle)}r.waitForBundleInjection=I;function P(_){window.addEventListener("message",_,!1)}r.listen=P;function v(_){window.removeEventListener("message",_,!1)}r.removeListener=v}(s||(s={})),s})(),yc="_hp_ved",V_=18e5,U_="/js/ved.js",j_="/css/ved.css",H_="/js/ved.css",B_=(()=>{let s;return function(r){r.StatusUpdate="status"}(s||(s={})),s})(),F_=(()=>{let s;return function(r){r.ReceivedInitMessage="received_init_message"}(s||(s={})),s})();var dn=(()=>{let s;return function(r){let t=!1,e;function i(y){return e+y}function n(){let y=[i(j_),i(H_)];csArray.prototype.forEach.call(y,m=>{gs.addStyle(m)})}function o(y){let m=new csRegExp("(^|;)[ ]*"+y+"=([^;]*)"),S=m.exec(document.cookie);return S?decodeURIComponent(S[2]):null}function c(y,m,S){let I=encodeURIComponent(y)+"="+encodeURIComponent(m),P=new csDate;P.setTime(P.getTime()+S);let v=I+"; expires="+P.toUTCString()+"; path=/";document.cookie=v}function l(){c(yc,"on",V_)}function u(){return o(yc)==="on"}r.isVLCookieEnabled=u;function E(y){window.heapV=Object.assign({},window.heap,{source:y==null?void 0:y.source,uri:e,loadArgs:y==null?void 0:y.data.args,identify:()=>{},track:()=>{}})}r.initializeHeapV=E;function p(y,m){var S;if(e=y,m){let I={type:B_.StatusUpdate,value:F_.ReceivedInitMessage},P={targetOrigin:m==null?void 0:m.origin};(S=m==null?void 0:m.source)===null||S===void 0||S.postMessage(I,P)}t||(t=!0,l(),E(m),window.heapV&&(gs.addScript(i(U_)),n()))}r.init=p}(s||(s={})),s})(),$_=(()=>{let s;return function(r){let t=window.opener||window.parent,e="tag",i="https://app.contentsquare.com",n=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/,/^https:\/\/app\.[a-z0-9-]+\.csiab\.[a-z0-9-]+\.csq\.io$/,gs.hjDomainRegex],o,c,l,u={initHeapVisualLabeler(A){var j;A.origin===l&&((j=A.data)===null||j===void 0?void 0:j.message)==="init"&&A.source&&(dn.init(l,A),_(u.initHeapVisualLabeler))},ping(A){typeof A.data=="string"&&A.data==="ping"&&y(A.origin)&&(c=A.origin,o=gs.hjDomainRegex.test(A.origin)?i:A.origin,_(u.ping),v(u.insertMessageScript),m(gs.addCacheBusting("utils.js")))},insertMessageScript:D(A=>{typeof A.data=="string"&&A.data!=="ping"&&(_(u.insertMessageScript),m(A.data))})};function E(){return gs.getToken()}r.getToken=E;function p(){return window!==t&&window.addEventListener}r.isActivable=p;function y(A){return csArray.prototype.some.call(n,j=>j.test(A))}r.isAuthorizedDomain=y;function m(A,j){let it=document.createElement("script");it.type="text/javascript",it.async=!0;let dt=o==null?void 0:csString.prototype.replace.call(o,/^https?:/,"");it.src=`${dt}/${e}/${A}`,it.onload=j,it.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(it),S(A)}function S(A){csString.prototype.includes.call(A,"&mode=")&&sessionStorage.setItem("_hjRetakerMode",csString.prototype.split.call(A,"&mode=")[1])}function I(){v(u.ping),gs.waitForBundleInjection()}r.waitForConnection=I;function P(A){l=A,v(u.initHeapVisualLabeler),dn.isVLCookieEnabled()&&dn.init(l)}r.waitForHeapVisualLabeler=P;function v(A){window.addEventListener("message",A,!1)}r.listen=v;function _(A){window.removeEventListener("message",A,!1)}r.removeListener=_;function D(A){return function(j){j.origin===c&&A(j)}}r.secureListener=D;function O(A){c&&t.postMessage(A,c)}r.post=O}(s||(s={})),s})();var Ji=window.CSFrameCommunication||$_;var z_=(()=>{class s extends _o{constructor(t){super(),this.O=t}emitBeforeNaturalPageView(t){for(let e of this.listeners)e.onBeforeNaturalPageView&&e.onBeforeNaturalPageView(t)}emitAfterNaturalPageView(){for(let t of this.listeners)t.onAfterNaturalPageView&&t.onAfterNaturalPageView()}emitInitTracking(){for(let t of this.listeners)t.onInitTracking&&t.onInitTracking()}emitStartTracking(t){for(let e of this.listeners)e.onStartTracking&&this.O.schedule(()=>e.onStartTracking(t))}emitStartNoTrackingMode(){for(let t of this.listeners)t.onStartNoTrackingMode&&this.O.schedule(()=>t.onStartNoTrackingMode())}emitArtificialPageViewEnd(){for(let t of this.listeners)if(t.onArtificialPageViewEnd)try{t.onArtificialPageViewEnd()}catch(e){B.error(e)}}emitBeforeArtificialPageView(t,e){for(let i of this.listeners)i.onBeforeArtificialPageView&&i.onBeforeArtificialPageView(t,e)}emitAfterArtificialPageView(){for(let t of this.listeners)t.onAfterArtificialPageView&&t.onAfterArtificialPageView()}emitBeforeSessionRenewal(){for(let t of this.listeners)t.onBeforeSessionRenewal&&t.onBeforeSessionRenewal()}emitAfterSessionRenewal(){for(let t of this.listeners)t.onAfterSessionRenewal&&t.onAfterSessionRenewal()}emitOptout(){for(let t of this.listeners)t.onOptout&&t.onOptout()}emitReplayUnanonymizationConsentGranted(){for(let t of this.listeners)t.onReplayUnanonymizationConsentGranted&&t.onReplayUnanonymizationConsentGranted()}emitReplayUnanonymizationConsentWithdrawn(){for(let t of this.listeners)t.onReplayUnanonymizationConsentWithdrawn&&t.onReplayUnanonymizationConsentWithdrawn()}emitAfterReplayRecordingConsentGranted(){for(let t of this.listeners)t.onAfterReplayRecordingConsentGranted&&t.onAfterReplayRecordingConsentGranted()}emitAfterReplayRecordingConsentWithdrawn(){for(let t of this.listeners)t.onAfterReplayRecordingConsentWithdrawn&&t.onAfterReplayRecordingConsentWithdrawn()}emitCollectStateChange(t,e){for(let i of this.listeners)i.onCollectStateChange&&i.onCollectStateChange(t,e)}emitInitialDomStart(){for(let t of this.listeners)t.onInitialDomStart&&t.onInitialDomStart()}emitInitialDomDone(t){for(let e of this.listeners)e.onInitialDomDone&&e.onInitialDomDone(t)}emitRecordingContextChange(){for(let t of this.listeners)t.onRecordingContextChange&&t.onRecordingContextChange()}emitSensitiveStatusChange(){var t;for(let e of this.listeners)(t=e.onSensitiveStatusChange)===null||t===void 0||t.call(e)}emitBeforeVisitorRenewal(){for(let t of this.listeners)t.onBeforeVisitorRenewal&&t.onBeforeVisitorRenewal()}emitAfterVisitorCleared(){for(let t of this.listeners)t.onAfterVisitorCleared&&t.onAfterVisitorCleared()}emitAfterVisitorRenewal(){for(let t of this.listeners)t.onAfterVisitorRenewal&&t.onAfterVisitorRenewal()}emitSessionCreated(){for(let t of this.listeners)t.onSessionCreated&&t.onSessionCreated()}emitSessionRemoved(){for(let t of this.listeners)t.onSessionRemoved&&t.onSessionRemoved()}emitSessionRefreshed(){for(let t of this.listeners)t.onSessionRefreshed&&t.onSessionRefreshed()}}return H([Tt("emitStartTracking")],s.prototype,"emitStartTracking",null),s})();var G_=(()=>{let s;return function(r){function t(){return typeof window.CSJavascriptBridge=="object"&&typeof window.CSJavascriptBridge.optIn=="function"&&typeof window.CSJavascriptBridge.optOut=="function"&&typeof window.CSJavascriptBridge.sendEvent=="function"&&typeof window.CSJavascriptBridge.sendDynamicVar=="function"&&typeof window.CSJavascriptBridge.sendTransaction=="function"}r.isCSJavascriptBridgeDefined=t;function e(){if(typeof window.CSJavascriptBridge.getVersion=="function")try{let v=window.CSJavascriptBridge.getVersion();if(pt(v))return v}catch{B.warn("an error occurred when calling getVersion")}return null}r.getBridgeVersion=e;function i(){typeof window.CSJavascriptBridge.onWebviewTrackingReady=="function"&&window.CSJavascriptBridge.onWebviewTrackingReady()}r.notifyIsReadyForTracking=i;function n(v,_){window.CSJavascriptBridge.identify&&window.CSJavascriptBridge.identify(v,csJSON.stringify(_))}r.identify=n;function o(){window.CSJavascriptBridge.resetIdentity&&window.CSJavascriptBridge.resetIdentity()}r.resetIdentity=o;function c(v){window.CSJavascriptBridge.addUserProperties&&window.CSJavascriptBridge.addUserProperties(csJSON.stringify(v))}r.addUserProperties=c;function l(v){window.CSJavascriptBridge.sendEvent(csJSON.stringify(v))}r.sendAnalysisEvent=l;function u(v){if(window.CSJavascriptBridge.sendSREvent)for(let _ of v.events)window.CSJavascriptBridge.sendSREvent(csJSON.stringify(_))}r.sendSREvent=u;function E(v){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendLog&&window.CSJavascriptBridge.sendLog(csJSON.stringify(v))}r.sendLog=E;function p(){window.CSJavascriptBridge.optIn()}r.sendOptIn=p;function y(){window.CSJavascriptBridge.optOut()}r.sendOptOut=y;function m(v,_){window.CSJavascriptBridge.sendDynamicVar(v,_)}r.sendDynamicVariable=m;function S(v,_,D){window.CSJavascriptBridge.sendTransaction(v,_,D)}r.sendTransaction=S;function I(v,_){if(window.CSJavascriptBridge.sendAssets){let D=csJSON.stringify(v);window.CSJavascriptBridge.sendAssets(D,_||null)}else window.CSJavascriptBridge.sendSRAssets&&window.CSJavascriptBridge.sendSRAssets(csArray.prototype.map.call(v,D=>D.assetId))}r.sendAssets=I;function P(v){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendNativeSREvent&&window.CSJavascriptBridge.sendNativeSREvent(csJSON.stringify(v))}r.sendNativeSREvent=P}(s||(s={})),s})();var q_=(()=>{class s{setItem(t,e){window.sessionStorage.setItem(t,e)}getItem(t){return window.sessionStorage.getItem(t)}removeItem(t){window.sessionStorage.removeItem(t)}}return s})(),W_=(()=>{class s{constructor(t,e,i){this.f=t,this.wt=e,this.ps=i}start(){var t,e,i,n,o;if(window.CSQ_TAGS=csArray.prototype.concat.call(window.CSQ_TAGS||[],this.f.projectId),window.UXAnalytics)return;window.UXAnalytics={};let c=new q_,l=new Ol(!!(!((t=this.f.taskSchedulerOptions)===null||t===void 0)&&t.enabled),(e=this.f.taskSchedulerOptions)===null||e===void 0?void 0:e.maxProcessingTime,(i=this.f.taskSchedulerOptions)===null||i===void 0?void 0:i.waitDuration),u=new Sp(this.wt,this.f);u.init();let E=new _p(this.f,u);if(this.wt.isTopWindowTracker()&&E.canTrack()){if(!((n=window.CSProtectnativeFunctionsLogs)===null||n===void 0)&&n.Warning&&B.warn(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Warning}`),!((o=window.CSProtectnativeFunctionsLogs)===null||o===void 0)&&o.Critical){B.error(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Critical}`);return}yp();let y=new z_(l),m=new L_(this.f,u,this.ps,l,y,c);this.f.isQuotaEnabled()?m.initWithQuota():m.init()}let p=csString.prototype.indexOf.call(window.location.href,"csDebug=1")>-1;window.UXAnalytics={Sensitive:{isNodeSensitive(y){return x.isMaskedElement(y)||x.isMaskedElementChild(y)},isAttributeSensitive(y,m){return x.isMaskedAttribute(y,m)},getSensitiveAttributes(y){return ar(y.attributes,m=>x.isMaskedAttribute(y,m.name))}},Console:{warn(y){p&&console.warn("cs.tracking.warning",y)},error(y){p&&console.error("cs.tracking.error",y)}},Version:jc},window.CSFrameCommunication||(window.CSFrameCommunication=Ji,Ji.isActivable()&&Ji.waitForConnection(),this.f.isCsCrosswritingHeap()&&Ji.waitForHeapVisualLabeler(this.f.getHeapWebAppUri()))}}return H([Tt("main.start"),N("main.start")],s.prototype,"start",null),s})(),Y_=(()=>{class s{constructor(){}send(t,e,i=ht.warn){let n={message:t,errorCode:e,level:i};G_.sendLog(n)}}return s})();var X_=(()=>{class s{constructor(t,e,i){this.W=t,this.M=e,this.KC=i,this.kt=[],this.JC=eo().v}flush(){this.kt.length!==0&&(this.W.send({m:csArray.prototype.map.call(this.kt,t=>({n:t.name,p:t.parameter,v:t.value})),p:this.M.anonymizePII(window.location.pathname),pid:this.KC,v:this.JC}),this.kt=[])}push(t){csArray.prototype.push.call(this.kt,...t),this.flush()}}return s.DEBOUNCE_INTERVAL=5e3,H([Au(s.DEBOUNCE_INTERVAL)],s.prototype,"flush",null),s})();function K_(s,r){let t=s.validationRate/10,e=Es.boolean(t);if((s.environment==="staging"||!1||e)&&!r.isInWebViewContext())try{let o=Ml.create(B.warn,r.isTopWindowTracker()),l=new zc(o).create(s.getMetricsUri(),!0),u=new Ai,E=new X_(l,u,s.projectId);q.setService(E)}catch(o){B.warn(`Error initializing metrics: ${o.message}`)}}function J_(){var s;Du();let r=new Hd(window.CS_CONF);window._uxa=window._uxa||[],r.processOptionOverrides(window._uxa);let t=new Bd(window,r);t.init();let e=new dp;if(_u(B),pp(),B.computeIsActive(r.validationRate),t.isTopWindowTracker()){let o=new ap(r,e);B.setStrategy(o)}else if(t.isInWebViewContext()){let n=new Y_;B.setStrategy(n)}!((s=r==null?void 0:r.experimental)===null||s===void 0)&&s.disableMutationObserverProtection&&window.csMutationObserver&&(window.csMutationObserver=vs(window,"MutationObserver")),_d(),K_(r,t),new W_(r,t,e).start()}window.CSCurrentScript=document.currentScript;csSetTimeout(()=>{try{fp(J_)}catch{}});})();

// signature-678385abfa0b7991d449bb0c4c9dbacbda7c30c224444ce12558d8e96fafb707